import{s as Fe,l as Ae,i as B,n as ye,d as _,B as ln,q as pn,e as V,t as Ie,k as $,ai as Ai,c as z,a as M,b as Se,o as ee,aj as Li,f as m,g as y,h as Te,Q as tl,I as ut,u as ke,y as We,J as $e,A as qe,j as ce,p as Wt,D as xe,r as Gt,v as qt,w as Jt,x as Qt,R as Dn,E as Ve,F as ze,H as en,T as Qn,O as ll,z as jl,C as Cn,ao as lt,U as Ft,V as kt,W as Bn,Y as gn,L as $t,$ as me,a1 as Ol,ap as io,ah as Ri,_ as ao,aq as mt,a2 as Il,al as Ra,ar as Ua,am as Wa,K as cs,an as us,S as fs,P as Ql,m as Fa}from"./scheduler.Dg_Xn4WQ.js";import{S as Le,i as Re,t as C,g as He,a as N,c as Be,j as ds,f as Je,b as te,d as oe,m as ne,e as le,h as xl}from"./index.gNonUo3Z.js";import{g as Ui}from"./globals.D0QH3NT1.js";import{e as vt,u as bo,o as vo}from"./each.dwVHsGX8.js";import{t as et}from"./Toaster.svelte_svelte_type_style_lang.CM0nbnqF.js";import{C as ja,D as Ya,F as Xa,a as Wi,b as Ka,P as Za}from"./FilesOverlay.GF7Yuo2H.js";import{g as Po}from"./entry.C1o6s8Km.js";import{p as Ga}from"./stores.C9kw2blP.js";import{t as ul,u as xn,e as Yl,p as Fi,n as ji,m as dl,k as Zn,h as wo,c as Hl,b as qa,S as hs,T as kn,G as Ut,l as ko,V as Gn,F as jn,W as Yi,g as cl,s as Xo,E as Ja,f as ms,y as Qa,z as il,r as xa,J as $l,H as $a,B as al,q as ec}from"./index.C2zJs1dP.js";import{a as tc,B as nc,C as lc,D as oc,E as sc,F as rc,G as so,H as gs,v as el,n as Xi,t as ic,b as wn,I as ac,m as xo,f as co,J as cc,K as uc,L as fc,d as dc,w as Oo}from"./index.bquoJ5FE.js";import{f as Ko,i as bl,C as hc,u as Ho,d as mc,a as gc}from"./index.PGXp80Wq.js";import{g as _c}from"./index.TNrF8u2r.js";import{p as pc,h as bc}from"./index.BE5d1MAv.js";import{M as vc,a as wc,b as kc,T as yc,S as Ec,P as Ic,q as Sc}from"./index.CSe4xJLs.js";import{h as Cc,i as _s,j as ps}from"./index.BGh32guZ.js";import{q as Dc,r as Mc,s as Tc,t as Vc,v as zc,w as Nc}from"./index.ttVds5UM.js";import{g as $o,j as Pc,k as Oc,l as Hc}from"./index.DOfUwrRA.js";import{f as vl}from"./index.nST1YYiD.js";import{m as Sl,p as bs}from"./marked.esm._0_gBwjO.js";import{t as Ki,s as Bc}from"./index.CftsCmmZ.js";import{u as Ac,b as Lc}from"./index.KfBBgaGK.js";import"./updater.B0HmoELl.js";import{D as yo,M as _n}from"./Dropdown.TmwXbC8a.js";import{b as Eo}from"./menu-trigger.qJyZyepX.js";import{f as Xl}from"./index.BFuekP1B.js";import{T as Ot}from"./Tooltip.FP-CxtJW.js";import{S as Rc}from"./Switch.BbmWI4o0.js";import{W as Uc}from"./WrenchSolid.DPLSiZc6.js";import{V as Wc,R as Fc}from"./RichTextInput.CUf9htS3.js";import{g as jc}from"./index.C2GqRkC6.js";import{g as Yc}from"./index.Bzw6WA74.js";import{F as Zi}from"./fuse.CU2r43ac.js";import{d as Xc,r as Kc}from"./relativeTime.BDz4fsXT.js";import{S as Io}from"./Spinner.C_k6OlPC.js";import{F as Gi}from"./FileItem.CxuTeboj.js";import{h as On,ba as qi,bb as es,bc as Bo,bd as Ao,ah as Zc,be as Gc,bf as qc,af as Ji,bg as Jc}from"./Markdown._3svO0p6.js";import{X as So}from"./XMark.B1BmN65L.js";import{G as Qc}from"./GlobeAlt.9X3ui2HX.js";import{S as xc,E as $c,M as eu}from"./Messages.D1_5Ykrn.js";import{S as tu}from"./Selector.DruslRvD.js";import{f as nu}from"./FileSaver.min.CimDdHIv.js";import{a as lu}from"./index.DWJsyPmW.js";import{U as ou}from"./UserMenu.BoHsYg9D.js";import{M as su}from"./MenuLines.CHwhLhbA.js";import{M as ru}from"./Modal.DLh1UrlN.js";import{A as iu}from"./AdvancedParams.D4jxmpS0.js";import{g as au,j as cu,k as uu,l as fu}from"./index.Ctu0RdPD.js";import{V as du,H as hu}from"./Heart.DruJa4pv.js";import{C as ro}from"./Collapsible.B_qz9Oj5.js";import{D as mu}from"./Drawer.B1OKbols.js";import{w as Qe,a as Pn,d as kl}from"./index.Dalr-O9q.js";import{g as nl,a as Bl}from"./spread.CgU5AtxT.js";import{E as gu}from"./EllipsisVertical.DQr0oDBW.js";import{C as _u}from"./ConfirmDialog.BuoJh2qp.js";function pu(l){let e;for(;e=l.sourceEvent;)l=e;return l}function Fn(l,e){if(l=pu(l),e===void 0&&(e=l.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=l.clientX,n.y=l.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[l.clientX-o.left-e.clientLeft,l.clientY-o.top-e.clientTop]}}return[l.pageX,l.pageY]}const bu={passive:!1},Al={capture:!0,passive:!1};function Lo(l){l.stopImmediatePropagation()}function yl(l){l.preventDefault(),l.stopImmediatePropagation()}function Qi(l){var e=l.document.documentElement,t=On(l).on("dragstart.drag",yl,Al);"onselectstart"in e?t.on("selectstart.drag",yl,Al):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function xi(l,e){var t=l.document.documentElement,n=On(l).on("dragstart.drag",null);e&&(n.on("click.drag",yl,Al),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const eo=l=>()=>l;function Zo(l,{sourceEvent:e,subject:t,target:n,identifier:o,active:s,x:i,y:r,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Zo.prototype.on=function(){var l=this._.on.apply(this._,arguments);return l===this._?this:l};function vu(l){return!l.ctrlKey&&!l.button}function wu(){return this.parentNode}function ku(l,e){return e??{x:l.x,y:l.y}}function yu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eu(){var l=vu,e=wu,t=ku,n=yu,o={},s=qi("start","drag","end"),i=0,r,a,c,u,f=0;function h(E){E.on("mousedown.drag",d).filter(n).on("touchstart.drag",w).on("touchmove.drag",g,bu).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(E,I){if(!(u||!l.call(this,E,I))){var T=k(this,e.call(this,E,I),E,I,"mouse");T&&(On(E.view).on("mousemove.drag",p,Al).on("mouseup.drag",b,Al),Qi(E.view),Lo(E),c=!1,r=E.clientX,a=E.clientY,T("start",E))}}function p(E){if(yl(E),!c){var I=E.clientX-r,T=E.clientY-a;c=I*I+T*T>f}o.mouse("drag",E)}function b(E){On(E.view).on("mousemove.drag mouseup.drag",null),xi(E.view,c),yl(E),o.mouse("end",E)}function w(E,I){if(l.call(this,E,I)){var T=E.changedTouches,S=e.call(this,E,I),A=T.length,O,H;for(O=0;O<A;++O)(H=k(this,S,E,I,T[O].identifier,T[O]))&&(Lo(E),H("start",E,T[O]))}}function g(E){var I=E.changedTouches,T=I.length,S,A;for(S=0;S<T;++S)(A=o[I[S].identifier])&&(yl(E),A("drag",E,I[S]))}function v(E){var I=E.changedTouches,T=I.length,S,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<T;++S)(A=o[I[S].identifier])&&(Lo(E),A("end",E,I[S]))}function k(E,I,T,S,A,O){var H=s.copy(),F=Fn(O||T,I),K,U,D;if((D=t.call(E,new Zo("beforestart",{sourceEvent:T,target:h,identifier:A,active:i,x:F[0],y:F[1],dx:0,dy:0,dispatch:H}),S))!=null)return K=D.x-F[0]||0,U=D.y-F[1]||0,function Y(P,j,G){var X=F,Z;switch(P){case"start":o[A]=Y,Z=i++;break;case"end":delete o[A],--i;case"drag":F=Fn(G||j,I),Z=i;break}H.call(P,E,new Zo(P,{sourceEvent:j,subject:D,target:h,identifier:A,active:Z,x:F[0]+K,y:F[1]+U,dx:F[0]-X[0],dy:F[1]-X[1],dispatch:H}),S)}}return h.filter=function(E){return arguments.length?(l=typeof E=="function"?E:eo(!!E),h):l},h.container=function(E){return arguments.length?(e=typeof E=="function"?E:eo(E),h):e},h.subject=function(E){return arguments.length?(t=typeof E=="function"?E:eo(E),h):t},h.touchable=function(E){return arguments.length?(n=typeof E=="function"?E:eo(!!E),h):n},h.on=function(){var E=s.on.apply(s,arguments);return E===s?h:E},h.clickDistance=function(E){return arguments.length?(f=(E=+E)*E,h):Math.sqrt(f)},h}var Iu=1e-12;function vs(l){return((l=Math.exp(l))+1/l)/2}function Su(l){return((l=Math.exp(l))-1/l)/2}function Cu(l){return((l=Math.exp(2*l))-1)/(l+1)}const Du=function l(e,t,n){function o(s,i){var r=s[0],a=s[1],c=s[2],u=i[0],f=i[1],h=i[2],d=u-r,p=f-a,b=d*d+p*p,w,g;if(b<Iu)g=Math.log(h/c)/e,w=function(S){return[r+S*d,a+S*p,c*Math.exp(e*S*g)]};else{var v=Math.sqrt(b),k=(h*h-c*c+n*b)/(2*c*t*v),E=(h*h-c*c-n*b)/(2*h*t*v),I=Math.log(Math.sqrt(k*k+1)-k),T=Math.log(Math.sqrt(E*E+1)-E);g=(T-I)/e,w=function(S){var A=S*g,O=vs(I),H=c/(t*v)*(O*Cu(e*A+I)-Su(I));return[r+H*d,a+H*p,c*O/vs(e*A+I)]}}return w.duration=g*1e3*e/Math.SQRT2,w}return o.rho=function(s){var i=Math.max(.001,+s),r=i*i,a=r*r;return l(i,r,a)},o}(Math.SQRT2,2,4),to=l=>()=>l;function Mu(l,{sourceEvent:e,target:t,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function Ro(l){l.stopImmediatePropagation()}function Pl(l){l.preventDefault(),l.stopImmediatePropagation()}function Tu(l){return(!l.ctrlKey||l.type==="wheel")&&!l.button}function Vu(){var l=this;return l instanceof SVGElement?(l=l.ownerSVGElement||l,l.hasAttribute("viewBox")?(l=l.viewBox.baseVal,[[l.x,l.y],[l.x+l.width,l.y+l.height]]):[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]):[[0,0],[l.clientWidth,l.clientHeight]]}function ws(){return this.__zoom||es}function zu(l){return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*(l.ctrlKey?10:1)}function Nu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pu(l,e,t){var n=l.invertX(e[0][0])-t[0][0],o=l.invertX(e[1][0])-t[1][0],s=l.invertY(e[0][1])-t[0][1],i=l.invertY(e[1][1])-t[1][1];return l.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Ou(){var l=Tu,e=Vu,t=Pu,n=zu,o=Nu,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],r=250,a=Du,c=qi("start","zoom","end"),u,f,h,d=500,p=150,b=0,w=10;function g(D){D.property("__zoom",ws).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",H).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(D,Y,P,j){var G=D.selection?D.selection():D;G.property("__zoom",ws),D!==G?I(D,Y,P,j):G.interrupt().each(function(){T(this,arguments).event(j).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},g.scaleBy=function(D,Y,P,j){g.scaleTo(D,function(){var G=this.__zoom.k,X=typeof Y=="function"?Y.apply(this,arguments):Y;return G*X},P,j)},g.scaleTo=function(D,Y,P,j){g.transform(D,function(){var G=e.apply(this,arguments),X=this.__zoom,Z=P==null?E(G):typeof P=="function"?P.apply(this,arguments):P,J=X.invert(Z),L=typeof Y=="function"?Y.apply(this,arguments):Y;return t(k(v(X,L),Z,J),G,i)},P,j)},g.translateBy=function(D,Y,P,j){g.transform(D,function(){return t(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),i)},null,j)},g.translateTo=function(D,Y,P,j,G){g.transform(D,function(){var X=e.apply(this,arguments),Z=this.__zoom,J=j==null?E(X):typeof j=="function"?j.apply(this,arguments):j;return t(es.translate(J[0],J[1]).scale(Z.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof P=="function"?-P.apply(this,arguments):-P),X,i)},j,G)};function v(D,Y){return Y=Math.max(s[0],Math.min(s[1],Y)),Y===D.k?D:new Bo(Y,D.x,D.y)}function k(D,Y,P){var j=Y[0]-P[0]*D.k,G=Y[1]-P[1]*D.k;return j===D.x&&G===D.y?D:new Bo(D.k,j,G)}function E(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function I(D,Y,P,j){D.on("start.zoom",function(){T(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(j).end()}).tween("zoom",function(){var G=this,X=arguments,Z=T(G,X).event(j),J=e.apply(G,X),L=P==null?E(J):typeof P=="function"?P.apply(G,X):P,re=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),q=G.__zoom,ae=typeof Y=="function"?Y.apply(G,X):Y,ge=a(q.invert(L).concat(re/q.k),ae.invert(L).concat(re/ae.k));return function(se){if(se===1)se=ae;else{var Oe=ge(se),Q=re/Oe[2];se=new Bo(Q,L[0]-Oe[0]*Q,L[1]-Oe[1]*Q)}Z.zoom(null,se)}})}function T(D,Y,P){return!P&&D.__zooming||new S(D,Y)}function S(D,Y){this.that=D,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,Y),this.taps=0}S.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,Y){return this.mouse&&D!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var Y=On(this.that).datum();c.call(D,this.that,new Mu(D,{sourceEvent:this.sourceEvent,target:g,type:D,transform:this.that.__zoom,dispatch:c}),Y)}};function A(D,...Y){if(!l.apply(this,arguments))return;var P=T(this,Y).event(D),j=this.__zoom,G=Math.max(s[0],Math.min(s[1],j.k*Math.pow(2,n.apply(this,arguments)))),X=Fn(D);if(P.wheel)(P.mouse[0][0]!==X[0]||P.mouse[0][1]!==X[1])&&(P.mouse[1]=j.invert(P.mouse[0]=X)),clearTimeout(P.wheel);else{if(j.k===G)return;P.mouse=[X,j.invert(X)],Ao(this),P.start()}Pl(D),P.wheel=setTimeout(Z,p),P.zoom("mouse",t(k(v(j,G),P.mouse[0],P.mouse[1]),P.extent,i));function Z(){P.wheel=null,P.end()}}function O(D,...Y){if(h||!l.apply(this,arguments))return;var P=D.currentTarget,j=T(this,Y,!0).event(D),G=On(D.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",re,!0),X=Fn(D,P),Z=D.clientX,J=D.clientY;Qi(D.view),Ro(D),j.mouse=[X,this.__zoom.invert(X)],Ao(this),j.start();function L(q){if(Pl(q),!j.moved){var ae=q.clientX-Z,ge=q.clientY-J;j.moved=ae*ae+ge*ge>b}j.event(q).zoom("mouse",t(k(j.that.__zoom,j.mouse[0]=Fn(q,P),j.mouse[1]),j.extent,i))}function re(q){G.on("mousemove.zoom mouseup.zoom",null),xi(q.view,j.moved),Pl(q),j.event(q).end()}}function H(D,...Y){if(l.apply(this,arguments)){var P=this.__zoom,j=Fn(D.changedTouches?D.changedTouches[0]:D,this),G=P.invert(j),X=P.k*(D.shiftKey?.5:2),Z=t(k(v(P,X),j,G),e.apply(this,Y),i);Pl(D),r>0?On(this).transition().duration(r).call(I,Z,j,D):On(this).call(g.transform,Z,j,D)}}function F(D,...Y){if(l.apply(this,arguments)){var P=D.touches,j=P.length,G=T(this,Y,D.changedTouches.length===j).event(D),X,Z,J,L;for(Ro(D),Z=0;Z<j;++Z)J=P[Z],L=Fn(J,this),L=[L,this.__zoom.invert(L),J.identifier],G.touch0?!G.touch1&&G.touch0[2]!==L[2]&&(G.touch1=L,G.taps=0):(G.touch0=L,X=!0,G.taps=1+!!u);u&&(u=clearTimeout(u)),X&&(G.taps<2&&(f=L[0],u=setTimeout(function(){u=null},d)),Ao(this),G.start())}}function K(D,...Y){if(this.__zooming){var P=T(this,Y).event(D),j=D.changedTouches,G=j.length,X,Z,J,L;for(Pl(D),X=0;X<G;++X)Z=j[X],J=Fn(Z,this),P.touch0&&P.touch0[2]===Z.identifier?P.touch0[0]=J:P.touch1&&P.touch1[2]===Z.identifier&&(P.touch1[0]=J);if(Z=P.that.__zoom,P.touch1){var re=P.touch0[0],q=P.touch0[1],ae=P.touch1[0],ge=P.touch1[1],se=(se=ae[0]-re[0])*se+(se=ae[1]-re[1])*se,Oe=(Oe=ge[0]-q[0])*Oe+(Oe=ge[1]-q[1])*Oe;Z=v(Z,Math.sqrt(se/Oe)),J=[(re[0]+ae[0])/2,(re[1]+ae[1])/2],L=[(q[0]+ge[0])/2,(q[1]+ge[1])/2]}else if(P.touch0)J=P.touch0[0],L=P.touch0[1];else return;P.zoom("touch",t(k(Z,J,L),P.extent,i))}}function U(D,...Y){if(this.__zooming){var P=T(this,Y).event(D),j=D.changedTouches,G=j.length,X,Z;for(Ro(D),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),X=0;X<G;++X)Z=j[X],P.touch0&&P.touch0[2]===Z.identifier?delete P.touch0:P.touch1&&P.touch1[2]===Z.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(Z=Fn(Z,this),Math.hypot(f[0]-Z[0],f[1]-Z[1])<w)){var J=On(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return g.wheelDelta=function(D){return arguments.length?(n=typeof D=="function"?D:to(+D),g):n},g.filter=function(D){return arguments.length?(l=typeof D=="function"?D:to(!!D),g):l},g.touchable=function(D){return arguments.length?(o=typeof D=="function"?D:to(!!D),g):o},g.extent=function(D){return arguments.length?(e=typeof D=="function"?D:to([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),g):e},g.scaleExtent=function(D){return arguments.length?(s[0]=+D[0],s[1]=+D[1],g):[s[0],s[1]]},g.translateExtent=function(D){return arguments.length?(i[0][0]=+D[0][0],i[1][0]=+D[1][0],i[0][1]=+D[0][1],i[1][1]=+D[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(D){return arguments.length?(t=D,g):t},g.duration=function(D){return arguments.length?(r=+D,g):r},g.interpolate=function(D){return arguments.length?(a=D,g):a},g.on=function(){var D=c.on.apply(c,arguments);return D===c?g:D},g.clickDistance=function(D){return arguments.length?(b=(D=+D)*D,g):Math.sqrt(b)},g.tapDistance=function(D){return arguments.length?(w=+D,g):w},g}function Hu(l){let e,t,n,o,s,i,r;return a(),{feed:c,reset:a};function a(){e=!0,t="",n=0,o=-1,s=void 0,i=void 0,r=""}function c(f){t=t?t+f:f,e&&Bu(t)&&(t=t.slice($i.length)),e=!1;const h=t.length;let d=0,p=!1;for(;d<h;){p&&(t[d]===`
`&&++d,p=!1);let b=-1,w=o,g;for(let v=n;b<0&&v<h;++v)g=t[v],g===":"&&w<0?w=v-d:g==="\r"?(p=!0,b=v-d):g===`
`&&(b=v-d);if(b<0){n=h-d,o=w;break}else n=0,o=-1;u(t,d,w,b),d+=b+1}d===h?t="":d>0&&(t=t.slice(d))}function u(f,h,d,p){if(p===0){r.length>0&&(l({type:"event",id:s,event:i||void 0,data:r.slice(0,-1)}),r="",s=void 0),i=void 0;return}const b=d<0,w=f.slice(h,h+(b?p:d));let g=0;b?g=p:f[h+d+1]===" "?g=d+2:g=d+1;const v=h+g,k=p-g,E=f.slice(v,v+k).toString();if(w==="data")r+=E?"".concat(E,`
`):`
`;else if(w==="event")i=E;else if(w==="id"&&!E.includes("\0"))s=E;else if(w==="retry"){const I=parseInt(E,10);Number.isNaN(I)||l({type:"reconnect-interval",value:I})}}}const $i=[239,187,191];function Bu(l){return $i.every((e,t)=>l.charCodeAt(t)===e)}class Au extends TransformStream{constructor(){let e;super({start(t){e=Hu(n=>{n.type==="event"&&t.enqueue(n)})},transform(t){e.feed(t)}})}}async function Lu(l,e){const t=l.pipeThrough(new TextDecoderStream).pipeThrough(new Au).getReader();let n=Ru(t);return e&&(n=Uu(n)),n}async function*Ru(l){var e,t,n;for(;;){const{value:o,done:s}=await l.read();if(s){yield{done:!0,value:""};break}if(!o)continue;const i=o.data;if(i.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const r=JSON.parse(i);if(console.log(r),r.error){yield{done:!0,value:"",error:r.error};break}if(r.sources){yield{done:!1,value:"",sources:r.sources};continue}if(r.selected_model_id){yield{done:!1,value:"",selectedModelId:r.selected_model_id};continue}if(r.usage){yield{done:!1,value:"",usage:r.usage};continue}yield{done:!1,value:((n=(t=(e=r.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:n.content)??""}}catch(r){console.error("Error extracting delta from SSE event:",r)}}}async function*Uu(l){for await(const e of l){if(e.done){yield e;return}if(e.error){yield e;continue}if(e.sources){yield e;continue}if(e.selectedModelId){yield e;continue}if(e.usage){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const n=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,n)},(document==null?void 0:document.visibilityState)!=="hidden"&&await Wu(5),t=t.slice(n)}}}const Wu=l=>new Promise(e=>setTimeout(e,l));function ks(l){let e,t=l[2]&&ys(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,o){n[2]?t?(t.p(n,o),o&4&&C(t,1)):(t=ys(n),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(He(),N(t,1,1,()=>{t=null}),Be())},d(n){n&&_(e),t&&t.d(n)}}}function ys(l){let e,t,n,o,s=l[1].type+"",i,r,a,c,u,f,h=Sl.parse(bs.sanitize(l[1].content))+"",d,p,b,w,g,v=l[1].url&&Es(),k=l[1].url&&Is(),E=l[1].dismissible&&Ss(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div"),i=Ie(s),a=$(),v&&v.c(),c=$(),u=V("div"),f=new Ai(!1),d=$(),k&&k.c(),p=$(),b=V("div"),E&&E.c(),this.h()},l(I){e=z(I,"DIV",{class:!0});var T=M(e);t=z(T,"DIV",{class:!0});var S=M(t);n=z(S,"DIV",{class:!0});var A=M(n);o=z(A,"DIV",{class:!0});var O=M(o);i=Se(O,s),O.forEach(_),a=ee(A),v&&v.l(A),A.forEach(_),c=ee(S),u=z(S,"DIV",{class:!0});var H=M(u);f=Li(H,!1),H.forEach(_),S.forEach(_),d=ee(T),k&&k.l(T),p=ee(T),b=z(T,"DIV",{class:!0});var F=M(b);E&&E.l(F),F.forEach(_),T.forEach(_),this.h()},h(){m(o,"class",r="text-xs font-bold "+(l[3][l[1].type]??l[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),m(n,"class","flex justify-between self-start"),f.a=null,m(u,"class","flex-1 text-xs text-gray-700 dark:text-white"),m(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),m(b,"class","flex self-start"),m(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(I,T){B(I,e,T),y(e,t),y(t,n),y(n,o),y(o,i),y(n,a),v&&v.m(n,null),y(t,c),y(t,u),f.m(h,u),y(e,d),k&&k.m(e,null),y(e,p),y(e,b),E&&E.m(b,null),g=!0},p(I,T){(!g||T&2)&&s!==(s=I[1].type+"")&&Te(i,s),(!g||T&2&&r!==(r="text-xs font-bold "+(I[3][I[1].type]??I[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&m(o,"class",r),I[1].url?v||(v=Es(),v.c(),v.m(n,null)):v&&(v.d(1),v=null),(!g||T&2)&&h!==(h=Sl.parse(bs.sanitize(I[1].content))+"")&&f.p(h),I[1].url?k||(k=Is(),k.c(),k.m(e,p)):k&&(k.d(1),k=null),I[1].dismissible?E?E.p(I,T):(E=Ss(I),E.c(),E.m(b,null)):E&&(E.d(1),E=null)},i(I){g||(I&&tl(()=>{g&&(w||(w=ds(e,vl,{delay:100,duration:300},!0)),w.run(1))}),g=!0)},o(I){I&&(w||(w=ds(e,vl,{delay:100,duration:300},!1)),w.run(0)),g=!1},d(I){I&&_(e),v&&v.d(),k&&k.d(),E&&E.d(),I&&w&&w.end()}}}function Es(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-o2pz5m"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex md:hidden group w-fit md:items-center")},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function Is(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-1wr7se3"&&(e.innerHTML=t),this.h()},h(){m(e,"class","hidden md:flex group w-fit md:items-center")},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function Ss(l){let e,t="×",n,o;return{c(){e=V("button"),e.textContent=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-o8kh4p"&&(e.textContent=t),this.h()},h(){m(e,"class","-mt-1 -mb-2 -translate-y-[1px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[5]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function Fu(l){let e,t=!l[0]&&ks(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[0]?t&&(t.d(1),t=null):t?t.p(n,o):(t=ks(n),t.c(),t.m(e.parentNode,e))},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}function ju(l,e,t){const n=ln();let{banner:o={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:s=!1}=e,i=!1;const r={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=u=>{t(0,s=!0),n("dismiss",u)};pn(()=>{t(2,i=!0)});const c=()=>{a(o.id)};return l.$$set=u=>{"banner"in u&&t(1,o=u.banner),"dismissed"in u&&t(0,s=u.dismissed)},[s,o,i,r,a,c]}class Yu extends Le{constructor(e){super(),Re(this,e,ju,Fu,Fe,{banner:1,dismissed:0})}}let Ll="",Rl="";async function Xu(){var t,n;const l=await fetch("/api/config");if(!l.ok)throw new Error("Failed to fetch Google Drive credentials");const e=await l.json();if(Ll=(t=e.google_drive)==null?void 0:t.api_key,Rl=(n=e.google_drive)==null?void 0:n.client_id,!Ll||!Rl)throw new Error("Google Drive API credentials not configured")}const Ku=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"],Zu=()=>{if(!Ll||!Rl)throw new Error("Google Drive API credentials not configured");if(Ll===""||Rl==="")throw new Error("Please configure valid Google Drive API credentials")};let no=null,Cs=!1;const Gu=()=>new Promise((l,e)=>{if(typeof gapi>"u"){const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=()=>{gapi.load("picker",()=>{l(!0)})},t.onerror=e,document.body.appendChild(t)}else gapi.load("picker",()=>{l(!0)})}),qu=()=>new Promise((l,e)=>{if(typeof google>"u"){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=l,t.onerror=e,document.body.appendChild(t)}else l(!0)}),Ju=async()=>no||new Promise((l,e)=>{google.accounts.oauth2.initTokenClient({client_id:Rl,scope:Ku.join(" "),callback:n=>{n.access_token?(no=n.access_token,l(no)):e(new Error("Failed to get access token"))},error_callback:n=>{e(new Error(n.message||"OAuth error occurred"))}}).requestAccessToken()}),Qu=async()=>{Cs||(await Xu(),Zu(),await Promise.all([Gu(),qu()]),Cs=!0)},xu=()=>new Promise(async(l,e)=>{try{console.log("Initializing Google Drive Picker..."),await Qu(),console.log("Getting auth token...");const t=await Ju();if(!t)throw console.error("Failed to get OAuth token"),new Error("Unable to get OAuth token");console.log("Auth token obtained successfully"),new google.picker.PickerBuilder().enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(new google.picker.DocsView().setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes("application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.google-apps.document,application/vnd.google-apps.spreadsheet,application/vnd.google-apps.presentation")).setOAuthToken(t).setDeveloperKey(Ll).setCallback(async o=>{if(o[google.picker.Response.ACTION]===google.picker.Action.PICKED)try{const s=o[google.picker.Response.DOCUMENTS][0],i=s[google.picker.Document.ID],r=s[google.picker.Document.NAME],a=s[google.picker.Document.URL];if(!i||!r)throw new Error("Required file details missing");const c=s[google.picker.Document.MIME_TYPE];let u,f;c.includes("google-apps")?(c.includes("document")?f="text/plain":c.includes("spreadsheet")?f="text/csv":c.includes("presentation")?f="text/plain":f="application/pdf",u=`https://www.googleapis.com/drive/v3/files/${i}/export?mimeType=${encodeURIComponent(f)}`):u=`https://www.googleapis.com/drive/v3/files/${i}?alt=media`;const h=await fetch(u,{headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}});if(!h.ok){const b=await h.text();throw console.error("Download failed:",{status:h.status,statusText:h.statusText,error:b}),new Error(`Failed to download file (${h.status}): ${b}`)}const d=await h.blob(),p={id:i,name:r,url:u,blob:d,headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}};l(p)}catch(s){e(s)}else o[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&l(null)}).build().setVisible(!0)}catch(t){console.error("Google Drive Picker error:",t),e(t)}});function Ds(l,e,t){const n=l.slice();return n[26]=e[t],n}function $u(l){let e;const t=l[15].default,n=Gt(t,l,l[23],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8388608)&&qt(n,t,o,o[23],e?Qt(t,o[23],s,null):Jt(o[23]),null)},i(o){e||(C(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function ef(l){let e,t;return e=new Ot({props:{content:l[8].t("More"),$$slots:{default:[$u]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&256&&(s.content=n[8].t("More")),o&8388608&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Ms(l){let e,t,n,o,s=vt(Object.keys(l[6])),i=[];for(let a=0;a<s.length;a+=1)i[a]=Ts(Ds(l,s,a));const r=a=>N(i[a],1,1,()=>{i[a]=null});return{c(){e=V("div");for(let a=0;a<i.length;a+=1)i[a].c();t=$(),n=V("hr"),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=M(e);for(let u=0;u<i.length;u+=1)i[u].l(c);c.forEach(_),t=ee(a),n=z(a,"HR",{class:!0}),this.h()},h(){m(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),m(n,"class","border-black/5 dark:border-white/5 my-1")},m(a,c){B(a,e,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);B(a,t,c),B(a,n,c),o=!0},p(a,c){if(c&65){s=vt(Object.keys(a[6]));let u;for(u=0;u<s.length;u+=1){const f=Ds(a,s,u);i[u]?(i[u].p(f,c),C(i[u],1)):(i[u]=Ts(f),i[u].c(),C(i[u],1),i[u].m(e,null))}for(He(),u=s.length;u<i.length;u+=1)r(u);Be()}},i(a){if(!o){for(let c=0;c<s.length;c+=1)C(i[c]);o=!0}},o(a){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)N(i[c]);o=!1},d(a){a&&(_(e),_(t),_(n)),Dn(i,a)}}}function tf(l){let e,t,n,o,s=l[6][l[26]].name+"",i,r;return t=new Uc({}),{c(){e=V("div"),te(t.$$.fragment),n=$(),o=V("div"),i=Ie(s),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=M(e);oe(t.$$.fragment,c),c.forEach(_),n=ee(a),o=z(a,"DIV",{class:!0});var u=M(o);i=Se(u,s),u.forEach(_),this.h()},h(){m(e,"class","flex-shrink-0"),m(o,"class","truncate")},m(a,c){B(a,e,c),ne(t,e,null),B(a,n,c),B(a,o,c),y(o,i),r=!0},p(a,c){(!r||c&64)&&s!==(s=a[6][a[26]].name+"")&&Te(i,s)},i(a){r||(C(t.$$.fragment,a),r=!0)},o(a){N(t.$$.fragment,a),r=!1},d(a){a&&(_(e),_(n),_(o)),le(t)}}}function Ts(l){var d;let e,t,n,o,s,i,r,a,c,u;n=new Ot({props:{content:((d=l[6][l[26]])==null?void 0:d.description)??"",placement:"top-start",className:"flex flex-1 gap-2 items-center",$$slots:{default:[tf]},$$scope:{ctx:l}}});function f(...p){return l[16](l[26],...p)}i=new Rc({props:{state:l[6][l[26]].enabled}}),i.$on("change",f);function h(){return l[17](l[26])}return{c(){e=V("button"),t=V("div"),te(n.$$.fragment),o=$(),s=V("div"),te(i.$$.fragment),r=$(),this.h()},l(p){e=z(p,"BUTTON",{class:!0});var b=M(e);t=z(b,"DIV",{class:!0});var w=M(t);oe(n.$$.fragment,w),w.forEach(_),o=ee(b),s=z(b,"DIV",{class:!0});var g=M(s);oe(i.$$.fragment,g),g.forEach(_),r=ee(b),b.forEach(_),this.h()},h(){m(t,"class","flex-1 truncate"),m(s,"class","flex-shrink-0"),m(e,"class","flex w-full justify-between gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(p,b){B(p,e,b),y(e,t),ne(n,t,null),y(e,o),y(e,s),ne(i,s,null),y(e,r),a=!0,c||(u=ke(e,"click",h),c=!0)},p(p,b){var v;l=p;const w={};b&64&&(w.content=((v=l[6][l[26]])==null?void 0:v.description)??""),b&8388672&&(w.$$scope={dirty:b,ctx:l}),n.$set(w);const g={};b&64&&(g.state=l[6][l[26]].enabled),i.$set(g)},i(p){a||(C(n.$$.fragment,p),C(i.$$.fragment,p),a=!0)},o(p){N(n.$$.fragment,p),N(i.$$.fragment,p),a=!1},d(p){p&&_(e),le(n),le(i),c=!1,u()}}}function nf(l){let e,t,n,o=l[8].t("Capture")+"",s,i;return e=new ja({}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","line-clamp-1")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&256)&&o!==(o=r[8].t("Capture")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function lf(l){let e,t;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl "+(l[7]?"":"opacity-50"),$$slots:{default:[nf]},$$scope:{ctx:l}}}),e.$on("click",l[18]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.class="flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl "+(n[7]?"":"opacity-50")),o&8388864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function of(l){let e,t,n,o=l[8].t("Upload Files")+"",s,i;return e=new Ya({}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","line-clamp-1")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&256)&&o!==(o=r[8].t("Upload Files")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function sf(l){let e,t;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl "+(l[7]?"":"opacity-50"),$$slots:{default:[of]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.class="flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl "+(n[7]?"":"opacity-50")),o&8388864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Vs(l){let e,t;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[rf]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&8388864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function rf(l){let e,t,n,o,s,i,r,a,c,u=l[8].t("Google Drive")+"",f;return{c(){e=Ve("svg"),t=Ve("path"),n=Ve("path"),o=Ve("path"),s=Ve("path"),i=Ve("path"),r=Ve("path"),a=$(),c=V("div"),f=Ie(u),this.h()},l(h){e=ze(h,"svg",{xmlns:!0,viewBox:!0,class:!0});var d=M(e);t=ze(d,"path",{d:!0,fill:!0}),M(t).forEach(_),n=ze(d,"path",{d:!0,fill:!0}),M(n).forEach(_),o=ze(d,"path",{d:!0,fill:!0}),M(o).forEach(_),s=ze(d,"path",{d:!0,fill:!0}),M(s).forEach(_),i=ze(d,"path",{d:!0,fill:!0}),M(i).forEach(_),r=ze(d,"path",{d:!0,fill:!0}),M(r).forEach(_),d.forEach(_),a=ee(h),c=z(h,"DIV",{class:!0});var p=M(c);f=Se(p,u),p.forEach(_),this.h()},h(){m(t,"d","m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z"),m(t,"fill","#0066da"),m(n,"d","m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z"),m(n,"fill","#00ac47"),m(o,"d","m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z"),m(o,"fill","#ea4335"),m(s,"d","m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z"),m(s,"fill","#00832d"),m(i,"d","m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"),m(i,"fill","#2684fc"),m(r,"d","m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z"),m(r,"fill","#ffba00"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 87.3 78"),m(e,"class","w-5 h-5"),m(c,"class","line-clamp-1")},m(h,d){B(h,e,d),y(e,t),y(e,n),y(e,o),y(e,s),y(e,i),y(e,r),B(h,a,d),B(h,c,d),y(c,f)},p(h,d){d&256&&u!==(u=h[8].t("Google Drive")+"")&&Te(f,u)},d(h){h&&(_(e),_(a),_(c))}}}function af(l){var f,h;let e=Object.keys(l[6]).length>0,t,n,o,s,i,r,a,c=e&&Ms(l);n=new Ot({props:{content:l[7]?"":l[8].t("You do not have permission to upload files"),className:"w-full",$$slots:{default:[lf]},$$scope:{ctx:l}}}),s=new Ot({props:{content:l[7]?"":l[8].t("You do not have permission to upload files"),className:"w-full",$$slots:{default:[sf]},$$scope:{ctx:l}}});let u=((h=(f=l[9])==null?void 0:f.features)==null?void 0:h.enable_google_drive_integration)&&Vs(l);return{c(){c&&c.c(),t=$(),te(n.$$.fragment),o=$(),te(s.$$.fragment),i=$(),u&&u.c(),r=Ae()},l(d){c&&c.l(d),t=ee(d),oe(n.$$.fragment,d),o=ee(d),oe(s.$$.fragment,d),i=ee(d),u&&u.l(d),r=Ae()},m(d,p){c&&c.m(d,p),B(d,t,p),ne(n,d,p),B(d,o,p),ne(s,d,p),B(d,i,p),u&&u.m(d,p),B(d,r,p),a=!0},p(d,p){var g,v;p&64&&(e=Object.keys(d[6]).length>0),e?c?(c.p(d,p),p&64&&C(c,1)):(c=Ms(d),c.c(),C(c,1),c.m(t.parentNode,t)):c&&(He(),N(c,1,1,()=>{c=null}),Be());const b={};p&384&&(b.content=d[7]?"":d[8].t("You do not have permission to upload files")),p&8388994&&(b.$$scope={dirty:p,ctx:d}),n.$set(b);const w={};p&384&&(w.content=d[7]?"":d[8].t("You do not have permission to upload files")),p&8388996&&(w.$$scope={dirty:p,ctx:d}),s.$set(w),(v=(g=d[9])==null?void 0:g.features)!=null&&v.enable_google_drive_integration?u?(u.p(d,p),p&512&&C(u,1)):(u=Vs(d),u.c(),C(u,1),u.m(r.parentNode,r)):u&&(He(),N(u,1,1,()=>{u=null}),Be())},i(d){a||(C(c),C(n.$$.fragment,d),C(s.$$.fragment,d),C(u),a=!0)},o(d){N(c),N(n.$$.fragment,d),N(s.$$.fragment,d),N(u),a=!1},d(d){d&&(_(t),_(o),_(i),_(r)),c&&c.d(d),le(n,d),le(s,d),u&&u.d(d)}}}function cf(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[220px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Xl,$$slots:{default:[af]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&8389583&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function uf(l){let e,t,n,o,s,i,r;function a(u){l[21](u)}let c={$$slots:{content:[cf],default:[ef]},$$scope:{ctx:l}};return l[5]!==void 0&&(c.show=l[5]),n=new yo({props:c}),We.push(()=>Je(n,"show",a)),n.$on("change",l[22]),{c(){e=V("input"),t=$(),te(n.$$.fragment),this.h()},l(u){e=z(u,"INPUT",{id:!0,type:!0,accept:!0,capture:!0,style:!0}),t=ee(u),oe(n.$$.fragment,u),this.h()},h(){m(e,"id","camera-input"),m(e,"type","file"),m(e,"accept","image/*"),m(e,"capture","environment"),$e(e,"display","none")},m(u,f){B(u,e,f),B(u,t,f),ne(n,u,f),s=!0,i||(r=ke(e,"change",l[12]),i=!0)},p(u,[f]){const h={};f&8389583&&(h.$$scope={dirty:f,ctx:u}),!o&&f&32&&(o=!0,h.show=u[5],qe(()=>o=!1)),n.$set(h)},i(u){s||(C(n.$$.fragment,u),s=!0)},o(u){N(n.$$.fragment,u),s=!1},d(u){u&&(_(e),_(t)),le(n,u),i=!1,r()}}}function ff(l,e,t){let n,o,s,i;ce(l,ul,U=>t(24,n=U)),ce(l,xn,U=>t(14,o=U)),ce(l,Yl,U=>t(9,i=U));let{$$slots:r={},$$scope:a}=e;const c=Wt("i18n");ce(l,c,U=>t(8,s=U));let{screenCaptureHandler:u}=e,{uploadFilesHandler:f}=e,{inputFilesHandler:h}=e,{uploadGoogleDriveHandler:d}=e,{selectedToolIds:p=[]}=e,{onClose:b}=e,w={},g=!1,v=!0;const k=async()=>{n===null&&await ul.set(await $o(localStorage.token)),t(6,w=n.reduce((U,D,Y,P)=>(U[D.id]={name:D.name,description:D.meta.description,enabled:p.includes(D.id)},U),{}))},E=()=>{const U=navigator.userAgent||navigator.vendor||window.opera;return/android|iphone|ipad|ipod|windows phone/i.test(U)};function I(U){var Y;const D=Array.from((Y=U.target)==null?void 0:Y.files);D&&D.length>0&&(console.log(D),h(D))}const T=async(U,D)=>{const Y=D.detail;await xe(),Y?t(0,p=[...p,U]):t(0,p=p.filter(P=>P!==U))},S=U=>{t(6,w[U].enabled=!w[U].enabled,w)},A=()=>{if(v)if(!E())u();else{const U=document.getElementById("camera-input");U&&U.click()}},O=()=>{v&&f()},H=()=>{d()};function F(U){g=U,t(5,g)}const K=U=>{U.detail===!1&&b()};return l.$$set=U=>{"screenCaptureHandler"in U&&t(1,u=U.screenCaptureHandler),"uploadFilesHandler"in U&&t(2,f=U.uploadFilesHandler),"inputFilesHandler"in U&&t(13,h=U.inputFilesHandler),"uploadGoogleDriveHandler"in U&&t(3,d=U.uploadGoogleDriveHandler),"selectedToolIds"in U&&t(0,p=U.selectedToolIds),"onClose"in U&&t(4,b=U.onClose),"$$scope"in U&&t(23,a=U.$$scope)},l.$$.update=()=>{var U,D;l.$$.dirty&32&&g&&k(),l.$$.dirty&16384&&t(7,v=o.role==="admin"||((D=(U=o==null?void 0:o.permissions)==null?void 0:U.chat)==null?void 0:D.file_upload))},[p,u,f,d,b,g,w,v,s,i,c,E,I,h,o,r,T,S,A,O,H,F,K,a]}class df extends Le{constructor(e){super(),Re(this,e,ff,uf,Fe,{screenCaptureHandler:1,uploadFilesHandler:2,inputFilesHandler:13,uploadGoogleDriveHandler:3,selectedToolIds:0,onClose:4})}}function zs(l,e,t){const n=l.slice();return n[0]=e[t],n[15]=t,n}function Ns(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',c,u,f=l[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",h,d=vt(l[2]),p=[];for(let b=0;b<d.length;b+=1)p[b]=Ps(zs(l,d,b));return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div");for(let b=0;b<p.length;b+=1)p[b].c();s=$(),i=V("div"),r=V("div"),r.innerHTML=a,c=$(),u=V("div"),h=Ie(f),this.h()},l(b){e=z(b,"DIV",{id:!0,class:!0});var w=M(e);t=z(w,"DIV",{class:!0});var g=M(t);n=z(g,"DIV",{class:!0});var v=M(n);o=z(v,"DIV",{class:!0});var k=M(o);for(let T=0;T<p.length;T+=1)p[T].l(k);k.forEach(_),s=ee(v),i=z(v,"DIV",{class:!0});var E=M(i);r=z(E,"DIV",{"data-svelte-h":!0}),ut(r)!=="svelte-cdi12d"&&(r.innerHTML=a),c=ee(E),u=z(E,"DIV",{class:!0});var I=M(u);h=Se(I,f),I.forEach(_),E.forEach(_),v.forEach(_),g.forEach(_),w.forEach(_),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 space-y-0.5 scrollbar-hidden"),m(u,"class","line-clamp-1"),m(i,"class","px-2 pt-0.5 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-b-xl flex items-center space-x-1"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(b,w){B(b,e,w),y(e,t),y(t,n),y(n,o);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(o,null);y(n,s),y(n,i),y(i,r),y(i,c),y(i,u),y(u,h)},p(b,w){if(w&38){d=vt(b[2]);let g;for(g=0;g<d.length;g+=1){const v=zs(b,d,g);p[g]?p[g].p(v,w):(p[g]=Ps(v),p[g].c(),p[g].m(o,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=d.length}w&8&&f!==(f=b[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&Te(h,f)},d(b){b&&_(e),Dn(p,b)}}}function Ps(l){let e,t,n=l[0].command+"",o,s,i,r=l[0].title+"",a,c,u,f,h;function d(){return l[11](l[0])}function p(){return l[12](l[15])}return{c(){e=V("button"),t=V("div"),o=Ie(n),s=$(),i=V("div"),a=Ie(r),c=$(),this.h()},l(b){e=z(b,"BUTTON",{class:!0,type:!0});var w=M(e);t=z(w,"DIV",{class:!0});var g=M(t);o=Se(g,n),g.forEach(_),s=ee(w),i=z(w,"DIV",{class:!0});var v=M(i);a=Se(v,r),v.forEach(_),c=ee(w),w.forEach(_),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100"),m(i,"class","text-xs text-gray-600 dark:text-gray-100"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[15]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,w){B(b,e,w),y(e,t),y(t,o),y(e,s),y(e,i),y(i,a),y(e,c),f||(h=[ke(e,"click",d),ke(e,"mousemove",p),ke(e,"focus",mf)],f=!0)},p(b,w){l=b,w&4&&n!==(n=l[0].command+"")&&Te(o,n),w&4&&r!==(r=l[0].title+"")&&Te(a,r),w&2&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[15]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&_(e),f=!1,en(h)}}}function hf(l){let e,t=l[2].length>0&&Ns(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[2].length>0?t?t.p(n,o):(t=Ns(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}const mf=()=>{};function gf(l,e,t){let n,o,s;ce(l,xn,g=>t(13,n=g)),ce(l,Fi,g=>t(10,s=g));const i=Wt("i18n");ce(l,i,g=>t(3,o=g));let{files:r}=e,{prompt:a=""}=e,{command:c=""}=e,u=0,f=[];const h=()=>{t(1,u=Math.max(0,u-1))},d=()=>{t(1,u=Math.min(u+1,f.length-1))},p=async g=>{let v=g.content;if(g.content.includes("{{CLIPBOARD}}")){const I=await navigator.clipboard.readText().catch(A=>(et.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}")),T=await navigator.clipboard.read();let S=null;for(const A of T)for(const O of A.types)if(O.startsWith("image/")){const H=await A.getType(O);S=URL.createObjectURL(H)}S&&t(6,r=[...r,{type:"image",url:S}]),v=v.replaceAll("{{CLIPBOARD}}",I)}if(g.content.includes("{{USER_LOCATION}}")){const I=await tc();v=v.replaceAll("{{USER_LOCATION}}",String(I))}if(g.content.includes("{{USER_NAME}}")){console.log(n);const I=n.name||"User";v=v.replaceAll("{{USER_NAME}}",I)}if(g.content.includes("{{USER_LANGUAGE}}")){const I=localStorage.getItem("locale")||"en-US";v=v.replaceAll("{{USER_LANGUAGE}}",I)}if(g.content.includes("{{CURRENT_DATE}}")){const I=nc();v=v.replaceAll("{{CURRENT_DATE}}",I)}if(g.content.includes("{{CURRENT_TIME}}")){const I=lc();v=v.replaceAll("{{CURRENT_TIME}}",I)}if(g.content.includes("{{CURRENT_DATETIME}}")){const I=oc();v=v.replaceAll("{{CURRENT_DATETIME}}",I)}if(g.content.includes("{{CURRENT_TIMEZONE}}")){const I=sc();v=v.replaceAll("{{CURRENT_TIMEZONE}}",I)}if(g.content.includes("{{CURRENT_WEEKDAY}}")){const I=rc();v=v.replaceAll("{{CURRENT_WEEKDAY}}",I)}t(0,a=v);const k=document.getElementById("chat-input-container"),E=document.getElementById("chat-input");await xe(),k&&(k.style.height="",k.style.height=Math.min(k.scrollHeight,200)+"px"),await xe(),E&&(E.focus(),E.dispatchEvent(new Event("input")))},b=g=>{p(g)},w=g=>{t(1,u=g)};return l.$$set=g=>{"files"in g&&t(6,r=g.files),"prompt"in g&&t(0,a=g.prompt),"command"in g&&t(7,c=g.command)},l.$$.update=()=>{l.$$.dirty&1152&&t(2,f=s.filter(g=>g.command.toLowerCase().includes(c.toLowerCase())).sort((g,v)=>g.title.localeCompare(v.title))),l.$$.dirty&128&&c&&t(1,u=0)},[a,u,f,o,i,p,r,c,h,d,s,b,w]}class _f extends Le{constructor(e){super(),Re(this,e,gf,hf,Fe,{files:6,prompt:0,command:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function Os(l,e,t){const n=l.slice();return n[19]=e[t],n[21]=t,n}function Hs(l){let e,t,n,o,s,i,r,a=vt(l[2]),c=[];for(let d=0;d<a.length;d+=1)c[d]=Bs(Os(l,a,d));function u(d,p){var b,w;if(p&1&&(i=null),p&1&&(r=null),i==null&&(i=!!d[0].split(" ").some(If)),i)return yf;if(r==null&&(r=!!((w=(b=d[0].split(" "))==null?void 0:b.at(0))!=null&&w.substring(1).startsWith("http"))),r)return kf}let f=u(l,-1),h=f&&f(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div");for(let d=0;d<c.length;d+=1)c[d].c();s=$(),h&&h.c(),this.h()},l(d){e=z(d,"DIV",{id:!0,class:!0});var p=M(e);t=z(p,"DIV",{class:!0});var b=M(t);n=z(b,"DIV",{class:!0});var w=M(n);o=z(w,"DIV",{class:!0});var g=M(o);for(let v=0;v<c.length;v+=1)c[v].l(g);s=ee(g),h&&h.l(g),g.forEach(_),w.forEach(_),b.forEach(_),p.forEach(_),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(d,p){B(d,e,p),y(e,t),y(t,n),y(n,o);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(o,null);y(o,s),h&&h.m(o,null)},p(d,p){if(p&38){a=vt(d[2]);let b;for(b=0;b<a.length;b+=1){const w=Os(d,a,b);c[b]?c[b].p(w,p):(c[b]=Bs(w),c[b].c(),c[b].m(o,s))}for(;b<c.length;b+=1)c[b].d(1);c.length=a.length}f===(f=u(d,p))&&h?h.p(d,p):(h&&h.d(1),h=f&&f(d),h&&(h.c(),h.m(o,null)))},d(d){d&&_(e),Dn(c,d),h&&h.d()}}}function pf(l){let e,t="Collection";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-2leuop"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function bf(l){let e,t="File";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-1hk0ird"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function vf(l){let e,t="Document";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-o57xc2"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function wf(l){let e,t="Legacy";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-1dukunw"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function Bs(l){var E,I;let e,t,n,o,s,i=((E=l[19])==null?void 0:E.name)+"",r,a,c,u=((I=l[19])==null?void 0:I.description)+"",f,h,d,p;function b(T,S){var A,O,H;return T[19].legacy?wf:(O=(A=T[19])==null?void 0:A.meta)!=null&&O.document?vf:((H=T[19])==null?void 0:H.type)==="file"?bf:pf}let w=b(l),g=w(l);function v(){return l[13](l[19])}function k(){return l[14](l[21])}return{c(){e=V("button"),t=V("div"),n=V("div"),g.c(),o=$(),s=V("div"),r=Ie(i),a=$(),c=V("div"),f=Ie(u),this.h()},l(T){e=z(T,"BUTTON",{class:!0,type:!0});var S=M(e);t=z(S,"DIV",{});var A=M(t);n=z(A,"DIV",{class:!0});var O=M(n);g.l(O),o=ee(O),s=z(O,"DIV",{class:!0});var H=M(s);r=Se(H,i),H.forEach(_),O.forEach(_),a=ee(A),c=z(A,"DIV",{class:!0});var F=M(c);f=Se(F,u),F.forEach(_),A.forEach(_),S.forEach(_),this.h()},h(){m(s,"class","line-clamp-1"),m(n,"class","font-medium text-black dark:text-gray-100 flex items-center gap-1"),m(c,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1"),m(e,"class",h="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),m(e,"type","button")},m(T,S){B(T,e,S),y(e,t),y(t,n),g.m(n,null),y(n,o),y(n,s),y(s,r),y(t,a),y(t,c),y(c,f),d||(p=[ke(e,"click",v),ke(e,"mousemove",k)],d=!0)},p(T,S){var A,O;l=T,w!==(w=b(l))&&(g.d(1),g=w(l),g&&(g.c(),g.m(n,o))),S&4&&i!==(i=((A=l[19])==null?void 0:A.name)+"")&&Te(r,i),S&4&&u!==(u=((O=l[19])==null?void 0:O.description)+"")&&Te(f,u),S&2&&h!==(h="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&m(e,"class",h)},d(T){T&&_(e),g.d(),d=!1,en(p)}}}function kf(l){var f,h;let e,t,n=((h=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:h.substring(1))+"",o,s,i,r=l[3].t("Web")+"",a,c,u;return{c(){e=V("button"),t=V("div"),o=Ie(n),s=$(),i=V("div"),a=Ie(r),this.h()},l(d){e=z(d,"BUTTON",{class:!0,type:!0});var p=M(e);t=z(p,"DIV",{class:!0});var b=M(t);o=Se(b,n),b.forEach(_),s=ee(p),i=z(p,"DIV",{class:!0});var w=M(i);a=Se(w,r),w.forEach(_),p.forEach(_),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(i,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(d,p){B(d,e,p),y(e,t),y(t,o),y(e,s),y(e,i),y(i,a),c||(u=ke(e,"click",l[16]),c=!0)},p(d,p){var b,w;p&1&&n!==(n=((w=(b=d[0].split(" "))==null?void 0:b.at(0))==null?void 0:w.substring(1))+"")&&Te(o,n),p&8&&r!==(r=d[3].t("Web")+"")&&Te(a,r)},d(d){d&&_(e),c=!1,u()}}}function yf(l){var f,h;let e,t,n=((h=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:h.substring(1))+"",o,s,i,r=l[3].t("Youtube")+"",a,c,u;return{c(){e=V("button"),t=V("div"),o=Ie(n),s=$(),i=V("div"),a=Ie(r),this.h()},l(d){e=z(d,"BUTTON",{class:!0,type:!0});var p=M(e);t=z(p,"DIV",{class:!0});var b=M(t);o=Se(b,n),b.forEach(_),s=ee(p),i=z(p,"DIV",{class:!0});var w=M(i);a=Se(w,r),w.forEach(_),p.forEach(_),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(i,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(d,p){B(d,e,p),y(e,t),y(t,o),y(e,s),y(e,i),y(i,a),c||(u=ke(e,"click",l[15]),c=!0)},p(d,p){var b,w;p&1&&n!==(n=((w=(b=d[0].split(" "))==null?void 0:b.at(0))==null?void 0:w.substring(1))+"")&&Te(o,n),p&8&&r!==(r=d[3].t("Youtube")+"")&&Te(a,r)},d(d){d&&_(e),c=!1,u()}}}function Ef(l){var o,s;let e=l[2].length>0||((s=(o=l[0].split(" "))==null?void 0:o.at(0))==null?void 0:s.substring(1).startsWith("http")),t,n=e&&Hs(l);return{c(){n&&n.c(),t=Ae()},l(i){n&&n.l(i),t=Ae()},m(i,r){n&&n.m(i,r),B(i,t,r)},p(i,[r]){var a,c;r&5&&(e=i[2].length>0||((c=(a=i[0].split(" "))==null?void 0:a.at(0))==null?void 0:c.substring(1).startsWith("http"))),e?n?n.p(i,r):(n=Hs(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ye,o:ye,d(i){i&&_(t),n&&n.d(i)}}}const If=l=>l.substring(1).startsWith("https://www.youtube.com")||l.substring(1).startsWith("https://youtu.be");function Sf(l,e,t){let n,o;ce(l,ji,T=>t(17,n=T)),Xc.extend(Kc);const s=Wt("i18n");ce(l,s,T=>t(3,o=T));let{prompt:i=""}=e,{command:r=""}=e;const a=ln();let c=0,u=[],f=null,h=[];const d=()=>{t(1,c=Math.max(0,c-1))},p=()=>{t(1,c=Math.min(c+1,h.length-1))},b=async T=>{a("select",T),t(0,i=so(i,r));const S=document.getElementById("chat-input");await xe(),S==null||S.focus(),await xe()},w=async T=>{a("url",T),t(0,i=so(i,r));const S=document.getElementById("chat-input");await xe(),S==null||S.focus(),await xe()},g=async T=>{a("youtube",T),t(0,i=so(i,r));const S=document.getElementById("chat-input");await xe(),S==null||S.focus(),await xe()};pn(()=>{let T=n.filter(H=>{var F;return(F=H==null?void 0:H.meta)==null?void 0:F.document}).map(H=>({...H,type:"file"})),S=T.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:o.t("All Documents"),collection_names:T.map(H=>H.id)},...T.reduce((H,F)=>{var K;return[...new Set([...H,...(((K=F==null?void 0:F.meta)==null?void 0:K.tags)??[]).map(U=>U.name)])]},[]).map(H=>({name:H,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:T.filter(F=>{var K;return(((K=F==null?void 0:F.meta)==null?void 0:K.tags)??[]).map(U=>U.name).includes(H)}).map(F=>F.id)}))]:[],A=n.filter(H=>{var F;return!((F=H==null?void 0:H.meta)!=null&&F.document)}).map(H=>({...H,type:"collection"})),O=n.length>0?[...n.reduce((H,F)=>[...new Set([...H,...((F==null?void 0:F.files)??[]).map(K=>({...K,collection:{name:F.name,description:F.description}}))])],[]).map(H=>{var F,K,U;return{...H,name:(F=H==null?void 0:H.meta)==null?void 0:F.name,description:`${(K=H==null?void 0:H.collection)==null?void 0:K.name} - ${(U=H==null?void 0:H.collection)==null?void 0:U.description}`,type:"file"}})]:[];t(11,u=[...A,...O,...S,...T].map(H=>{var F,K;return{...H,...H!=null&&H.legacy||(F=H==null?void 0:H.meta)!=null&&F.legacy||(K=H==null?void 0:H.meta)!=null&&K.document?{legacy:!0}:{}}})),t(12,f=new Zi(u,{keys:["name","description"]}))});const v=T=>{console.log(T),b(T)},k=T=>{t(1,c=T)},E=()=>{var S,A;const T=(A=(S=i.split(" "))==null?void 0:S.at(0))==null?void 0:A.substring(1);gs(T)?g(T):et.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},I=()=>{var S,A;const T=(A=(S=i.split(" "))==null?void 0:S.at(0))==null?void 0:A.substring(1);gs(T)?w(T):et.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return l.$$set=T=>{"prompt"in T&&t(0,i=T.prompt),"command"in T&&t(8,r=T.command)},l.$$.update=()=>{l.$$.dirty&6400&&f&&t(2,h=r.slice(1)?f.search(r).map(T=>T.item):u),l.$$.dirty&256&&r&&t(1,c=0)},[i,c,h,o,s,b,w,g,r,d,p,u,f,v,k,E,I]}class Cf extends Le{constructor(e){super(),Re(this,e,Sf,Ef,Fe,{prompt:0,command:8,selectUp:9,selectDown:10})}get selectUp(){return this.$$.ctx[9]}get selectDown(){return this.$$.ctx[10]}}function As(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function Ls(l){let e,t,n,o,s=vt(l[1]),i=[];for(let r=0;r<s.length;r+=1)i[r]=Rs(As(l,s,r));return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=z(r,"DIV",{id:!0,class:!0});var a=M(e);t=z(a,"DIV",{class:!0});var c=M(t);n=z(c,"DIV",{class:!0});var u=M(n);o=z(u,"DIV",{class:!0});var f=M(o);for(let h=0;h<i.length;h+=1)i[h].l(f);f.forEach(_),u.forEach(_),c.forEach(_),a.forEach(_),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(r,a){B(r,e,a),y(e,t),y(t,n),y(n,o);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,null)},p(r,a){if(a&7){s=vt(r[1]);let c;for(c=0;c<s.length;c+=1){const u=As(r,s,c);i[c]?i[c].p(u,a):(i[c]=Rs(u),i[c].c(),i[c].m(o,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&_(e),Dn(i,r)}}}function Rs(l){let e,t,n,o,s,i,r=l[12].name+"",a,c,u,f,h;function d(){return l[7](l[12])}function p(){return l[8](l[14])}return{c(){e=V("button"),t=V("div"),n=V("img"),i=$(),a=Ie(r),c=$(),this.h()},l(b){e=z(b,"BUTTON",{class:!0,type:!0});var w=M(e);t=z(w,"DIV",{class:!0});var g=M(t);n=z(g,"IMG",{src:!0,alt:!0,class:!0}),i=ee(g),a=Se(g,r),g.forEach(_),c=ee(w),w.forEach(_),this.h()},h(){var b,w,g,v;Qn(n.src,o=((g=(w=(b=l[12])==null?void 0:b.info)==null?void 0:w.meta)==null?void 0:g.profile_image_url)??"/static/favicon.png")||m(n,"src",o),m(n,"alt",s=((v=l[12])==null?void 0:v.name)??l[12].id),m(n,"class","rounded-full size-6 items-center mr-2"),m(t,"class","flex font-medium text-black dark:text-gray-100 line-clamp-1"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,w){B(b,e,w),y(e,t),y(t,n),y(t,i),y(t,a),y(e,c),f||(h=[ke(e,"click",d),ke(e,"mousemove",p),ke(e,"focus",Mf)],f=!0)},p(b,w){var g,v,k,E;l=b,w&2&&!Qn(n.src,o=((k=(v=(g=l[12])==null?void 0:g.info)==null?void 0:v.meta)==null?void 0:k.profile_image_url)??"/static/favicon.png")&&m(n,"src",o),w&2&&s!==(s=((E=l[12])==null?void 0:E.name)??l[12].id)&&m(n,"alt",s),w&2&&r!==(r=l[12].name+"")&&Te(a,r),w&1&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&_(e),f=!1,en(h)}}}function Df(l){let e,t=l[1].length>0&&Ls(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[1].length>0?t?t.p(n,o):(t=Ls(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}const Mf=()=>{};function Tf(l,e,t){let n;ce(l,dl,p=>t(6,n=p)),Wt("i18n");const o=ln();let{command:s=""}=e,i=0,r=[],a=new Zi(n.filter(p=>{var b,w;return!((w=(b=p==null?void 0:p.info)==null?void 0:b.meta)!=null&&w.hidden)}).map(p=>{var w,g,v,k,E;return{...p,modelName:p==null?void 0:p.name,tags:(v=(g=(w=p==null?void 0:p.info)==null?void 0:w.meta)==null?void 0:g.tags)==null?void 0:v.map(I=>I.name).join(" "),desc:(E=(k=p==null?void 0:p.info)==null?void 0:k.meta)==null?void 0:E.description}}),{keys:["value","tags","modelName"],threshold:.3});const c=()=>{t(0,i=Math.max(0,i-1))},u=()=>{t(0,i=Math.min(i+1,r.length-1))},f=async p=>{t(3,s=""),o("select",p)};pn(async()=>{await xe();const p=document.getElementById("chat-input");await xe(),p==null||p.focus(),await xe()});const h=p=>{f(p)},d=p=>{t(0,i=p)};return l.$$set=p=>{"command"in p&&t(3,s=p.command)},l.$$.update=()=>{l.$$.dirty&72&&t(1,r=s.slice(1)?a.search(s).map(p=>p.item):n.filter(p=>{var b,w;return!((w=(b=p==null?void 0:p.info)==null?void 0:b.meta)!=null&&w.hidden)})),l.$$.dirty&8&&s&&t(0,i=0)},[i,r,f,s,c,u,n,h,d]}class Vf extends Le{constructor(e){super(),Re(this,e,Tf,Df,Fe,{command:3,selectUp:4,selectDown:5})}get selectUp(){return this.$$.ctx[4]}get selectDown(){return this.$$.ctx[5]}}function Us(l){let e,t,n,o;const s=[Nf,zf],i=[];function r(a,c){return a[4]?1:0}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function zf(l){let e,t,n,o,s;return o=new Io({}),{c(){e=V("div"),t=V("div"),n=V("div"),te(o.$$.fragment),this.h()},l(i){e=z(i,"DIV",{id:!0,class:!0});var r=M(e);t=z(r,"DIV",{class:!0});var a=M(t);n=z(a,"DIV",{class:!0});var c=M(n);oe(o.$$.fragment,c),c.forEach(_),a.forEach(_),r.forEach(_),this.h()},h(){m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(i,r){B(i,e,r),y(e,t),y(t,n),ne(o,n,null),s=!0},p:ye,i(i){s||(C(o.$$.fragment,i),s=!0)},o(i){N(o.$$.fragment,i),s=!1},d(i){i&&_(e),le(o)}}}function Nf(l){let e,t,n,o,s,i,r;const a=[Hf,Of,Pf],c=[];function u(f,h){var d,p,b;return h&4&&(e=null),h&4&&(t=null),h&4&&(n=null),e==null&&(e=((d=f[2])==null?void 0:d.charAt(0))==="/"),e?0:(t==null&&(t=!!(((p=f[2])==null?void 0:p.charAt(0))==="#"&&f[2].startsWith("#")&&!f[2].includes("# ")||f[2].slice(0,2)==="\\#"&&f[2].startsWith("#")&&!f[2].includes("# "))),t?1:(n==null&&(n=((b=f[2])==null?void 0:b.charAt(0))==="@"),n?2:-1))}return~(o=u(l,-1))&&(s=c[o]=a[o](l)),{c(){s&&s.c(),i=Ae()},l(f){s&&s.l(f),i=Ae()},m(f,h){~o&&c[o].m(f,h),B(f,i,h),r=!0},p(f,h){let d=o;o=u(f,h),o===d?~o&&c[o].p(f,h):(s&&(He(),N(c[d],1,1,()=>{c[d]=null}),Be()),~o?(s=c[o],s?s.p(f,h):(s=c[o]=a[o](f),s.c()),C(s,1),s.m(i.parentNode,i)):s=null)},i(f){r||(C(s),r=!0)},o(f){N(s),r=!1},d(f){f&&_(i),~o&&c[o].d(f)}}}function Pf(l){let e,t,n={command:l[2]};return e=new Vf({props:n}),l[17](e),e.$on("select",l[18]),{c(){te(e.$$.fragment)},l(o){oe(e.$$.fragment,o)},m(o,s){ne(e,o,s),t=!0},p(o,s){const i={};s&4&&(i.command=o[2]),e.$set(i)},i(o){t||(C(e.$$.fragment,o),t=!0)},o(o){N(e.$$.fragment,o),t=!1},d(o){l[17](null),le(e,o)}}}function Of(l){let e,t,n;function o(i){l[13](i)}let s={command:l[2].includes("\\#")?l[2].slice(2):l[2]};return l[0]!==void 0&&(s.prompt=l[0]),e=new Cf({props:s}),l[12](e),We.push(()=>Je(e,"prompt",o)),e.$on("youtube",l[14]),e.$on("url",l[15]),e.$on("select",l[16]),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),n=!0},p(i,r){const a={};r&4&&(a.command=i[2].includes("\\#")?i[2].slice(2):i[2]),!t&&r&1&&(t=!0,a.prompt=i[0],qe(()=>t=!1)),e.$set(a)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){l[12](null),le(e,i)}}}function Hf(l){let e,t,n,o;function s(a){l[10](a)}function i(a){l[11](a)}let r={command:l[2]};return l[0]!==void 0&&(r.prompt=l[0]),l[1]!==void 0&&(r.files=l[1]),e=new _f({props:r}),l[9](e),We.push(()=>Je(e,"prompt",s)),We.push(()=>Je(e,"files",i)),{c(){te(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,c){ne(e,a,c),o=!0},p(a,c){const u={};c&4&&(u.command=a[2]),!t&&c&1&&(t=!0,u.prompt=a[0],qe(()=>t=!1)),!n&&c&2&&(n=!0,u.files=a[1],qe(()=>n=!1)),e.$set(u)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){l[9](null),le(e,a)}}}function Bf(l){let e,t,n=l[3]&&Us(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,[s]){o[3]?n?(n.p(o,s),s&8&&C(n,1)):(n=Us(o),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Af(l,e,t){const n=ln();let{prompt:o=""}=e,{files:s=[]}=e,i=!1,r=null;const a=()=>{r==null||r.selectUp()},c=()=>{r==null||r.selectDown()};let u="",f=!1;const h=async()=>{t(4,i=!0),await Promise.all([(async()=>{Fi.set(await jc(localStorage.token))})(),(async()=>{ji.set(await Yc(localStorage.token))})()]),t(4,i=!1)};function d(S){We[S?"unshift":"push"](()=>{r=S,t(5,r)})}function p(S){o=S,t(0,o)}function b(S){s=S,t(1,s)}function w(S){We[S?"unshift":"push"](()=>{r=S,t(5,r)})}function g(S){o=S,t(0,o)}const v=S=>{console.log(S),n("upload",{type:"youtube",data:S.detail})},k=S=>{console.log(S),n("upload",{type:"web",data:S.detail})},E=S=>{console.log(S),!s.find(A=>A.id===S.detail.id)&&(t(1,s=[...s,{...S.detail,status:"processed"}]),n("select"))};function I(S){We[S?"unshift":"push"](()=>{r=S,t(5,r)})}const T=S=>{t(0,o=so(o,u)),n("select",{type:"model",data:S.detail})};return l.$$set=S=>{"prompt"in S&&t(0,o=S.prompt),"files"in S&&t(1,s=S.files)},l.$$.update=()=>{var S,A;l.$$.dirty&1&&t(2,u=((A=(S=o==null?void 0:o.split(`
`).pop())==null?void 0:S.split(" "))==null?void 0:A.pop())??""),l.$$.dirty&4&&t(3,f=["/","#","@"].includes(u==null?void 0:u.charAt(0))||u.slice(0,2)==="\\#"),l.$$.dirty&8&&f&&h()},[o,s,u,f,i,r,n,a,c,d,p,b,w,g,v,k,E,I,T]}class Lf extends Le{constructor(e){super(),Re(this,e,Af,Bf,Fe,{prompt:0,files:1,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function Rf(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Uf(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="0"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Wf extends Le{constructor(e){super(),Re(this,e,Uf,Rf,Fe,{className:0,strokeWidth:1})}}function Ff(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{class:!0,"stroke-width":!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var o=M(e);t=ze(o,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke","currentColor"),m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"stroke-width","2"),m(t,"d","m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"),m(e,"class",l[0]),m(e,"stroke-width",l[1]),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24")},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:ye,o:ye,d(n){n&&_(e)}}}function jf(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Yf extends Le{constructor(e){super(),Re(this,e,jf,Ff,Fe,{className:0,strokeWidth:1})}}function Xf(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Kf(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Zf extends Le{constructor(e){super(),Re(this,e,Kf,Xf,Fe,{className:0,strokeWidth:1})}}function Ws(l,e,t){const n=l.slice();return n[84]=e[t],n[86]=t,n}function Fs(l,e,t){const n=l.slice();return n[87]=e[t],n[89]=t,n}function js(l){var j,G;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E,I,T,S,A,O=l[6]===!1&&((j=l[12])==null?void 0:j.currentId)&&Ys(l),H=(l[0]!==void 0||l[3].length>0||l[5]||(((G=l[24])==null?void 0:G.webSearch)??!1)==="always"||l[4]||l[7])&&Xs(l);function F(X){l[42](X)}function K(X){l[43](X)}let U={};l[1]!==void 0&&(U.prompt=l[1]),l[2]!==void 0&&(U.files=l[2]),a=new Lf({props:U}),l[41](a),We.push(()=>Je(a,"prompt",F)),We.push(()=>Je(a,"files",K)),a.$on("upload",l[44]),a.$on("select",l[45]);const D=[Jf,qf],Y=[];function P(X,Z){return X[17]?0:1}return v=P(l),k=Y[v]=D[v](l),{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div"),O&&O.c(),s=$(),i=V("div"),H&&H.c(),r=$(),te(a.$$.fragment),h=$(),d=V("div"),p=V("div"),b=V("div"),w=V("input"),g=$(),k.c(),this.h()},l(X){e=z(X,"DIV",{class:!0});var Z=M(e);t=z(Z,"DIV",{class:!0});var J=M(t);n=z(J,"DIV",{class:!0});var L=M(n);o=z(L,"DIV",{class:!0});var re=M(o);O&&O.l(re),re.forEach(_),s=ee(L),i=z(L,"DIV",{class:!0});var q=M(i);H&&H.l(q),r=ee(q),oe(a.$$.fragment,q),q.forEach(_),L.forEach(_),J.forEach(_),h=ee(Z),d=z(Z,"DIV",{class:!0});var ae=M(d);p=z(ae,"DIV",{class:!0});var ge=M(p);b=z(ge,"DIV",{class:!0});var se=M(b);w=z(se,"INPUT",{type:!0}),g=ee(se),k.l(se),se.forEach(_),ge.forEach(_),ae.forEach(_),Z.forEach(_),this.h()},h(){var X,Z;m(o,"class","relative"),m(i,"class","w-full relative"),m(n,"class",f="flex flex-col px-3 "+(((X=l[24])==null?void 0:X.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"),m(t,"class","mx-auto inset-x-0 bg-transparent flex justify-center"),m(w,"type","file"),w.hidden=!0,w.multiple=!0,m(b,"class",""),m(p,"class",E=(((Z=l[24])==null?void 0:Z.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"),m(d,"class",I=l[8]?"bg-transparent":"bg-white dark:bg-gray-900"),m(e,"class","w-full font-primary")},m(X,Z){B(X,e,Z),y(e,t),y(t,n),y(n,o),O&&O.m(o,null),y(n,s),y(n,i),H&&H.m(i,null),y(i,r),ne(a,i,null),y(e,h),y(e,d),y(d,p),y(p,b),y(b,w),l[46](w),y(b,g),Y[v].m(b,null),T=!0,S||(A=[ke(w,"change",l[47]),ke(w,"change",l[48])],S=!0)},p(X,Z){var re,q,ae,ge;X[6]===!1&&((re=X[12])!=null&&re.currentId)?O?O.p(X,Z):(O=Ys(X),O.c(),O.m(o,null)):O&&(O.d(1),O=null),X[0]!==void 0||X[3].length>0||X[5]||(((q=X[24])==null?void 0:q.webSearch)??!1)==="always"||X[4]||X[7]?H?(H.p(X,Z),Z[0]&16777401&&C(H,1)):(H=Xs(X),H.c(),C(H,1),H.m(i,r)):H&&(He(),N(H,1,1,()=>{H=null}),Be());const J={};!c&&Z[0]&2&&(c=!0,J.prompt=X[1],qe(()=>c=!1)),!u&&Z[0]&4&&(u=!0,J.files=X[2],qe(()=>u=!1)),a.$set(J),(!T||Z[0]&16777216&&f!==(f="flex flex-col px-3 "+(((ae=X[24])==null?void 0:ae.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"))&&m(n,"class",f);let L=v;v=P(X),v===L?Y[v].p(X,Z):(He(),N(Y[L],1,1,()=>{Y[L]=null}),Be(),k=Y[v],k?k.p(X,Z):(k=Y[v]=D[v](X),k.c()),C(k,1),k.m(b,null)),(!T||Z[0]&16777216&&E!==(E=(((ge=X[24])==null?void 0:ge.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"))&&m(p,"class",E),(!T||Z[0]&256&&I!==(I=X[8]?"bg-transparent":"bg-white dark:bg-gray-900"))&&m(d,"class",I)},i(X){T||(C(H),C(a.$$.fragment,X),C(k),T=!0)},o(X){N(H),N(a.$$.fragment,X),N(k),T=!1},d(X){X&&_(e),O&&O.d(),H&&H.d(),l[41](null),le(a),l[46](null),Y[v].d(),S=!1,en(A)}}}function Ys(l){let e,t,n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',o,s;return{c(){e=V("div"),t=V("button"),t.innerHTML=n,this.h()},l(i){e=z(i,"DIV",{class:!0});var r=M(e);t=z(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(t)!=="svelte-h8r9o0"&&(t.innerHTML=n),r.forEach(_),this.h()},h(){m(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),m(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(i,r){B(i,e,r),y(e,t),o||(s=ke(t,"click",l[37]),o=!0)},p:ye,d(i){i&&_(e),o=!1,s()}}}function Xs(l){var h;let e,t,n,o,s,i,r=l[3].length>0&&Ks(l),a=(l[5]||(((h=l[24])==null?void 0:h.webSearch)??!1)==="always")&&qs(l),c=l[4]&&Js(l),u=l[7]&&Qs(l),f=l[0]!==void 0&&xs(l);return{c(){e=V("div"),r&&r.c(),t=$(),a&&a.c(),n=$(),c&&c.c(),o=$(),u&&u.c(),s=$(),f&&f.c(),this.h()},l(d){e=z(d,"DIV",{class:!0});var p=M(e);r&&r.l(p),t=ee(p),a&&a.l(p),n=ee(p),c&&c.l(p),o=ee(p),u&&u.l(p),s=ee(p),f&&f.l(p),p.forEach(_),this.h()},h(){m(e,"class","px-3 pb-0.5 pt-1.5 text-left w-full flex flex-col absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white dark:from-gray-900 z-10")},m(d,p){B(d,e,p),r&&r.m(e,null),y(e,t),a&&a.m(e,null),y(e,n),c&&c.m(e,null),y(e,o),u&&u.m(e,null),y(e,s),f&&f.m(e,null),i=!0},p(d,p){var b;d[3].length>0?r?(r.p(d,p),p[0]&8&&C(r,1)):(r=Ks(d),r.c(),C(r,1),r.m(e,t)):r&&(He(),N(r,1,1,()=>{r=null}),Be()),d[5]||(((b=d[24])==null?void 0:b.webSearch)??!1)==="always"?a?a.p(d,p):(a=qs(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),d[4]?c?c.p(d,p):(c=Js(d),c.c(),c.m(e,o)):c&&(c.d(1),c=null),d[7]?u?u.p(d,p):(u=Qs(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null),d[0]!==void 0?f?(f.p(d,p),p[0]&1&&C(f,1)):(f=xs(d),f.c(),C(f,1),f.m(e,null)):f&&(He(),N(f,1,1,()=>{f=null}),Be())},i(d){i||(C(r),C(f),i=!0)},o(d){N(r),N(f),i=!1},d(d){d&&_(e),r&&r.d(),a&&a.d(),c&&c.d(),u&&u.d(),f&&f.d()}}}function Ks(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-yellow-500"></span></span>',s,i,r=[],a=new Map,c,u=vt(l[3].map(l[38]));const f=h=>h[89];for(let h=0;h<u.length;h+=1){let d=Fs(l,u,h),p=f(d);a.set(p,r[h]=Gs(p,d))}return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=$(),i=V("div");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){e=z(h,"DIV",{class:!0});var d=M(e);t=z(d,"DIV",{class:!0});var p=M(t);n=z(p,"DIV",{class:!0,"data-svelte-h":!0}),ut(n)!=="svelte-1exsj7u"&&(n.innerHTML=o),s=ee(p),i=z(p,"DIV",{class:!0});var b=M(i);for(let w=0;w<r.length;w+=1)r[w].l(b);b.forEach(_),p.forEach(_),d.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","text-ellipsis line-clamp-1 flex"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(h,d){B(h,e,d),y(e,t),y(t,n),y(t,s),y(t,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(i,null);c=!0},p(h,d){d[0]&268435464&&(u=vt(h[3].map(h[38])),He(),r=bo(r,d,f,1,h,u,a,i,vo,Gs,null,Fs),Be())},i(h){if(!c){for(let d=0;d<u.length;d+=1)C(r[d]);c=!0}},o(h){for(let d=0;d<r.length;d+=1)N(r[d]);c=!1},d(h){h&&_(e);for(let d=0;d<r.length;d+=1)r[d].d()}}}function Gf(l){let e=l[87].name+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&268435464&&e!==(e=n[87].name+"")&&Te(t,e)},d(n){n&&_(t)}}}function Zs(l){let e,t=", ";return{c(){e=V("span"),e.textContent=t},l(n){e=z(n,"SPAN",{"data-svelte-h":!0}),ut(e)!=="svelte-1okzske"&&(e.textContent=t)},m(n,o){B(n,e,o)},d(n){n&&_(e)}}}function Gs(l,e){var a,c;let t,n,o,s,i;n=new Ot({props:{content:((c=(a=e[87])==null?void 0:a.meta)==null?void 0:c.description)??"",className:" "+(e[89]!==0?"pl-0.5":"")+" flex-shrink-0",placement:"top",$$slots:{default:[Gf]},$$scope:{ctx:e}}});let r=e[89]!==e[3].length-1&&Zs();return{key:l,first:null,c(){t=Ae(),te(n.$$.fragment),o=$(),r&&r.c(),s=Ae(),this.h()},l(u){t=Ae(),oe(n.$$.fragment,u),o=ee(u),r&&r.l(u),s=Ae(),this.h()},h(){this.first=t},m(u,f){B(u,t,f),ne(n,u,f),B(u,o,f),r&&r.m(u,f),B(u,s,f),i=!0},p(u,f){var d,p;e=u;const h={};f[0]&268435464&&(h.content=((p=(d=e[87])==null?void 0:d.meta)==null?void 0:p.description)??""),f[0]&268435464&&(h.className=" "+(e[89]!==0?"pl-0.5":"")+" flex-shrink-0"),f[0]&268435464|f[2]&268435456&&(h.$$scope={dirty:f,ctx:e}),n.$set(h),e[89]!==e[3].length-1?r||(r=Zs(),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i(u){i||(C(n.$$.fragment,u),i=!0)},o(u){N(n.$$.fragment,u),i=!1},d(u){u&&(_(t),_(o),_(s)),le(n,u),r&&r.d(u)}}}function qs(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-blue-500"></span></span>',s,i,r=l[25].t("Search the internet")+"",a;return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=$(),i=V("div"),a=Ie(r),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=M(e);t=z(u,"DIV",{class:!0});var f=M(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),ut(n)!=="svelte-19sghfm"&&(n.innerHTML=o),s=ee(f),i=z(f,"DIV",{class:!0});var h=M(i);a=Se(h,r),h.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),y(e,t),y(t,n),y(t,s),y(t,i),y(i,a)},p(c,u){u[0]&33554432&&r!==(r=c[25].t("Search the internet")+"")&&Te(a,r)},d(c){c&&_(e)}}}function Js(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-teal-500"></span></span>',s,i,r=l[25].t("Generate an image")+"",a;return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=$(),i=V("div"),a=Ie(r),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=M(e);t=z(u,"DIV",{class:!0});var f=M(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),ut(n)!=="svelte-kf1e3u"&&(n.innerHTML=o),s=ee(f),i=z(f,"DIV",{class:!0});var h=M(i);a=Se(h,r),h.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),y(e,t),y(t,n),y(t,s),y(t,i),y(i,a)},p(c,u){u[0]&33554432&&r!==(r=c[25].t("Generate an image")+"")&&Te(a,r)},d(c){c&&_(e)}}}function Qs(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,i,r=l[25].t("Execute code for analysis")+"",a;return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=$(),i=V("div"),a=Ie(r),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=M(e);t=z(u,"DIV",{class:!0});var f=M(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),ut(n)!=="svelte-12j611w"&&(n.innerHTML=o),s=ee(f),i=z(f,"DIV",{class:!0});var h=M(i);a=Se(h,r),h.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){B(c,e,u),y(e,t),y(t,n),y(t,s),y(t,i),y(i,a)},p(c,u){u[0]&33554432&&r!==(r=c[25].t("Execute code for analysis")+"")&&Te(a,r)},d(c){c&&_(e)}}}function xs(l){let e,t,n,o,s,i,r,a,c=l[0].name+"",u,f,h,d,p,b,w,g;return p=new So({}),{c(){e=V("div"),t=V("div"),n=V("img"),s=$(),i=V("div"),r=Ie("Talking to "),a=V("span"),u=Ie(c),f=$(),h=V("div"),d=V("button"),te(p.$$.fragment),this.h()},l(v){e=z(v,"DIV",{class:!0});var k=M(e);t=z(k,"DIV",{class:!0});var E=M(t);n=z(E,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),s=ee(E),i=z(E,"DIV",{class:!0});var I=M(i);r=Se(I,"Talking to "),a=z(I,"SPAN",{class:!0});var T=M(a);u=Se(T,c),T.forEach(_),I.forEach(_),E.forEach(_),f=ee(k),h=z(k,"DIV",{});var S=M(h);d=z(S,"BUTTON",{class:!0});var A=M(d);oe(p.$$.fragment,A),A.forEach(_),S.forEach(_),k.forEach(_),this.h()},h(){var v,k,E;m(n,"crossorigin","anonymous"),m(n,"alt","model profile"),m(n,"class","size-3.5 max-w-[28px] object-cover rounded-full"),Qn(n.src,o=((E=(k=(v=l[14].find(l[39]))==null?void 0:v.info)==null?void 0:k.meta)==null?void 0:E.profile_image_url)??(l[25].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`))||m(n,"src",o),m(a,"class","font-medium"),m(i,"class","translate-y-[0.5px]"),m(t,"class","pl-[1px] flex items-center gap-2 text-sm dark:text-gray-500"),m(d,"class","flex items-center dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(v,k){B(v,e,k),y(e,t),y(t,n),y(t,s),y(t,i),y(i,r),y(i,a),y(a,u),y(e,f),y(e,h),y(h,d),ne(p,d,null),b=!0,w||(g=ke(d,"click",l[40]),w=!0)},p(v,k){var E,I,T;(!b||k[0]&33570817&&!Qn(n.src,o=((T=(I=(E=v[14].find(v[39]))==null?void 0:E.info)==null?void 0:I.meta)==null?void 0:T.profile_image_url)??(v[25].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`)))&&m(n,"src",o),(!b||k[0]&1)&&c!==(c=v[0].name+"")&&Te(u,c)},i(v){b||(C(p.$$.fragment,v),b=!0)},o(v){N(p.$$.fragment,v),b=!1},d(v){v&&_(e),le(p),w=!1,g()}}}function qf(l){var G,X;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E,I,T,S=l[2].length>0&&$s(l);const A=[td,ed],O=[];function H(Z,J){var L;return((L=Z[24])==null?void 0:L.richTextInput)??!0?0:1}s=H(l),i=O[s]=A[s](l);function F(Z){l[71](Z)}let K={screenCaptureHandler:l[33],inputFilesHandler:l[35],uploadFilesHandler:l[68],uploadGoogleDriveHandler:l[69],onClose:l[70],$$slots:{default:[nd]},$$scope:{ctx:l}};l[3]!==void 0&&(K.selectedToolIds=l[3]),u=new df({props:K}),We.push(()=>Je(u,"selectedToolIds",F));let U=l[27]&&nr(l),D=(!((G=l[12])!=null&&G.currentId)||((X=l[12].messages[l[12].currentId])==null?void 0:X.done)==!0)&&rr(l);const Y=[ad,id],P=[];function j(Z,J){var L;return!Z[12].currentId||((L=Z[12].messages[Z[12].currentId])==null?void 0:L.done)==!0?0:1}return g=j(l),v=P[g]=Y[g](l),{c(){e=V("form"),t=V("div"),S&&S.c(),n=$(),o=V("div"),i.c(),r=$(),a=V("div"),c=V("div"),te(u.$$.fragment),h=$(),d=V("div"),U&&U.c(),p=$(),b=V("div"),D&&D.c(),w=$(),v.c(),this.h()},l(Z){e=z(Z,"FORM",{class:!0});var J=M(e);t=z(J,"DIV",{class:!0,dir:!0});var L=M(t);S&&S.l(L),n=ee(L),o=z(L,"DIV",{class:!0});var re=M(o);i.l(re),re.forEach(_),r=ee(L),a=z(L,"DIV",{class:!0});var q=M(a);c=z(q,"DIV",{class:!0});var ae=M(c);oe(u.$$.fragment,ae),h=ee(ae),d=z(ae,"DIV",{class:!0});var ge=M(d);U&&U.l(ge),ge.forEach(_),ae.forEach(_),p=ee(q),b=z(q,"DIV",{class:!0});var se=M(b);D&&D.l(se),w=ee(se),v.l(se),se.forEach(_),q.forEach(_),L.forEach(_),J.forEach(_),this.h()},h(){var Z;m(o,"class","px-2.5"),m(d,"class","flex gap-0.5 items-center overflow-x-auto scrollbar-none flex-1"),m(c,"class","ml-1 self-end gap-0.5 flex items-center flex-1 max-w-[80%]"),m(b,"class","self-end flex space-x-1 mr-1 flex-shrink-0"),m(a,"class","flex justify-between mt-1.5 mb-2.5 mx-0.5 max-w-full"),m(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1 bg-gray-600/5 dark:bg-gray-400/5 dark:text-gray-100"),m(t,"dir",k=((Z=l[24])==null?void 0:Z.chatDirection)??"LTR"),m(e,"class","w-full flex gap-1.5")},m(Z,J){B(Z,e,J),y(e,t),S&&S.m(t,null),y(t,n),y(t,o),O[s].m(o,null),y(t,r),y(t,a),y(a,c),ne(u,c,null),y(c,h),y(c,d),U&&U.m(d,null),y(a,p),y(a,b),D&&D.m(b,null),y(b,w),P[g].m(b,null),E=!0,I||(T=ke(e,"submit",jl(l[78])),I=!0)},p(Z,J){var ae,ge,se;Z[2].length>0?S?(S.p(Z,J),J[0]&4&&C(S,1)):(S=$s(Z),S.c(),C(S,1),S.m(t,n)):S&&(He(),N(S,1,1,()=>{S=null}),Be());let L=s;s=H(Z),s===L?O[s].p(Z,J):(He(),N(O[L],1,1,()=>{O[L]=null}),Be(),i=O[s],i?i.p(Z,J):(i=O[s]=A[s](Z),i.c()),C(i,1),i.m(o,null));const re={};J[0]&524288&&(re.uploadFilesHandler=Z[68]),J[0]&33554432&&(re.uploadGoogleDriveHandler=Z[69]),J[2]&268435456&&(re.$$scope={dirty:J,ctx:Z}),!f&&J[0]&8&&(f=!0,re.selectedToolIds=Z[3],qe(()=>f=!1)),u.$set(re),Z[27]?U?(U.p(Z,J),J[0]&134217728&&C(U,1)):(U=nr(Z),U.c(),C(U,1),U.m(d,null)):U&&(He(),N(U,1,1,()=>{U=null}),Be()),!((ae=Z[12])!=null&&ae.currentId)||((ge=Z[12].messages[Z[12].currentId])==null?void 0:ge.done)==!0?D?(D.p(Z,J),J[0]&4096&&C(D,1)):(D=rr(Z),D.c(),C(D,1),D.m(b,w)):D&&(He(),N(D,1,1,()=>{D=null}),Be());let q=g;g=j(Z),g===q?P[g].p(Z,J):(He(),N(P[q],1,1,()=>{P[q]=null}),Be(),v=P[g],v?v.p(Z,J):(v=P[g]=Y[g](Z),v.c()),C(v,1),v.m(b,null)),(!E||J[0]&16777216&&k!==(k=((se=Z[24])==null?void 0:se.chatDirection)??"LTR"))&&m(t,"dir",k)},i(Z){E||(C(S),C(i),C(u.$$.fragment,Z),C(U),C(D),C(v),E=!0)},o(Z){N(S),N(i),N(u.$$.fragment,Z),N(U),N(D),N(v),E=!1},d(Z){Z&&_(e),S&&S.d(),O[s].d(),le(u),U&&U.d(),D&&D.d(),P[g].d(),I=!1,T()}}}function Jf(l){let e,t,n;function o(i){l[49](i)}let s={};return l[17]!==void 0&&(s.recording=l[17]),e=new Wc({props:s}),We.push(()=>Je(e,"recording",o)),e.$on("cancel",l[50]),e.$on("confirm",l[51]),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),n=!0},p(i,r){const a={};!t&&r[0]&131072&&(t=!0,a.recording=i[17],qe(()=>t=!1)),e.$set(a)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function $s(l){let e,t,n=vt(l[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=tr(Ws(l,n,i));const s=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){e=V("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=z(i,"DIV",{class:!0});var r=M(e);for(let a=0;a<o.length;a+=1)o[a].l(r);r.forEach(_),this.h()},h(){m(e,"class","mx-2 mt-2.5 -mb-1 flex items-center flex-wrap gap-2")},m(i,r){B(i,e,r);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,r){if(r[0]&41945093){n=vt(i[2]);let a;for(a=0;a<n.length;a+=1){const c=Ws(i,n,a);o[a]?(o[a].p(c,r),C(o[a],1)):(o[a]=tr(c),o[a].c(),C(o[a],1),o[a].m(e,null))}for(He(),a=n.length;a<o.length;a+=1)s(a);Be()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)C(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);t=!1},d(i){i&&_(e),Dn(o,i)}}}function Qf(l){var s;let e,t;function n(){return l[54](l[84],l[86])}function o(){return l[55](l[84])}return e=new Gi({props:{item:l[84],name:l[84].name,type:l[84].type,size:(s=l[84])==null?void 0:s.size,loading:l[84].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){var c;l=i;const a={};r[0]&4&&(a.item=l[84]),r[0]&4&&(a.name=l[84].name),r[0]&4&&(a.type=l[84].type),r[0]&4&&(a.size=(c=l[84])==null?void 0:c.size),r[0]&4&&(a.loading=l[84].status==="uploading"),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){le(e,i)}}}function xf(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,h;n=new Zc({props:{src:l[84].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});let d=(l[0]?l[23].length===0:l[11].length!==l[23].length)&&er(l);function p(){return l[53](l[86])}return{c(){e=V("div"),t=V("div"),te(n.$$.fragment),o=$(),d&&d.c(),s=$(),i=V("div"),r=V("button"),r.innerHTML=a,c=$(),this.h()},l(b){e=z(b,"DIV",{class:!0});var w=M(e);t=z(w,"DIV",{class:!0});var g=M(t);oe(n.$$.fragment,g),o=ee(g),d&&d.l(g),g.forEach(_),s=ee(w),i=z(w,"DIV",{class:!0});var v=M(i);r=z(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ut(r)!=="svelte-rgzmre"&&(r.innerHTML=a),v.forEach(_),c=ee(w),w.forEach(_),this.h()},h(){m(t,"class","relative flex items-center"),m(r,"class","bg-white text-black border border-white rounded-full group-hover:visible invisible transition"),m(r,"type","button"),m(i,"class","absolute -top-1 -right-1"),m(e,"class","relative group")},m(b,w){B(b,e,w),y(e,t),ne(n,t,null),y(t,o),d&&d.m(t,null),y(e,s),y(e,i),y(i,r),y(e,c),u=!0,f||(h=ke(r,"click",p),f=!0)},p(b,w){l=b;const g={};w[0]&4&&(g.src=l[84].url),n.$set(g),(l[0]?l[23].length===0:l[11].length!==l[23].length)?d?(d.p(l,w),w[0]&8390657&&C(d,1)):(d=er(l),d.c(),C(d,1),d.m(t,null)):d&&(He(),N(d,1,1,()=>{d=null}),Be())},i(b){u||(C(n.$$.fragment,b),C(d),u=!0)},o(b){N(n.$$.fragment,b),N(d),u=!1},d(b){b&&_(e),le(n),d&&d.d(),f=!1,h()}}}function er(l){let e,t;return e=new Ot({props:{className:" absolute top-1 left-1",content:l[25].t("{{ models }}",{models:[...l[0]?[l[0]]:l[11]].filter(l[52]).join(", ")}),$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&41945089&&(s.content=n[25].t("{{ models }}",{models:[...n[0]?[n[0]]:n[11]].filter(n[52]).join(", ")})),o[2]&268435456&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function $f(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=M(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4 fill-yellow-300")},m(n,o){B(n,e,o),y(e,t)},p:ye,d(n){n&&_(e)}}}function tr(l){let e,t,n,o;const s=[xf,Qf],i=[];function r(a,c){return a[84].type==="image"?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function ed(l){let e,t,n,o;return{c(){e=V("textarea"),this.h()},l(s){e=z(s,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),M(e).forEach(_),this.h()},h(){m(e,"id","chat-input"),m(e,"class","scrollbar-hidden bg-transparent dark:text-gray-100 outline-none w-full pt-3 px-1 resize-none"),m(e,"placeholder",t=l[13]?l[13]:l[25].t("Send a Message")),m(e,"rows","1")},m(s,i){B(s,e,i),l[61](e),Cn(e,l[1]),n||(o=[ke(e,"input",l[62]),ke(e,"keypress",l[63]),ke(e,"keydown",l[64]),ke(e,"input",l[65]),ke(e,"focus",l[66]),ke(e,"paste",l[67])],n=!0)},p(s,i){i[0]&33562624&&t!==(t=s[13]?s[13]:s[25].t("Send a Message"))&&m(e,"placeholder",t),i[0]&2&&Cn(e,s[1])},i:ye,o:ye,d(s){s&&_(e),l[61](null),n=!1,en(o)}}}function td(l){var r;let e,t,n,o;function s(a){l[58](a)}let i={id:"chat-input",messageInput:!0,shiftEnter:!l[29]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),placeholder:l[13]?l[13]:l[25].t("Send a Message"),largeTextAsFile:((r=l[24])==null?void 0:r.largeTextAsFile)??!1,autocomplete:!0,generateAutoCompletion:l[56]};return l[1]!==void 0&&(i.value=l[1]),t=new Fc({props:i}),l[57](t),We.push(()=>Je(t,"value",s)),t.$on("keydown",l[59]),t.$on("paste",l[60]),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=M(e);oe(t.$$.fragment,c),c.forEach(_),this.h()},h(){m(e,"class","scrollbar-hidden text-left bg-transparent dark:text-gray-100 outline-none w-full pt-3 px-1 resize-none h-fit max-h-80 overflow-auto")},m(a,c){B(a,e,c),ne(t,e,null),o=!0},p(a,c){var f;const u={};c[0]&536870912&&(u.shiftEnter=!a[29]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)),c[0]&33562624&&(u.placeholder=a[13]?a[13]:a[25].t("Send a Message")),c[0]&16777216&&(u.largeTextAsFile=((f=a[24])==null?void 0:f.largeTextAsFile)??!1),c[0]&33591296&&(u.generateAutoCompletion=a[56]),!n&&c[0]&2&&(n=!0,u.value=a[1],qe(()=>n=!1)),t.$set(u)},i(a){o||(C(t.$$.fragment,a),o=!0)},o(a){N(t.$$.fragment,a),o=!1},d(a){a&&_(e),l[57](null),le(t)}}}function nd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"></path></svg>';return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),ut(e)!=="svelte-m9exdk"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-transparent hover:bg-gray-100 text-gray-800 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5 outline-none focus:outline-none"),m(e,"type","button"),m(e,"aria-label","More")},m(n,o){B(n,e,o)},p:ye,d(n){n&&_(e)}}}function nr(l){var a,c,u,f,h,d,p,b,w,g,v,k,E;let e,t,n,o,s=((c=(a=l[26])==null?void 0:a.features)==null?void 0:c.enable_web_search)&&(l[27].role==="admin"||((h=(f=(u=l[27])==null?void 0:u.permissions)==null?void 0:f.features)==null?void 0:h.web_search))&&lr(l),i=((p=(d=l[26])==null?void 0:d.features)==null?void 0:p.enable_image_generation)&&(l[27].role==="admin"||((g=(w=(b=l[27])==null?void 0:b.permissions)==null?void 0:w.features)==null?void 0:g.image_generation))&&or(l),r=(l[27].role==="admin"||((E=(k=(v=l[27])==null?void 0:v.permissions)==null?void 0:k.features)==null?void 0:E.code_interpreter))&&sr(l);return{c(){s&&s.c(),e=$(),i&&i.c(),t=$(),r&&r.c(),n=Ae()},l(I){s&&s.l(I),e=ee(I),i&&i.l(I),t=ee(I),r&&r.l(I),n=Ae()},m(I,T){s&&s.m(I,T),B(I,e,T),i&&i.m(I,T),B(I,t,T),r&&r.m(I,T),B(I,n,T),o=!0},p(I,T){var S,A,O,H,F,K,U,D,Y,P,j,G,X;(A=(S=I[26])==null?void 0:S.features)!=null&&A.enable_web_search&&(I[27].role==="admin"||(F=(H=(O=I[27])==null?void 0:O.permissions)==null?void 0:H.features)!=null&&F.web_search)?s?(s.p(I,T),T[0]&201326592&&C(s,1)):(s=lr(I),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(He(),N(s,1,1,()=>{s=null}),Be()),(U=(K=I[26])==null?void 0:K.features)!=null&&U.enable_image_generation&&(I[27].role==="admin"||(P=(Y=(D=I[27])==null?void 0:D.permissions)==null?void 0:Y.features)!=null&&P.image_generation)?i?(i.p(I,T),T[0]&201326592&&C(i,1)):(i=or(I),i.c(),C(i,1),i.m(t.parentNode,t)):i&&(He(),N(i,1,1,()=>{i=null}),Be()),I[27].role==="admin"||(X=(G=(j=I[27])==null?void 0:j.permissions)==null?void 0:G.features)!=null&&X.code_interpreter?r?(r.p(I,T),T[0]&134217728&&C(r,1)):(r=sr(I),r.c(),C(r,1),r.m(n.parentNode,n)):r&&(He(),N(r,1,1,()=>{r=null}),Be())},i(I){o||(C(s),C(i),C(r),o=!0)},o(I){N(s),N(i),N(r),o=!1},d(I){I&&(_(e),_(t),_(n)),s&&s.d(I),i&&i.d(I),r&&r.d(I)}}}function lr(l){let e,t;return e=new Ot({props:{content:l[25].t("Search the internet"),placement:"top",$$slots:{default:[ld]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Search the internet")),o[0]&50331680|o[2]&268435456&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function ld(l){let e,t,n,o,s=l[25].t("Web Search")+"",i,r,a,c,u;return t=new Qc({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=V("button"),te(t.$$.fragment),n=$(),o=V("span"),i=Ie(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var h=M(e);oe(t.$$.fragment,h),n=ee(h),o=z(h,"SPAN",{class:!0});var d=M(o);i=Se(d,s),d.forEach(_),h.forEach(_),this.h()},h(){var f;m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(l[5]||(((f=l[24])==null?void 0:f.webSearch)??!1)==="always"?"bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400":"bg-transparent text-gray-600 dark:text-gray-400 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"))},m(f,h){B(f,e,h),ne(t,e,null),y(e,n),y(e,o),y(o,i),a=!0,c||(u=ke(e,"click",jl(l[72])),c=!0)},p(f,h){var d;(!a||h[0]&33554432)&&s!==(s=f[25].t("Web Search")+"")&&Te(i,s),(!a||h[0]&16777248&&r!==(r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(f[5]||(((d=f[24])==null?void 0:d.webSearch)??!1)==="always"?"bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400":"bg-transparent text-gray-600 dark:text-gray-400 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800")))&&m(e,"class",r)},i(f){a||(C(t.$$.fragment,f),a=!0)},o(f){N(t.$$.fragment,f),a=!1},d(f){f&&_(e),le(t),c=!1,u()}}}function or(l){let e,t;return e=new Ot({props:{content:l[25].t("Generate an image"),placement:"top",$$slots:{default:[od]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Generate an image")),o[0]&33554448|o[2]&268435456&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function od(l){let e,t,n,o,s=l[25].t("Image")+"",i,r,a,c,u;return t=new Yf({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=V("button"),te(t.$$.fragment),n=$(),o=V("span"),i=Ie(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var h=M(e);oe(t.$$.fragment,h),n=ee(h),o=z(h,"SPAN",{class:!0});var d=M(o);i=Se(d,s),d.forEach(_),h.forEach(_),this.h()},h(){m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(l[4]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 "))},m(f,h){B(f,e,h),ne(t,e,null),y(e,n),y(e,o),y(o,i),a=!0,c||(u=ke(e,"click",jl(l[73])),c=!0)},p(f,h){(!a||h[0]&33554432)&&s!==(s=f[25].t("Image")+"")&&Te(i,s),(!a||h[0]&16&&r!==(r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(f[4]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 ")))&&m(e,"class",r)},i(f){a||(C(t.$$.fragment,f),a=!0)},o(f){N(t.$$.fragment,f),a=!1},d(f){f&&_(e),le(t),c=!1,u()}}}function sr(l){let e,t;return e=new Ot({props:{content:l[25].t("Execute code for analysis"),placement:"top",$$slots:{default:[sd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Execute code for analysis")),o[0]&33554560|o[2]&268435456&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function sd(l){let e,t,n,o,s=l[25].t("Code Interpreter")+"",i,r,a,c,u;return t=new Zf({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=V("button"),te(t.$$.fragment),n=$(),o=V("span"),i=Ie(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var h=M(e);oe(t.$$.fragment,h),n=ee(h),o=z(h,"SPAN",{class:!0});var d=M(o);i=Se(d,s),d.forEach(_),h.forEach(_),this.h()},h(){m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(l[7]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 "))},m(f,h){B(f,e,h),ne(t,e,null),y(e,n),y(e,o),y(o,i),a=!0,c||(u=ke(e,"click",jl(l[74])),c=!0)},p(f,h){(!a||h[0]&33554432)&&s!==(s=f[25].t("Code Interpreter")+"")&&Te(i,s),(!a||h[0]&128&&r!==(r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(f[7]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 ")))&&m(e,"class",r)},i(f){a||(C(t.$$.fragment,f),a=!0)},o(f){N(t.$$.fragment,f),a=!1},d(f){f&&_(e),le(t),c=!1,u()}}}function rr(l){let e,t;return e=new Ot({props:{content:l[25].t("Record voice"),$$slots:{default:[rd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Record voice")),o[0]&33685504|o[2]&268435456&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function rd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',n,o;return{c(){e=V("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{id:!0,class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),ut(e)!=="svelte-4nqm9k"&&(e.innerHTML=t),this.h()},h(){m(e,"id","voice-input-button"),m(e,"class","text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center"),m(e,"type","button"),m(e,"aria-label","Voice Input")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[75]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function id(l){let e,t,n;return t=new Ot({props:{content:l[25].t("Stop"),$$slots:{default:[cd]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s[0]&33554432&&(i.content=o[25].t("Stop")),s[0]&1024|s[2]&268435456&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function ad(l){let e,t,n,o;const s=[fd,ud],i=[];function r(a,c){return a[1]===""?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function cd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',n,o;return{c(){e=V("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-nqxd5x"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[77]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function ud(l){let e,t,n;return t=new Ot({props:{content:l[25].t("Send message"),$$slots:{default:[dd]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s[0]&33554432&&(i.content=o[25].t("Send message")),s[0]&16777250|s[2]&268435456&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function fd(l){let e,t,n;return t=new Ot({props:{content:l[25].t("Call"),$$slots:{default:[hd]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex items-center")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s[0]&33554432&&(i.content=o[25].t("Call")),s[0]&117442592|s[2]&268435456&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function dd(l){let e,t,n,o,s;return{c(){e=V("button"),t=Ve("svg"),n=Ve("path"),this.h()},l(i){e=z(i,"BUTTON",{id:!0,class:!0,type:!0});var r=M(e);t=ze(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=M(t);n=ze(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(n).forEach(_),a.forEach(_),r.forEach(_),this.h()},h(){var i;m(n,"fill-rule","evenodd"),m(n,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),m(n,"clip-rule","evenodd"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 16 16"),m(t,"fill","currentColor"),m(t,"class","size-5"),m(e,"id","send-message-button"),m(e,"class",o=(l[1]!==""?l[5]||(((i=l[24])==null?void 0:i.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 self-center"),m(e,"type","submit"),e.disabled=s=l[1]===""},m(i,r){B(i,e,r),y(e,t),y(t,n)},p(i,r){var a;r[0]&16777250&&o!==(o=(i[1]!==""?i[5]||(((a=i[24])==null?void 0:a.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 self-center")&&m(e,"class",o),r[0]&2&&s!==(s=i[1]==="")&&(e.disabled=s)},d(i){i&&_(e)}}}function hd(l){let e,t,n,o,s,i;return t=new Wf({props:{className:"size-5"}}),{c(){e=V("button"),te(t.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0,type:!0,"aria-label":!0});var a=M(e);oe(t.$$.fragment,a),a.forEach(_),this.h()},h(){var r;m(e,"class",n=(l[5]||(((r=l[24])==null?void 0:r.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100")+" transition rounded-full p-1.5 self-center"),m(e,"type","button"),m(e,"aria-label","Call")},m(r,a){B(r,e,a),ne(t,e,null),o=!0,s||(i=ke(e,"click",l[76]),s=!0)},p(r,a){var c;(!o||a[0]&16777248&&n!==(n=(r[5]||(((c=r[24])==null?void 0:c.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100")+" transition rounded-full p-1.5 self-center"))&&m(e,"class",n)},i(r){o||(C(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&_(e),le(t),s=!1,i()}}}function md(l){let e,t,n,o;e=new Xa({props:{show:l[22]}});let s=l[16]&&js(l);return{c(){te(e.$$.fragment),t=$(),s&&s.c(),n=Ae()},l(i){oe(e.$$.fragment,i),t=ee(i),s&&s.l(i),n=Ae()},m(i,r){ne(e,i,r),B(i,t,r),s&&s.m(i,r),B(i,n,r),o=!0},p(i,r){const a={};r[0]&4194304&&(a.show=i[22]),e.$set(a),i[16]?s?(s.p(i,r),r[0]&65536&&C(s,1)):(s=js(i),s.c(),C(s,1),s.m(n.parentNode,n)):s&&(He(),N(s,1,1,()=>{s=null}),Be())},i(i){o||(C(e.$$.fragment,i),C(s),o=!0)},o(i){N(e.$$.fragment,i),N(s),o=!1},d(i){i&&(_(t),_(n)),le(e,i),s&&s.d(i)}}}function gd(l,e,t){let n,o,s,i,r,a,c;ce(l,Zn,W=>t(24,n=W)),ce(l,Yl,W=>t(26,s=W)),ce(l,xn,W=>t(27,i=W)),ce(l,dl,W=>t(14,r=W)),ce(l,ul,W=>t(28,a=W)),ce(l,wo,W=>t(29,c=W));const u=ln(),f=Wt("i18n");ce(l,f,W=>t(25,o=W));let{transparentBackground:h=!1}=e,{onChange:d=()=>{}}=e,{createMessagePair:p}=e,{stopResponse:b}=e,{autoScroll:w=!1}=e,{atSelectedModel:g=void 0}=e,{selectedModels:v}=e,k=[],{history:E}=e,{prompt:I=""}=e,{files:T=[]}=e,{selectedToolIds:S=[]}=e,{imageGenerationEnabled:A=!1}=e,{webSearchEnabled:O=!1}=e,{codeInterpreterEnabled:H=!1}=e,F=!1,K=!1,U,D,Y,P,j=!1,{placeholder:G=""}=e,X=[];const Z=()=>{const W=document.getElementById("messages-container");W.scrollTo({top:W.scrollHeight,behavior:"smooth"})},J=async()=>{try{const W=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"never"},audio:!1}),Ne=document.createElement("video");Ne.srcObject=W,await Ne.play();const Ze=document.createElement("canvas");Ze.width=Ne.videoWidth,Ze.height=Ne.videoHeight,Ze.getContext("2d").drawImage(Ne,0,0,Ze.width,Ze.height),W.getTracks().forEach(st=>st.stop()),window.focus();const Ye=Ze.toDataURL("image/png");t(2,T=[...T,{type:"image",url:Ye}]),Ne.srcObject=null}catch(W){console.error("Error capturing screen:",W)}},L=async(W,Ne=!1)=>{var Ye,st,hn,En;if((i==null?void 0:i.role)!=="admin"&&!(((st=(Ye=i==null?void 0:i.permissions)==null?void 0:Ye.chat)==null?void 0:st.file_upload)??!0))return et.error(o.t("You do not have permission to upload files.")),null;const Ze=el(),tt={type:"file",file:"",id:null,url:"",name:W.name,collection_name:"",status:"uploading",size:W.size,error:"",itemId:Ze,...Ne?{context:"full"}:{}};if(tt.size==0)return et.error(o.t("You cannot upload an empty file.")),null;if(t(2,T=[...T,tt]),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(W.type)){const ct=await Ki(localStorage.token,W).catch(Pt=>(et.error(`${Pt}`),null));if(ct){console.log(ct);const Pt=new Blob([ct.text],{type:"text/plain"});W=Xi(Pt,`${W.name}.txt`),tt.name=W.name,tt.size=W.size}}try{const ct=await Ac(localStorage.token,W);ct?(console.log("File upload completed:",{id:ct.id,name:tt.name,collection:(hn=ct==null?void 0:ct.meta)==null?void 0:hn.collection_name}),ct.error&&(console.warn("File upload warning:",ct.error),et.warning(ct.error)),tt.status="uploaded",tt.file=ct,tt.id=ct.id,tt.collection_name=((En=ct==null?void 0:ct.meta)==null?void 0:En.collection_name)||(ct==null?void 0:ct.collection_name),tt.url=`${qa}/files/${ct.id}`,t(2,T)):t(2,T=T.filter(Pt=>(Pt==null?void 0:Pt.itemId)!==Ze))}catch(ct){et.error(`${ct}`),t(2,T=T.filter(Pt=>(Pt==null?void 0:Pt.itemId)!==Ze))}},re=async W=>{console.log("Input files handler called with:",W),W.forEach(Ne=>{var Ze,tt,Ye,st;if(console.log("Processing file:",{name:Ne.name,type:Ne.type,size:Ne.size,extension:Ne.name.split(".").at(-1)}),(((Ze=s==null?void 0:s.file)==null?void 0:Ze.max_size)??null)!==null&&Ne.size>(((tt=s==null?void 0:s.file)==null?void 0:tt.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:Ne.size,maxSize:(((Ye=s==null?void 0:s.file)==null?void 0:Ye.max_size)??0)*1024*1024}),et.error(o.t("File size should not exceed {{maxSize}} MB.",{maxSize:(st=s==null?void 0:s.file)==null?void 0:st.max_size}));return}if(["image/gif","image/webp","image/jpeg","image/png"].includes(Ne.type)){if(X.length===0){et.error(o.t("Selected model(s) do not support image inputs"));return}let hn=new FileReader;hn.onload=async En=>{var Pt,In;let ct=En.target.result;if((n==null?void 0:n.imageCompression)??!1){const Mn=((Pt=n==null?void 0:n.imageCompressionSize)==null?void 0:Pt.width)??null,An=((In=n==null?void 0:n.imageCompressionSize)==null?void 0:In.height)??null;(Mn||An)&&(ct=await ic(ct,Mn,An))}t(2,T=[...T,{type:"image",url:`${ct}`}])},hn.readAsDataURL(Ne)}else L(Ne)})},q=W=>{W.key==="Escape"&&(console.log("Escape"),t(22,j=!1))},ae=W=>{var Ne,Ze;W.preventDefault(),(Ze=(Ne=W.dataTransfer)==null?void 0:Ne.types)!=null&&Ze.includes("Files")?t(22,j=!0):t(22,j=!1)},ge=()=>{t(22,j=!1)},se=async W=>{var Ne,Ze;if(W.preventDefault(),console.log(W),(Ne=W.dataTransfer)!=null&&Ne.files){const tt=Array.from((Ze=W.dataTransfer)==null?void 0:Ze.files);tt&&tt.length>0&&(console.log(tt),re(tt))}t(22,j=!1)};pn(async()=>{t(16,F=!0),window.setTimeout(()=>{const Ne=document.getElementById("chat-input");Ne==null||Ne.focus()},0),window.addEventListener("keydown",q),await xe();const W=document.getElementById("chat-container");W==null||W.addEventListener("dragover",ae),W==null||W.addEventListener("drop",se),W==null||W.addEventListener("dragleave",ge)}),ll(()=>{console.log("destroy"),window.removeEventListener("keydown",q);const W=document.getElementById("chat-container");W&&(W==null||W.removeEventListener("dragover",ae),W==null||W.removeEventListener("drop",se),W==null||W.removeEventListener("dragleave",ge))});const Oe=()=>{t(6,w=!0),Z()},Q=W=>a?a.find(Ne=>Ne.id===W):{id:W,name:W},fe=W=>W.id===g.id,Ce=()=>{t(0,g=void 0)};function Ge(W){We[W?"unshift":"push"](()=>{Y=W,t(20,Y)})}function Ke(W){I=W,t(1,I)}function ue(W){T=W,t(2,T)}const it=W=>{u("upload",W.detail)},at=W=>{const Ne=W.detail;(Ne==null?void 0:Ne.type)==="model"&&t(0,g=Ne.data);const Ze=document.getElementById("chat-input");Ze==null||Ze.focus()};function Yt(W){We[W?"unshift":"push"](()=>{D=W,t(19,D)})}function St(){P=this.files,t(21,P)}const _t=async()=>{if(P&&P.length>0){const W=Array.from(P);re(W)}else et.error(o.t("File not found."));t(19,D.value="",D)};function Rt(W){K=W,t(17,K)}const Tt=async()=>{var W;t(17,K=!1),await xe(),(W=document.getElementById("chat-input"))==null||W.focus()},pe=async W=>{var tt;const{text:Ne,filename:Ze}=W.detail;t(1,I=`${I}${Ne} `),t(17,K=!1),await xe(),(tt=document.getElementById("chat-input"))==null||tt.focus(),((n==null?void 0:n.speechAutoSend)??!1)&&u("submit",I)},je=W=>!X.includes(W),rt=W=>{T.splice(W,1),t(2,T)},he=async(W,Ne)=>{W.type!=="collection"&&!(W!=null&&W.collection)&&W.id&&await Lc(localStorage.token,W.id),T.splice(Ne,1),t(2,T)},wt=W=>{console.log(W)},dt=async W=>{(k.length===0||!k.at(0))&&et.error(o.t("Please select a model first."));const Ne=await Dc(localStorage.token,k.at(0),W,E!=null&&E.currentId?wn(E,E.currentId):null).catch(Ze=>(console.log(Ze),null));return console.log(Ne),Ne};function pt(W){We[W?"unshift":"push"](()=>{U=W,t(18,U)})}function De(W){I=W,t(1,I)}const Vt=async W=>{var tt;W=W.detail.event;const Ne=W.ctrlKey||W.metaKey,Ze=document.getElementById("commands-container");if(W.key==="Escape"&&b(),Ne&&W.key==="Enter"&&W.shiftKey&&(W.preventDefault(),p(I)),I===""&&Ne&&W.key.toLowerCase()==="r"){W.preventDefault(),console.log("regenerate");const Ye=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ye==null||Ye.click()}if(I===""&&W.key=="ArrowUp"){W.preventDefault();const Ye=[...document.getElementsByClassName("user-message")].at(-1);if(Ye){Ye.scrollIntoView({block:"center"});const st=[...document.getElementsByClassName("edit-user-message-button")].at(-1);st==null||st.click()}}if(Ze){if(Ze&&W.key==="ArrowUp"&&(W.preventDefault(),Y.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&W.key==="ArrowDown"&&(W.preventDefault(),Y.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&W.key==="Tab"){W.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ye==null||Ye.click()}if(Ze&&W.key==="Enter"){W.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ye?Ye==null||Ye.click():(tt=document.getElementById("send-message-button"))==null||tt.click()}}else(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(W.keyCode===13&&!W.shiftKey&&W.preventDefault(),I!==""&&W.keyCode===13&&!W.shiftKey&&u("submit",I));W.key==="Escape"&&(console.log("Escape"),t(0,g=void 0),t(3,S=[]),t(5,O=!1),t(4,A=!1))},de=async W=>{W=W.detail.event,console.log(W);const Ne=W.clipboardData||window.clipboardData;if(Ne&&Ne.items){for(const Ze of Ne.items)if(Ze.type.indexOf("image")!==-1){const tt=Ze.getAsFile(),Ye=new FileReader;Ye.onload=function(st){t(2,T=[...T,{type:"image",url:`${st.target.result}`}])},Ye.readAsDataURL(tt)}else if(Ze.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)){const tt=Ne.getData("text/plain");if(tt.length>hs){W.preventDefault();const Ye=new Blob([tt],{type:"text/plain"}),st=new File([Ye],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await L(st,!0)}}}};function Me(W){We[W?"unshift":"push"](()=>{U=W,t(18,U)})}function we(){I=this.value,t(1,I)}const Xe=W=>{(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(W.key==="Enter"&&!W.shiftKey&&W.preventDefault(),I!==""&&W.key==="Enter"&&!W.shiftKey&&u("submit",I))},ht=async W=>{var tt;const Ne=W.ctrlKey||W.metaKey,Ze=document.getElementById("commands-container");if(W.key==="Escape"&&b(),Ne&&W.key==="Enter"&&W.shiftKey&&(W.preventDefault(),p(I)),I===""&&Ne&&W.key.toLowerCase()==="r"){W.preventDefault(),console.log("regenerate");const Ye=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ye==null||Ye.click()}if(I===""&&W.key=="ArrowUp"){W.preventDefault();const Ye=[...document.getElementsByClassName("user-message")].at(-1),st=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(Ye),Ye.scrollIntoView({block:"center"}),st==null||st.click()}if(Ze&&W.key==="ArrowUp"&&(W.preventDefault(),Y.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&W.key==="ArrowDown"&&(W.preventDefault(),Y.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&W.key==="Enter"){W.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);W.shiftKey?t(1,I=`${I}
`):Ye?Ye==null||Ye.click():(tt=document.getElementById("send-message-button"))==null||tt.click()}if(Ze&&W.key==="Tab"){W.preventDefault();const Ye=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ye==null||Ye.click()}else if(W.key==="Tab"){const Ye=ac(I);if(Ye.length>0){const st=Ye.at(0),hn=I;t(1,I=I.substring(0,(st==null?void 0:st.endIndex)+1)),await xe(),W.target.scrollTop=W.target.scrollHeight,t(1,I=hn),await xe(),W.preventDefault(),W.target.setSelectionRange(st==null?void 0:st.startIndex,st.endIndex+1)}W.target.style.height="",W.target.style.height=Math.min(W.target.scrollHeight,320)+"px"}W.key==="Escape"&&(console.log("Escape"),t(0,g=void 0),t(3,S=[]),t(5,O=!1),t(4,A=!1))},yt=async W=>{W.target.style.height="",W.target.style.height=Math.min(W.target.scrollHeight,320)+"px"},It=async W=>{W.target.style.height="",W.target.style.height=Math.min(W.target.scrollHeight,320)+"px"},zt=async W=>{const Ne=W.clipboardData||window.clipboardData;if(Ne&&Ne.items){for(const Ze of Ne.items)if(Ze.type.indexOf("image")!==-1){const tt=Ze.getAsFile(),Ye=new FileReader;Ye.onload=function(st){t(2,T=[...T,{type:"image",url:`${st.target.result}`}])},Ye.readAsDataURL(tt)}else if(Ze.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)){const tt=Ne.getData("text/plain");if(tt.length>hs){W.preventDefault();const Ye=new Blob([tt],{type:"text/plain"}),st=new File([Ye],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await L(st,!0)}}}},Bt=()=>{D.click()},Nt=async()=>{try{const W=await xu();if(W){const Ne=new File([W.blob],W.name,{type:W.blob.type});await L(Ne)}else console.log("No file was selected from Google Drive")}catch(W){console.error("Google Drive Error:",W),et.error(o.t("Error accessing Google Drive: {{error}}",{error:W.message}))}},Xt=async()=>{await xe();const W=document.getElementById("chat-input");W==null||W.focus()};function At(W){S=W,t(3,S)}const on=()=>t(5,O=!O),fn=()=>t(4,A=!A),rn=()=>t(7,H=!H),dn=async()=>{try{let W=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(Ne){return et.error(o.t("Permission denied when accessing microphone: {{error}}",{error:Ne})),null});W&&(t(17,K=!0),W.getTracks().forEach(Ze=>Ze.stop())),W=null}catch{et.error(o.t("Permission denied when accessing microphone"))}},yn=async()=>{if(v.length>1){et.error(o.t("Select only one model to call"));return}if(s.audio.stt.engine==="web"){et.error(o.t("Call feature is not supported when using Web STT engine"));return}try{let W=await navigator.mediaDevices.getUserMedia({audio:!0});W&&W.getTracks().forEach(Ze=>Ze.stop()),W=null,kn.set(!0),Ut.set(!0)}catch{et.error(o.t("Permission denied when accessing media devices"))}},Ct=()=>{b()},tn=()=>{u("submit",I)};return l.$$set=W=>{"transparentBackground"in W&&t(8,h=W.transparentBackground),"onChange"in W&&t(36,d=W.onChange),"createMessagePair"in W&&t(9,p=W.createMessagePair),"stopResponse"in W&&t(10,b=W.stopResponse),"autoScroll"in W&&t(6,w=W.autoScroll),"atSelectedModel"in W&&t(0,g=W.atSelectedModel),"selectedModels"in W&&t(11,v=W.selectedModels),"history"in W&&t(12,E=W.history),"prompt"in W&&t(1,I=W.prompt),"files"in W&&t(2,T=W.files),"selectedToolIds"in W&&t(3,S=W.selectedToolIds),"imageGenerationEnabled"in W&&t(4,A=W.imageGenerationEnabled),"webSearchEnabled"in W&&t(5,O=W.webSearchEnabled),"codeInterpreterEnabled"in W&&t(7,H=W.codeInterpreterEnabled),"placeholder"in W&&t(13,G=W.placeholder)},l.$$.update=()=>{l.$$.dirty[0]&2049&&t(15,k=g!==void 0?[g.id]:v),l.$$.dirty[0]&62|l.$$.dirty[1]&32&&d({prompt:I,files:T,selectedToolIds:S,imageGenerationEnabled:A,webSearchEnabled:O}),l.$$.dirty[0]&18433&&t(23,X=[...g?[g]:v].filter(W=>{var Ne,Ze,tt,Ye;return((Ye=(tt=(Ze=(Ne=r.find(st=>st.id===W))==null?void 0:Ne.info)==null?void 0:Ze.meta)==null?void 0:tt.capabilities)==null?void 0:Ye.vision)??!0}))},[g,I,T,S,A,O,w,H,h,p,b,v,E,G,r,k,F,K,U,D,Y,P,j,X,n,o,s,i,a,c,u,f,Z,J,L,re,d,Oe,Q,fe,Ce,Ge,Ke,ue,it,at,Yt,St,_t,Rt,Tt,pe,je,rt,he,wt,dt,pt,De,Vt,de,Me,we,Xe,ht,yt,It,zt,Bt,Nt,Xt,At,on,fn,rn,dn,yn,Ct,tn]}class ea extends Le{constructor(e){super(),Re(this,e,gd,md,Fe,{transparentBackground:8,onChange:36,createMessagePair:9,stopResponse:10,autoScroll:6,atSelectedModel:0,selectedModels:11,history:12,prompt:1,files:2,selectedToolIds:3,imageGenerationEnabled:4,webSearchEnabled:5,codeInterpreterEnabled:7,placeholder:13},null,[-1,-1,-1])}}function ir(l,e,t){const n=l.slice();return n[12]=e[t],n[13]=e,n[14]=t,n}function _d(l){let e,t,n;return t=new Ot({props:{content:l[4].t("Remove Model"),$$slots:{default:[bd]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.content=o[4].t("Remove Model")),s&32771&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function pd(l){let e,t,n;return t=new Ot({props:{content:l[4].t("Add Model"),$$slots:{default:[vd]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.content=o[4].t("Add Model")),s&32771&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function bd(l){let e,t,n,o,s;function i(){return l[10](l[14])}return{c(){e=V("button"),t=Ve("svg"),n=Ve("path"),this.h()},l(r){e=z(r,"BUTTON",{"aria-label":!0});var a=M(e);t=ze(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=M(t);n=ze(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(n).forEach(_),c.forEach(_),a.forEach(_),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M19.5 12h-15"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3"),e.disabled=l[1],m(e,"aria-label","Remove Model")},m(r,a){B(r,e,a),y(e,t),y(t,n),o||(s=ke(e,"click",i),o=!0)},p(r,a){l=r,a&2&&(e.disabled=l[1])},d(r){r&&_(e),o=!1,s()}}}function vd(l){let e,t,n,o,s;return{c(){e=V("button"),t=Ve("svg"),n=Ve("path"),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-label":!0});var r=M(e);t=ze(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=M(t);n=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(n).forEach(_),a.forEach(_),r.forEach(_),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M12 6v12m6-6H6"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3.5"),m(e,"class",""),e.disabled=l[1],m(e,"aria-label","Add Model")},m(i,r){B(i,e,r),y(e,t),y(t,n),o||(s=ke(e,"click",l[9]),o=!0)},p(i,r){r&2&&(e.disabled=i[1])},d(i){i&&_(e),o=!1,s()}}}function ar(l){var w,g,v;let e,t,n,o,s,i,r,a,c,u;function f(k){l[8](k,l[12],l[13],l[14])}let h={id:`${l[14]}`,placeholder:l[4].t("Select a model"),items:l[3].map(ur),showTemporaryChatControl:l[5].role==="user"?((v=(g=(w=l[5])==null?void 0:w.permissions)==null?void 0:g.chat)==null?void 0:v.temporary)??!0:!0};l[12]!==void 0&&(h.value=l[12]),o=new tu({props:h}),We.push(()=>Je(o,"value",f));const d=[pd,_d],p=[];function b(k,E){return k[14]===0?0:1}return r=b(l),a=p[r]=d[r](l),{c(){e=V("div"),t=V("div"),n=V("div"),te(o.$$.fragment),i=$(),a.c(),c=$(),this.h()},l(k){e=z(k,"DIV",{class:!0});var E=M(e);t=z(E,"DIV",{class:!0});var I=M(t);n=z(I,"DIV",{class:!0});var T=M(n);oe(o.$$.fragment,T),T.forEach(_),I.forEach(_),i=ee(E),a.l(E),c=ee(E),E.forEach(_),this.h()},h(){m(n,"class","mr-1 max-w-full"),m(t,"class","overflow-hidden w-full"),m(e,"class","flex w-full max-w-fit")},m(k,E){B(k,e,E),y(e,t),y(t,n),ne(o,n,null),y(e,i),p[r].m(e,null),y(e,c),u=!0},p(k,E){var T,S,A;l=k;const I={};E&16&&(I.placeholder=l[4].t("Select a model")),E&8&&(I.items=l[3].map(ur)),E&32&&(I.showTemporaryChatControl=l[5].role==="user"?((A=(S=(T=l[5])==null?void 0:T.permissions)==null?void 0:S.chat)==null?void 0:A.temporary)??!0:!0),!s&&E&1&&(s=!0,I.value=l[12],qe(()=>s=!1)),o.$set(I),a.p(l,E)},i(k){u||(C(o.$$.fragment,k),C(a),u=!0)},o(k){N(o.$$.fragment,k),N(a),u=!1},d(k){k&&_(e),le(o),p[r].d()}}}function cr(l){let e,t,n=l[4].t("Set as default")+"",o,s,i;return{c(){e=V("div"),t=V("button"),o=Ie(n),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);t=z(a,"BUTTON",{});var c=M(t);o=Se(c,n),c.forEach(_),a.forEach(_),this.h()},h(){m(e,"class","absolute text-left mt-[1px] ml-1 text-[0.7rem] text-gray-500 font-primary")},m(r,a){B(r,e,a),y(e,t),y(t,o),s||(i=ke(t,"click",l[7]),s=!0)},p(r,a){a&16&&n!==(n=r[4].t("Set as default")+"")&&Te(o,n)},d(r){r&&_(e),s=!1,i()}}}function wd(l){let e,t,n,o,s=vt(l[0]),i=[];for(let c=0;c<s.length;c+=1)i[c]=ar(ir(l,s,c));const r=c=>N(i[c],1,1,()=>{i[c]=null});let a=l[2]&&cr(l);return{c(){e=V("div");for(let c=0;c<i.length;c+=1)i[c].c();t=$(),a&&a.c(),n=Ae(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=M(e);for(let f=0;f<i.length;f+=1)i[f].l(u);u.forEach(_),t=ee(c),a&&a.l(c),n=Ae(),this.h()},h(){m(e,"class","flex flex-col w-full items-start")},m(c,u){B(c,e,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);B(c,t,u),a&&a.m(c,u),B(c,n,u),o=!0},p(c,[u]){if(u&59){s=vt(c[0]);let f;for(f=0;f<s.length;f+=1){const h=ir(c,s,f);i[f]?(i[f].p(h,u),C(i[f],1)):(i[f]=ar(h),i[f].c(),C(i[f],1),i[f].m(e,null))}for(He(),f=s.length;f<i.length;f+=1)r(f);Be()}c[2]?a?a.p(c,u):(a=cr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(c){if(!o){for(let u=0;u<s.length;u+=1)C(i[u]);o=!0}},o(c){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)N(i[u]);o=!1},d(c){c&&(_(e),_(t),_(n)),Dn(i,c),a&&a.d(c)}}}const ur=l=>({value:l.id,label:l.name,model:l});function kd(l,e,t){let n,o,s,i;ce(l,dl,b=>t(3,n=b)),ce(l,Zn,b=>t(11,s=b)),ce(l,xn,b=>t(5,i=b));const r=Wt("i18n");ce(l,r,b=>t(4,o=b));let{selectedModels:a=[""]}=e,{disabled:c=!1}=e,{showSetDefault:u=!0}=e;const f=async()=>{if(a.filter(w=>w==="").length){et.error(o.t("Choose a model before saving..."));return}Zn.set({...s,models:a}),await Cc(localStorage.token,{ui:s}),et.success(o.t("Default model updated"))};function h(b,w,g,v){g[v]=b,t(0,a),t(3,n)}const d=()=>{t(0,a=[...a,""])},p=b=>{a.splice(b,1),t(0,a),t(3,n)};return l.$$set=b=>{"selectedModels"in b&&t(0,a=b.selectedModels),"disabled"in b&&t(1,c=b.disabled),"showSetDefault"in b&&t(2,u=b.showSetDefault)},l.$$.update=()=>{l.$$.dirty&9&&a.length>0&&n.length>0&&t(0,a=a.map(b=>n.map(w=>w.id).includes(b)?b:""))},[a,c,u,n,o,i,r,f,h,d,p]}class yd extends Le{constructor(e){super(),Re(this,e,kd,wd,Fe,{selectedModels:0,disabled:1,showSetDefault:2})}}function Ed(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Id(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}let Sd=class extends Le{constructor(e){super(),Re(this,e,Id,Ed,Fe,{className:0,strokeWidth:1})}};function Cd(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var o=M(e);t=ze(o,"path",{d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"stroke","currentColor"),m(e,"fill","currentColor"),m(e,"class",l[0]),m(e,"stroke-width",l[1])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:ye,o:ye,d(n){n&&_(e)}}}function Dd(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class ts extends Le{constructor(e){super(),Re(this,e,Dd,Cd,Fe,{className:0,strokeWidth:1})}}function Md(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Td(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Vd extends Le{constructor(e){super(),Re(this,e,Td,Md,Fe,{className:0,strokeWidth:1})}}function zd(l){let e;const t=l[13].default,n=Gt(t,l,l[23],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8388608)&&qt(n,t,o,o[23],e?Qt(t,o[23],s,null):Jt(o[23]),null)},i(o){e||(C(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function fr(l){let e,t;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-controls-button",$$slots:{default:[Nd]},$$scope:{ctx:l}}}),e.$on("click",l[14]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Nd(l){let e,t,n,o=l[5].t("Controls")+"",s,i;return e=new ts({props:{className:" size-4",strokeWidth:"0.5"}}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Controls")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function dr(l){let e,t;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Pd]},$$scope:{ctx:l}}}),e.$on("click",l[15]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Pd(l){let e,t,n,o,s=l[5].t("Share")+"",i;return{c(){e=Ve("svg"),t=Ve("path"),n=$(),o=V("div"),i=Ie(s),this.h()},l(r){e=ze(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=M(e);t=ze(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(t).forEach(_),a.forEach(_),n=ee(r),o=z(r,"DIV",{class:!0});var c=M(o);i=Se(c,s),c.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(r,a){B(r,e,a),y(e,t),B(r,n,a),B(r,o,a),y(o,i)},p(r,a){a&32&&s!==(s=r[5].t("Share")+"")&&Te(i,s)},d(r){r&&(_(e),_(n),_(o))}}}function Od(l){let e,t,n,o=l[5].t("Overview")+"",s,i;return e=new Sd({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Overview")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function Hd(l){let e,t,n,o=l[5].t("Artifacts")+"",s,i;return e=new Vd({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Artifacts")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function Bd(l){let e,t,n,o,s=l[5].t("Download")+"",i;return{c(){e=Ve("svg"),t=Ve("path"),n=$(),o=V("div"),i=Ie(s),this.h()},l(r){e=ze(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=M(e);t=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),a.forEach(_),n=ee(r),o=z(r,"DIV",{class:!0});var c=M(o);i=Se(c,s),c.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(r,a){B(r,e,a),y(e,t),B(r,n,a),B(r,o,a),y(o,i)},p(r,a){a&32&&s!==(s=r[5].t("Download")+"")&&Te(i,s)},d(r){r&&(_(e),_(n),_(o))}}}function Ad(l){let e,t=l[5].t("Export chat (.json)")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Export chat (.json)")+"")&&Te(n,t)},d(o){o&&_(e)}}}function Ld(l){let e,t=l[5].t("Plain text (.txt)")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Plain text (.txt)")+"")&&Te(n,t)},d(o){o&&_(e)}}}function Rd(l){let e,t=l[5].t("PDF document (.pdf)")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&32&&t!==(t=o[5].t("PDF document (.pdf)")+"")&&Te(n,t)},d(o){o&&_(e)}}}function Ud(l){let e,t,n,o,s,i;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ad]},$$scope:{ctx:l}}}),e.$on("click",l[18]),n=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ld]},$$scope:{ctx:l}}}),n.$on("click",l[19]),s=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Rd]},$$scope:{ctx:l}}}),s.$on("click",l[20]),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment),o=$(),te(s.$$.fragment)},l(r){oe(e.$$.fragment,r),t=ee(r),oe(n.$$.fragment,r),o=ee(r),oe(s.$$.fragment,r)},m(r,a){ne(e,r,a),B(r,t,a),ne(n,r,a),B(r,o,a),ne(s,r,a),i=!0},p(r,a){const c={};a&8388640&&(c.$$scope={dirty:a,ctx:r}),e.$set(c);const u={};a&8388640&&(u.$$scope={dirty:a,ctx:r}),n.$set(u);const f={};a&8388640&&(f.$$scope={dirty:a,ctx:r}),s.$set(f)},i(r){i||(C(e.$$.fragment,r),C(n.$$.fragment,r),C(s.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),N(n.$$.fragment,r),N(s.$$.fragment,r),i=!1},d(r){r&&(_(t),_(o)),le(e,r),le(n,r),le(s,r)}}}function Wd(l){let e,t,n,o;return e=new wc({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Bd]},$$scope:{ctx:l}}}),n=new kc({props:{class:"w-full rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Xl,sideOffset:8,$$slots:{default:[Ud]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=ee(s),oe(n.$$.fragment,s)},m(s,i){ne(e,s,i),B(s,t,i),ne(n,s,i),o=!0},p(s,i){const r={};i&8388640&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const a={};i&8388640&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),le(e,s),le(n,s)}}}function Fd(l){let e,t,n,o=l[5].t("Copy")+"",s,i;return e=new Gc({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Copy")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function hr(l){let e,t,n,o,s;return o=new yc({props:{chatId:l[1].id}}),{c(){e=V("hr"),t=$(),n=V("div"),te(o.$$.fragment),this.h()},l(i){e=z(i,"HR",{class:!0}),t=ee(i),n=z(i,"DIV",{class:!0});var r=M(n);oe(o.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","border-gray-50 dark:border-gray-850 my-0.5"),m(n,"class","flex p-1")},m(i,r){B(i,e,r),B(i,t,r),B(i,n,r),ne(o,n,null),s=!0},p(i,r){const a={};r&2&&(a.chatId=i[1].id),o.$set(a)},i(i){s||(C(o.$$.fragment,i),s=!0)},o(i){N(o.$$.fragment,i),s=!1},d(i){i&&(_(e),_(t),_(n)),le(o)}}}function jd(l){let e,t,n,o,s,i,r,a,c,u,f,h,d=l[4]&&fr(l),p=!l[3]&&dr(l);n=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[Od]},$$scope:{ctx:l}}}),n.$on("click",l[16]),s=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[Hd]},$$scope:{ctx:l}}}),s.$on("click",l[17]),r=new vc({props:{$$slots:{default:[Wd]},$$scope:{ctx:l}}}),c=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-copy-button",$$slots:{default:[Fd]},$$scope:{ctx:l}}}),c.$on("click",l[21]);let b=!l[3]&&hr(l);return{c(){d&&d.c(),e=$(),p&&p.c(),t=$(),te(n.$$.fragment),o=$(),te(s.$$.fragment),i=$(),te(r.$$.fragment),a=$(),te(c.$$.fragment),u=$(),b&&b.c(),f=Ae()},l(w){d&&d.l(w),e=ee(w),p&&p.l(w),t=ee(w),oe(n.$$.fragment,w),o=ee(w),oe(s.$$.fragment,w),i=ee(w),oe(r.$$.fragment,w),a=ee(w),oe(c.$$.fragment,w),u=ee(w),b&&b.l(w),f=Ae()},m(w,g){d&&d.m(w,g),B(w,e,g),p&&p.m(w,g),B(w,t,g),ne(n,w,g),B(w,o,g),ne(s,w,g),B(w,i,g),ne(r,w,g),B(w,a,g),ne(c,w,g),B(w,u,g),b&&b.m(w,g),B(w,f,g),h=!0},p(w,g){w[4]?d?(d.p(w,g),g&16&&C(d,1)):(d=fr(w),d.c(),C(d,1),d.m(e.parentNode,e)):d&&(He(),N(d,1,1,()=>{d=null}),Be()),w[3]?p&&(He(),N(p,1,1,()=>{p=null}),Be()):p?(p.p(w,g),g&8&&C(p,1)):(p=dr(w),p.c(),C(p,1),p.m(t.parentNode,t));const v={};g&8388640&&(v.$$scope={dirty:g,ctx:w}),n.$set(v);const k={};g&8388640&&(k.$$scope={dirty:g,ctx:w}),s.$set(k);const E={};g&8388640&&(E.$$scope={dirty:g,ctx:w}),r.$set(E);const I={};g&8388640&&(I.$$scope={dirty:g,ctx:w}),c.$set(I),w[3]?b&&(He(),N(b,1,1,()=>{b=null}),Be()):b?(b.p(w,g),g&8&&C(b,1)):(b=hr(w),b.c(),C(b,1),b.m(f.parentNode,f))},i(w){h||(C(d),C(p),C(n.$$.fragment,w),C(s.$$.fragment,w),C(r.$$.fragment,w),C(c.$$.fragment,w),C(b),h=!0)},o(w){N(d),N(p),N(n.$$.fragment,w),N(s.$$.fragment,w),N(r.$$.fragment,w),N(c.$$.fragment,w),N(b),h=!1},d(w){w&&(_(e),_(t),_(o),_(i),_(a),_(u),_(f)),d&&d.d(w),p&&p.d(w),le(n,w),le(s,w),le(r,w),le(c,w),b&&b.d(w)}}}function Yd(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Xl,$$slots:{default:[jd]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&8388667&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function Xd(l){let e,t;return e=new yo({props:{$$slots:{content:[Yd],default:[zd]},$$scope:{ctx:l}}}),e.$on("change",l[22]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&8388667&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Kd(l,e,t){let n,o,s;ce(l,ko,K=>t(3,n=K)),ce(l,wo,K=>t(4,o=K));let{$$slots:i={},$$scope:r}=e;const{saveAs:a}=nu,c=Wt("i18n");ce(l,c,K=>t(5,s=K));let{shareEnabled:u=!1}=e,{shareHandler:f}=e,{downloadHandler:h}=e,{chat:d}=e,{onClose:p=()=>{}}=e;const b=async()=>{const K=d.chat.history;return wn(K,K.currentId).reduce((Y,P,j,G)=>`${Y}### ${P.role.toUpperCase()}
${P.content}

`,"").trim()},w=async()=>{const K=await b();let U=new Blob([K],{type:"text/plain"});a(U,`chat-${d.chat.title}.txt`)},g=async()=>{const K=d.chat.history,U=wn(K,K.currentId),D=await lu(d.chat.title,U),Y=window.URL.createObjectURL(D),P=document.createElement("a");P.href=Y,P.download=`chat-${d.chat.title}.pdf`,document.body.appendChild(P),P.click(),document.body.removeChild(P),window.URL.revokeObjectURL(Y)},v=async()=>{if(d.id){let K=null;d.id==="local"||n?K=d:K=await Ko(localStorage.token,d.id);let U=new Blob([JSON.stringify([K])],{type:"application/json"});a(U,`chat-export-${Date.now()}.json`)}},k=async()=>{await Ut.set(!0),await Gn.set(!1),await jn.set(!1)},E=()=>{f()},I=async()=>{await Ut.set(!0),await Gn.set(!0),await jn.set(!1)},T=async()=>{await Ut.set(!0),await jn.set(!0),await Gn.set(!1)},S=()=>{v()},A=()=>{w()},O=()=>{g()},H=async()=>{await xo(await b()).catch(U=>{console.error(U)})&&et.success(s.t("Copied to clipboard"))},F=K=>{K.detail===!1&&p()};return l.$$set=K=>{"shareEnabled"in K&&t(11,u=K.shareEnabled),"shareHandler"in K&&t(0,f=K.shareHandler),"downloadHandler"in K&&t(12,h=K.downloadHandler),"chat"in K&&t(1,d=K.chat),"onClose"in K&&t(2,p=K.onClose),"$$scope"in K&&t(23,r=K.$$scope)},[f,d,p,n,o,s,c,b,w,g,v,u,h,i,k,E,I,T,S,A,O,H,F,r]}class Zd extends Le{constructor(e){super(),Re(this,e,Kd,Xd,Fe,{shareEnabled:11,shareHandler:0,downloadHandler:12,chat:1,onClose:2})}}function mr(l){let e,t,n;function o(i){l[18](i)}let s={showSetDefault:!l[2]};return l[0]!==void 0&&(s.selectedModels=l[0]),e=new yd({props:s}),We.push(()=>Je(e,"selectedModels",o)),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),n=!0},p(i,r){const a={};r&4&&(a.showSetDefault=!i[2]),!t&&r&1&&(t=!0,a.selectedModels=i[0],qe(()=>t=!1)),e.$set(a)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Gd(l){let e,t;return e=new Ot({props:{content:l[12].t("Controls"),$$slots:{default:[Jd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.content=n[12].t("Controls")),o&67117056&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function qd(l){let e,t;return e=new Zd({props:{chat:l[3],shareEnabled:l[2],shareHandler:l[19],downloadHandler:l[20],$$slots:{default:[Qd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.chat=n[3]),o&4&&(s.shareEnabled=n[2]),o&32&&(s.shareHandler=n[19]),o&64&&(s.downloadHandler=n[20]),o&67108864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Jd(l){let e,t,n,o,s,i;return n=new ts({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=V("button"),t=V("div"),te(n.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0,"aria-label":!0});var a=M(e);t=z(a,"DIV",{class:!0});var c=M(t);oe(n.$$.fragment,c),c.forEach(_),a.forEach(_),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","Controls")},m(r,a){B(r,e,a),y(e,t),ne(n,t,null),o=!0,s||(i=ke(e,"click",l[21]),s=!0)},p:ye,i(r){o||(C(n.$$.fragment,r),o=!0)},o(r){N(n.$$.fragment,r),o=!1},d(r){r&&_(e),le(n),s=!1,i()}}}function Qd(l){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ut(e)!=="svelte-xd5mtd"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"id","chat-context-menu-button")},m(n,o){B(n,e,o)},p:ye,d(n){n&&_(e)}}}function gr(l){let e,t;return e=new Ot({props:{content:l[12].t("Controls"),$$slots:{default:[xd]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.content=n[12].t("Controls")),o&67117056&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function xd(l){let e,t,n,o,s,i;return n=new ts({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=V("button"),t=V("div"),te(n.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0,"aria-label":!0});var a=M(e);t=z(a,"DIV",{class:!0});var c=M(t);oe(n.$$.fragment,c),c.forEach(_),a.forEach(_),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","Controls")},m(r,a){B(r,e,a),y(e,t),ne(n,t,null),o=!0,s||(i=ke(e,"click",l[22]),s=!0)},p:ye,i(r){o||(C(n.$$.fragment,r),o=!0)},o(r){N(n.$$.fragment,r),o=!1},d(r){r&&_(e),le(n),s=!1,i()}}}function $d(l){let e,t,n,o,s,i,r;return n=new Ic({props:{className:" size-5",strokeWidth:"2"}}),{c(){e=V("button"),t=V("div"),te(n.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{id:!0,class:!0,"aria-label":!0});var c=M(e);t=z(c,"DIV",{class:!0});var u=M(t);oe(n.$$.fragment,u),u.forEach(_),c.forEach(_),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"id","new-chat-button"),m(e,"class",o="flex "+(l[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","New Chat")},m(a,c){B(a,e,c),y(e,t),ne(n,t,null),s=!0,i||(r=ke(e,"click",l[23]),i=!0)},p(a,c){(!s||c&256&&o!==(o="flex "+(a[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"))&&m(e,"class",o)},i(a){s||(C(n.$$.fragment,a),s=!0)},o(a){N(n.$$.fragment,a),s=!1},d(a){a&&_(e),le(n),i=!1,r()}}}function _r(l){let e,t;return e=new ou({props:{className:"max-w-[200px]",role:l[11].role,$$slots:{default:[eh]},$$scope:{ctx:l}}}),e.$on("show",l[24]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&2048&&(s.role=n[11].role),o&67110912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function eh(l){let e,t,n,o;return{c(){e=V("button"),t=V("div"),n=V("img"),this.h()},l(s){e=z(s,"BUTTON",{class:!0,"aria-label":!0});var i=M(e);t=z(i,"DIV",{class:!0});var r=M(t);n=z(r,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),r.forEach(_),i.forEach(_),this.h()},h(){Qn(n.src,o=l[11].profile_image_url)||m(n,"src",o),m(n,"class","size-6 object-cover rounded-full"),m(n,"alt","User profile"),m(n,"draggable","false"),m(t,"class","self-center"),m(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","User Menu")},m(s,i){B(s,e,i),y(e,t),y(t,n)},p(s,i){i&2048&&!Qn(n.src,o=s[11].profile_image_url)&&m(n,"src",o)},d(s){s&&_(e)}}}function th(l){var Z,J;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E,I,T,S,A,O,H,F;function K(L){l[16](L)}let U={chatId:l[7]};l[5]!==void 0&&(U.show=l[5]),e=new Ec({props:U}),We.push(()=>Je(e,"show",K)),h=new su({});let D=l[4]&&mr(l);const Y=[qd,Gd],P=[];function j(L,re){var q,ae;return L[2]&&L[3]&&(L[3].id||L[9])?0:L[10]&&(L[11].role==="admin"||(ae=(q=L[11])==null?void 0:q.permissions.chat)!=null&&ae.controls)?1:-1}~(k=j(l))&&(E=P[k]=Y[k](l));let G=!l[10]&&(l[11].role==="admin"||((J=(Z=l[11])==null?void 0:Z.permissions.chat)==null?void 0:J.controls))&&gr(l);S=new Ot({props:{content:l[12].t("New Chat"),$$slots:{default:[$d]},$$scope:{ctx:l}}});let X=l[11]!==void 0&&_r(l);return{c(){te(e.$$.fragment),n=$(),o=V("nav"),s=V("div"),i=$(),r=V("div"),a=V("div"),c=V("div"),u=V("button"),f=V("div"),te(h.$$.fragment),p=$(),b=V("div"),D&&D.c(),g=$(),v=V("div"),E&&E.c(),I=$(),G&&G.c(),T=$(),te(S.$$.fragment),A=$(),X&&X.c(),this.h()},l(L){oe(e.$$.fragment,L),n=ee(L),o=z(L,"NAV",{class:!0});var re=M(o);s=z(re,"DIV",{class:!0}),M(s).forEach(_),i=ee(re),r=z(re,"DIV",{class:!0});var q=M(r);a=z(q,"DIV",{class:!0});var ae=M(a);c=z(ae,"DIV",{class:!0});var ge=M(c);u=z(ge,"BUTTON",{id:!0,class:!0,"aria-label":!0});var se=M(u);f=z(se,"DIV",{class:!0});var Oe=M(f);oe(h.$$.fragment,Oe),Oe.forEach(_),se.forEach(_),ge.forEach(_),p=ee(ae),b=z(ae,"DIV",{class:!0});var Q=M(b);D&&D.l(Q),Q.forEach(_),g=ee(ae),v=z(ae,"DIV",{class:!0});var fe=M(v);E&&E.l(fe),I=ee(fe),G&&G.l(fe),T=ee(fe),oe(S.$$.fragment,fe),A=ee(fe),X&&X.l(fe),fe.forEach(_),ae.forEach(_),q.forEach(_),re.forEach(_),this.h()},h(){m(s,"class","bg-gradient-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1] blur"),m(f,"class","m-auto self-center"),m(u,"id","sidebar-toggle-button"),m(u,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(u,"aria-label","Toggle Sidebar"),m(c,"class",d=(l[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(b,"class",w="flex-1 overflow-hidden max-w-full py-0.5 "+(l[8]?"ml-1":"")),m(v,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(a,"class","flex items-center w-full max-w-full"),m(r,"class","flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent"),m(o,"class","sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region")},m(L,re){ne(e,L,re),B(L,n,re),B(L,o,re),y(o,s),y(o,i),y(o,r),y(r,a),y(a,c),y(c,u),y(u,f),ne(h,f,null),y(a,p),y(a,b),D&&D.m(b,null),y(a,g),y(a,v),~k&&P[k].m(v,null),y(v,I),G&&G.m(v,null),y(v,T),ne(S,v,null),y(v,A),X&&X.m(v,null),O=!0,H||(F=ke(u,"click",l[17]),H=!0)},p(L,[re]){var se,Oe;const q={};re&128&&(q.chatId=L[7]),!t&&re&32&&(t=!0,q.show=L[5],qe(()=>t=!1)),e.$set(q),(!O||re&256&&d!==(d=(L[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&m(c,"class",d),L[4]?D?(D.p(L,re),re&16&&C(D,1)):(D=mr(L),D.c(),C(D,1),D.m(b,null)):D&&(He(),N(D,1,1,()=>{D=null}),Be()),(!O||re&256&&w!==(w="flex-1 overflow-hidden max-w-full py-0.5 "+(L[8]?"ml-1":"")))&&m(b,"class",w);let ae=k;k=j(L),k===ae?~k&&P[k].p(L,re):(E&&(He(),N(P[ae],1,1,()=>{P[ae]=null}),Be()),~k?(E=P[k],E?E.p(L,re):(E=P[k]=Y[k](L),E.c()),C(E,1),E.m(v,I)):E=null),!L[10]&&(L[11].role==="admin"||(Oe=(se=L[11])==null?void 0:se.permissions.chat)!=null&&Oe.controls)?G?(G.p(L,re),re&3072&&C(G,1)):(G=gr(L),G.c(),C(G,1),G.m(v,T)):G&&(He(),N(G,1,1,()=>{G=null}),Be());const ge={};re&4096&&(ge.content=L[12].t("New Chat")),re&67109122&&(ge.$$scope={dirty:re,ctx:L}),S.$set(ge),L[11]!==void 0?X?(X.p(L,re),re&2048&&C(X,1)):(X=_r(L),X.c(),C(X,1),X.m(v,null)):X&&(He(),N(X,1,1,()=>{X=null}),Be())},i(L){O||(C(e.$$.fragment,L),C(h.$$.fragment,L),C(D),C(E),C(G),C(S.$$.fragment,L),C(X),O=!0)},o(L){N(e.$$.fragment,L),N(h.$$.fragment,L),N(D),N(E),N(G),N(S.$$.fragment,L),N(X),O=!1},d(L){L&&(_(n),_(o)),le(e,L),le(h),D&&D.d(),~k&&P[k].d(),G&&G.d(),le(S),X&&X.d(),H=!1,F()}}}function nh(l,e,t){let n,o,s,i,r,a,c,u;ce(l,Yi,U=>t(25,n=U)),ce(l,cl,U=>t(7,o=U)),ce(l,Xo,U=>t(8,s=U)),ce(l,ko,U=>t(9,i=U)),ce(l,wo,U=>t(10,r=U)),ce(l,xn,U=>t(11,a=U)),ce(l,Ut,U=>t(13,u=U));const f=Wt("i18n");ce(l,f,U=>t(12,c=U));let{initNewChat:h}=e,{title:d=n}=e,{shareEnabled:p=!1}=e,{chat:b}=e,{selectedModels:w}=e,{showModelSelector:g=!0}=e,v=!1,k=!1;function E(U){v=U,t(5,v)}const I=()=>{Xo.set(!s)};function T(U){w=U,t(0,w)}const S=()=>{t(5,v=!v)},A=()=>{t(6,k=!k)},O=async()=>{await Ut.set(!u)},H=async()=>{await Ut.set(!u)},F=()=>{h()},K=U=>{U.detail==="archived-chat"&&Ja.set(!0)};return l.$$set=U=>{"initNewChat"in U&&t(1,h=U.initNewChat),"title"in U&&t(15,d=U.title),"shareEnabled"in U&&t(2,p=U.shareEnabled),"chat"in U&&t(3,b=U.chat),"selectedModels"in U&&t(0,w=U.selectedModels),"showModelSelector"in U&&t(4,g=U.showModelSelector)},[w,h,p,b,g,v,k,o,s,i,r,a,c,u,f,d,E,I,T,S,A,O,H,F,K]}class lh extends Le{constructor(e){super(),Re(this,e,nh,th,Fe,{initNewChat:1,title:15,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function Ht(l){if(typeof l=="string"||typeof l=="number")return""+l;let e="";if(Array.isArray(l))for(let t=0,n;t<l.length;t++)(n=Ht(l[t]))!==""&&(e+=(e&&" ")+n);else for(let t in l)l[t]&&(e+=(e&&" ")+t);return e}const Kl={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:l=>`Node type "${l}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:l=>`The old edge with id=${l} does not exist.`,error009:l=>`Marker type "${l}" doesn't exist.`,error008:(l,{id:e,sourceHandle:t,targetHandle:n})=>`Couldn't create edge for ${l} handle id: "${l==="source"?t:n}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:l=>`Edge type "${l}" not found. Using fallback type "default".`,error012:l=>`Node with id "${l}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(l="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${l}/dist/style.css' or base.css to make sure everything is working properly.`},uo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var fl;(function(l){l.Strict="strict",l.Loose="loose"})(fl||(fl={}));var Yn;(function(l){l.Free="free",l.Vertical="vertical",l.Horizontal="horizontal"})(Yn||(Yn={}));var fo;(function(l){l.Partial="partial",l.Full="full"})(fo||(fo={}));const Go={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var El;(function(l){l.Bezier="default",l.Straight="straight",l.Step="step",l.SmoothStep="smoothstep",l.SimpleBezier="simplebezier"})(El||(El={}));var ho;(function(l){l.Arrow="arrow",l.ArrowClosed="arrowclosed"})(ho||(ho={}));var ot;(function(l){l.Left="left",l.Top="top",l.Right="right",l.Bottom="bottom"})(ot||(ot={}));const pr={[ot.Left]:ot.Right,[ot.Right]:ot.Left,[ot.Top]:ot.Bottom,[ot.Bottom]:ot.Top};function oh(l,e){if(!l&&!e)return!0;if(!l||!e||l.size!==e.size)return!1;if(!l.size&&!e.size)return!0;for(const t of l.keys())if(!e.has(t))return!1;return!0}function br(l,e,t){if(!t)return;const n=[];l.forEach((o,s)=>{e!=null&&e.has(s)||n.push(o)}),n.length&&t(n)}function vr(l){return l===null?null:l?"valid":"invalid"}const sh=l=>"id"in l&&"source"in l&&"target"in l,rh=l=>"id"in l&&"position"in l&&!("source"in l)&&!("target"in l),ns=l=>"id"in l&&"internals"in l&&!("source"in l)&&!("target"in l),Co=(l,e=[0,0])=>{const{width:t,height:n}=Vl(l),o=l.origin??e,s=t*o[0],i=n*o[1];return{x:l.position.x-s,y:l.position.y-i}},ih=(l,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(l.length===0)return{x:0,y:0,width:0,height:0};const t=l.reduce((n,o)=>{const s=typeof o=="string";let i=!e.nodeLookup&&!s?o:void 0;e.nodeLookup&&(i=s?e.nodeLookup.get(o):ns(o)?o:e.nodeLookup.get(o.id));const r=i?mo(i,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Mo(n,r)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return To(t)},Do=(l,e={})=>{if(l.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return l.forEach(n=>{if(e.filter===void 0||e.filter(n)){const o=mo(n);t=Mo(t,o)}}),To(t)},ta=(l,e,[t,n,o]=[0,0,1],s=!1,i=!1)=>{const r={...Zl(e,[t,n,o]),width:e.width/o,height:e.height/o},a=[];for(const c of l.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=c;if(i&&!f||h)continue;const d=u.width??c.width??c.initialWidth??null,p=u.height??c.height??c.initialHeight??null,b=Ul(r,Ml(c)),w=(d??0)*(p??0),g=s&&b>0;(!c.internals.handleBounds||g||b>=w||c.dragging)&&a.push(c)}return a},qo=(l,e)=>{const t=new Set;return l.forEach(n=>{t.add(n.id)}),e.filter(n=>t.has(n.source)||t.has(n.target))};function wr(l,e){const t=new Map,n=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return l.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!n||n.has(o.id))&&t.set(o.id,o)}),t}async function kr({nodes:l,width:e,height:t,panZoom:n,minZoom:o,maxZoom:s},i){if(l.size===0)return Promise.resolve(!1);const r=Do(l),a=os(r,e,t,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??s,(i==null?void 0:i.padding)??.1);return await n.setViewport(a,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function ah({nodeId:l,nextPosition:e,nodeLookup:t,nodeOrigin:n=[0,0],nodeExtent:o,onError:s}){const i=t.get(l),r=i.parentId?t.get(i.parentId):void 0,{x:a,y:c}=r?r.internals.positionAbsolute:{x:0,y:0},u=i.origin??n;let f=o;if(i.extent==="parent"&&!i.expandParent)if(!r)s==null||s("005",Kl.error005());else{const d=r.measured.width,p=r.measured.height;d&&p&&(f=[[a,c],[a+d,c+p]])}else r&&Wl(i.extent)&&(f=[[i.extent[0][0]+a,i.extent[0][1]+c],[i.extent[1][0]+a,i.extent[1][1]+c]]);const h=Wl(f)?Dl(e,f,i.measured):e;return{position:{x:h.x-a+i.measured.width*u[0],y:h.y-c+i.measured.height*u[1]},positionAbsolute:h}}async function na({nodesToRemove:l=[],edgesToRemove:e=[],nodes:t,edges:n,onBeforeDelete:o}){const s=new Set(l.map(h=>h.id)),i=[];for(const h of t){if(h.deletable===!1)continue;const d=s.has(h.id),p=!d&&h.parentId&&i.find(b=>b.id===h.parentId);(d||p)&&i.push(h)}const r=new Set(e.map(h=>h.id)),a=n.filter(h=>h.deletable!==!1),u=qo(i,a);for(const h of a)r.has(h.id)&&!u.find(p=>p.id===h.id)&&u.push(h);if(!o)return{edges:u,nodes:i};const f=await o({nodes:i,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:i}:{edges:[],nodes:[]}:f}const Cl=(l,e=0,t=1)=>Math.min(Math.max(l,e),t),Dl=(l={x:0,y:0},e,t)=>({x:Cl(l.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:Cl(l.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function la(l,e,t){const{width:n,height:o}=Vl(t),{x:s,y:i}=t.internals.positionAbsolute;return Dl(l,[[s,i],[s+n,i+o]],e)}const yr=(l,e,t)=>l<e?Cl(Math.abs(l-e),1,e)/e:l>t?-Cl(Math.abs(l-t),1,e)/e:0,oa=(l,e,t=15,n=40)=>{const o=yr(l.x,n,e.width-n)*t,s=yr(l.y,n,e.height-n)*t;return[o,s]},Mo=(l,e)=>({x:Math.min(l.x,e.x),y:Math.min(l.y,e.y),x2:Math.max(l.x2,e.x2),y2:Math.max(l.y2,e.y2)}),Jo=({x:l,y:e,width:t,height:n})=>({x:l,y:e,x2:l+t,y2:e+n}),To=({x:l,y:e,x2:t,y2:n})=>({x:l,y:e,width:t-l,height:n-e}),Ml=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=ns(l)?l.internals.positionAbsolute:Co(l,e);return{x:t,y:n,width:((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0,height:((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0}},mo=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=ns(l)?l.internals.positionAbsolute:Co(l,e);return{x:t,y:n,x2:t+(((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0),y2:n+(((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0)}},ch=(l,e)=>To(Mo(Jo(l),Jo(e))),Ul=(l,e)=>{const t=Math.max(0,Math.min(l.x+l.width,e.x+e.width)-Math.max(l.x,e.x)),n=Math.max(0,Math.min(l.y+l.height,e.y+e.height)-Math.max(l.y,e.y));return Math.ceil(t*n)},Er=l=>Hn(l.width)&&Hn(l.height)&&Hn(l.x)&&Hn(l.y),Hn=l=>!isNaN(l)&&isFinite(l),uh=(l,e)=>{},ls=(l,e=[1,1])=>({x:e[0]*Math.round(l.x/e[0]),y:e[1]*Math.round(l.y/e[1])}),Zl=({x:l,y:e},[t,n,o],s=!1,i=[1,1])=>{const r={x:(l-t)/o,y:(e-n)/o};return s?ls(r,i):r},sa=({x:l,y:e},[t,n,o])=>({x:l*o+t,y:e*o+n}),os=(l,e,t,n,o,s)=>{const i=e/(l.width*(1+s)),r=t/(l.height*(1+s)),a=Math.min(i,r),c=Cl(a,n,o),u=l.x+l.width/2,f=l.y+l.height/2,h=e/2-u*c,d=t/2-f*c;return{x:h,y:d,zoom:c}},go=()=>{var l;return typeof navigator<"u"&&((l=navigator==null?void 0:navigator.userAgent)==null?void 0:l.indexOf("Mac"))>=0};function Wl(l){return l!==void 0&&l!=="parent"}function Vl(l){var e,t;return{width:((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth??0,height:((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight??0}}function Ir(l){var e,t;return(((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth)!==void 0&&(((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight)!==void 0}function fh(l,e={width:0,height:0},t,n,o){let s=t;const i={...l};for(;s;){const r=n.get(s);if(s=r==null?void 0:r.parentId,r){const a=r.origin||o;i.x+=r.internals.positionAbsolute.x-(e.width??0)*a[0],i.y+=r.internals.positionAbsolute.y-(e.height??0)*a[1]}}return i}function Uo(l,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:n}){const{x:o,y:s}=qn(l),i=Zl({x:o,y:s},n),{x:r,y:a}=t?ls(i,e):i;return{xSnapped:r,ySnapped:a,...i}}const ra=l=>({width:l.offsetWidth,height:l.offsetHeight}),dh=l=>{var e;return((e=l.getRootNode)==null?void 0:e.call(l))||(window==null?void 0:window.document)},hh=["INPUT","SELECT","TEXTAREA"];function mh(l){var n,o;const e=((o=(n=l.composedPath)==null?void 0:n.call(l))==null?void 0:o[0])||l.target;return hh.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const ia=l=>"clientX"in l,qn=(l,e)=>{var s,i;const t=ia(l),n=t?l.clientX:(s=l.touches)==null?void 0:s[0].clientX,o=t?l.clientY:(i=l.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Sr=(l,e,t,n,o)=>{const s=e.querySelectorAll(`.${l}`);return!s||!s.length?null:Array.from(s).map(i=>{const r=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:l,nodeId:o,position:i.getAttribute("data-handlepos"),x:(r.left-t.left)/n,y:(r.top-t.top)/n,...ra(i)}})};function gh({sourceX:l,sourceY:e,targetX:t,targetY:n,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:r}){const a=l*.125+o*.375+i*.375+t*.125,c=e*.125+s*.375+r*.375+n*.125,u=Math.abs(a-l),f=Math.abs(c-e);return[a,c,u,f]}function lo(l,e){return l>=0?.5*l:e*25*Math.sqrt(-l)}function Cr({pos:l,x1:e,y1:t,x2:n,y2:o,c:s}){switch(l){case ot.Left:return[e-lo(e-n,s),t];case ot.Right:return[e+lo(n-e,s),t];case ot.Top:return[e,t-lo(t-o,s)];case ot.Bottom:return[e,t+lo(o-t,s)]}}function aa({sourceX:l,sourceY:e,sourcePosition:t=ot.Bottom,targetX:n,targetY:o,targetPosition:s=ot.Top,curvature:i=.25}){const[r,a]=Cr({pos:t,x1:l,y1:e,x2:n,y2:o,c:i}),[c,u]=Cr({pos:s,x1:n,y1:o,x2:l,y2:e,c:i}),[f,h,d,p]=gh({sourceX:l,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${l},${e} C${r},${a} ${c},${u} ${n},${o}`,f,h,d,p]}function ca({sourceX:l,sourceY:e,targetX:t,targetY:n}){const o=Math.abs(t-l)/2,s=t<l?t+o:t-o,i=Math.abs(n-e)/2,r=n<e?n+i:n-i;return[s,r,o,i]}function _h({sourceNode:l,targetNode:e,selected:t=!1,zIndex:n=0,elevateOnSelect:o=!1}){if(!o)return n;const s=t||e.selected||l.selected,i=Math.max(l.internals.z||0,e.internals.z||0,1e3);return n+(s?i:0)}function ph({sourceNode:l,targetNode:e,width:t,height:n,transform:o}){const s=Mo(mo(l),mo(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:t/o[2],height:n/o[2]};return Ul(i,To(s))>0}const bh=({source:l,sourceHandle:e,target:t,targetHandle:n})=>`xy-edge__${l}${e||""}-${t}${n||""}`,vh=(l,e)=>e.some(t=>t.source===l.source&&t.target===l.target&&(t.sourceHandle===l.sourceHandle||!t.sourceHandle&&!l.sourceHandle)&&(t.targetHandle===l.targetHandle||!t.targetHandle&&!l.targetHandle)),wh=(l,e)=>{if(!l.source||!l.target)return e;let t;return sh(l)?t={...l}:t={...l,id:bh(l)},vh(t,e)?e:(t.sourceHandle===null&&delete t.sourceHandle,t.targetHandle===null&&delete t.targetHandle,e.concat(t))};function ua({sourceX:l,sourceY:e,targetX:t,targetY:n}){const[o,s,i,r]=ca({sourceX:l,sourceY:e,targetX:t,targetY:n});return[`M ${l},${e}L ${t},${n}`,o,s,i,r]}const Dr={[ot.Left]:{x:-1,y:0},[ot.Right]:{x:1,y:0},[ot.Top]:{x:0,y:-1},[ot.Bottom]:{x:0,y:1}},kh=({source:l,sourcePosition:e=ot.Bottom,target:t})=>e===ot.Left||e===ot.Right?l.x<t.x?{x:1,y:0}:{x:-1,y:0}:l.y<t.y?{x:0,y:1}:{x:0,y:-1},Mr=(l,e)=>Math.sqrt(Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2));function yh({source:l,sourcePosition:e=ot.Bottom,target:t,targetPosition:n=ot.Top,center:o,offset:s}){const i=Dr[e],r=Dr[n],a={x:l.x+i.x*s,y:l.y+i.y*s},c={x:t.x+r.x*s,y:t.y+r.y*s},u=kh({source:a,sourcePosition:e,target:c}),f=u.x!==0?"x":"y",h=u[f];let d=[],p,b;const w={x:0,y:0},g={x:0,y:0},[v,k,E,I]=ca({sourceX:l.x,sourceY:l.y,targetX:t.x,targetY:t.y});if(i[f]*r[f]===-1){p=o.x??v,b=o.y??k;const S=[{x:p,y:a.y},{x:p,y:c.y}],A=[{x:a.x,y:b},{x:c.x,y:b}];i[f]===h?d=f==="x"?S:A:d=f==="x"?A:S}else{const S=[{x:a.x,y:c.y}],A=[{x:c.x,y:a.y}];if(f==="x"?d=i.x===h?A:S:d=i.y===h?S:A,e===n){const U=Math.abs(l[f]-t[f]);if(U<=s){const D=Math.min(s-1,s-U);i[f]===h?w[f]=(a[f]>l[f]?-1:1)*D:g[f]=(c[f]>t[f]?-1:1)*D}}if(e!==n){const U=f==="x"?"y":"x",D=i[f]===r[U],Y=a[U]>c[U],P=a[U]<c[U];(i[f]===1&&(!D&&Y||D&&P)||i[f]!==1&&(!D&&P||D&&Y))&&(d=f==="x"?S:A)}const O={x:a.x+w.x,y:a.y+w.y},H={x:c.x+g.x,y:c.y+g.y},F=Math.max(Math.abs(O.x-d[0].x),Math.abs(H.x-d[0].x)),K=Math.max(Math.abs(O.y-d[0].y),Math.abs(H.y-d[0].y));F>=K?(p=(O.x+H.x)/2,b=d[0].y):(p=d[0].x,b=(O.y+H.y)/2)}return[[l,{x:a.x+w.x,y:a.y+w.y},...d,{x:c.x+g.x,y:c.y+g.y},t],p,b,E,I]}function Eh(l,e,t,n){const o=Math.min(Mr(l,e)/2,Mr(e,t)/2,n),{x:s,y:i}=e;if(l.x===s&&s===t.x||l.y===i&&i===t.y)return`L${s} ${i}`;if(l.y===i){const c=l.x<t.x?-1:1,u=l.y<t.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*u}`}const r=l.x<t.x?1:-1,a=l.y<t.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*r},${i}`}function _o({sourceX:l,sourceY:e,sourcePosition:t=ot.Bottom,targetX:n,targetY:o,targetPosition:s=ot.Top,borderRadius:i=5,centerX:r,centerY:a,offset:c=20}){const[u,f,h,d,p]=yh({source:{x:l,y:e},sourcePosition:t,target:{x:n,y:o},targetPosition:s,center:{x:r,y:a},offset:c});return[u.reduce((w,g,v)=>{let k="";return v>0&&v<u.length-1?k=Eh(u[v-1],g,u[v+1],i):k=`${v===0?"M":"L"}${g.x} ${g.y}`,w+=k,w},""),f,h,d,p]}function Tr(l){var e;return l&&!!(l.internals.handleBounds||(e=l.handles)!=null&&e.length)&&!!(l.measured.width||l.width||l.initialWidth)}function Ih(l){var f;const{sourceNode:e,targetNode:t}=l;if(!Tr(e)||!Tr(t))return null;const n=e.internals.handleBounds||Vr(e.handles),o=t.internals.handleBounds||Vr(t.handles),s=zr((n==null?void 0:n.source)??[],l.sourceHandle),i=zr(l.connectionMode===fl.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),l.targetHandle);if(!s||!i)return(f=l.onError)==null||f.call(l,"008",Kl.error008(s?"target":"source",{id:l.id,sourceHandle:l.sourceHandle,targetHandle:l.targetHandle})),null;const r=(s==null?void 0:s.position)||ot.Bottom,a=(i==null?void 0:i.position)||ot.Top,c=Fl(e,s,r),u=Fl(t,i,a);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:r,targetPosition:a}}function Vr(l){if(!l)return null;const e=[],t=[];for(const n of l)n.width=n.width??1,n.height=n.height??1,n.type==="source"?e.push(n):n.type==="target"&&t.push(n);return{source:e,target:t}}function Fl(l,e,t=ot.Left,n=!1){const o=((e==null?void 0:e.x)??0)+l.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+l.internals.positionAbsolute.y,{width:i,height:r}=e??Vl(l);if(n)return{x:o+i/2,y:s+r/2};switch((e==null?void 0:e.position)??t){case ot.Top:return{x:o+i/2,y:s};case ot.Right:return{x:o+i,y:s+r/2};case ot.Bottom:return{x:o+i/2,y:s+r};case ot.Left:return{x:o,y:s+r/2}}}function zr(l,e){return l&&(e?l.find(t=>t.id===e):l[0])||null}function Qo(l,e){return l?typeof l=="string"?l:`${e?`${e}__`:""}${Object.keys(l).sort().map(n=>`${n}=${l[n]}`).join("&")}`:""}function Sh(l,{id:e,defaultColor:t,defaultMarkerStart:n,defaultMarkerEnd:o}){const s=new Set;return l.reduce((i,r)=>([r.markerStart||n,r.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const c=Qo(a,e);s.has(c)||(i.push({id:c,color:a.color||t,...a}),s.add(c))}}),i),[]).sort((i,r)=>i.id.localeCompare(r.id))}const fa={nodeOrigin:[0,0],nodeExtent:uo,elevateNodesOnSelect:!0,defaults:{}},Ch={...fa,checkEquality:!0};function da(l,e){const t={...l};for(const n in e)e[n]!==void 0&&(t[n]=e[n]);return t}function ha(l,e,t,n){var r,a;const o=da(Ch,n),s=new Map(e),i=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const c of l){let u=s.get(c.id);if(o.checkEquality&&c===(u==null?void 0:u.internals.userNode))e.set(c.id,u);else{const f=Co(c,o.nodeOrigin),h=Wl(c.extent)?c.extent:o.nodeExtent,d=Dl(f,h,Vl(c));u={...o.defaults,...c,measured:{width:(r=c.measured)==null?void 0:r.width,height:(a=c.measured)==null?void 0:a.height},internals:{positionAbsolute:d,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:ga(c,i),userNode:c}},e.set(c.id,u)}c.parentId&&ma(u,e,t,n)}}function Dh(l,e){if(!l.parentId)return;const t=e.get(l.parentId);t?t.set(l.id,l):e.set(l.parentId,new Map([[l.id,l]]))}function ma(l,e,t,n){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:i}=da(fa,n),r=l.parentId,a=e.get(r);if(!a){console.warn(`Parent node ${r} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Dh(l,t);const c=o?1e3:0,{x:u,y:f,z:h}=Mh(l,a,s,i,c),{positionAbsolute:d}=l.internals,p=u!==d.x||f!==d.y;(p||h!==l.internals.z)&&(l.internals={...l.internals,positionAbsolute:p?{x:u,y:f}:d,z:h})}function ga(l,e){return(Hn(l.zIndex)?l.zIndex:0)+(l.selected?e:0)}function Mh(l,e,t,n,o){const{x:s,y:i}=e.internals.positionAbsolute,r=Vl(l),a=Co(l,t),c=Wl(l.extent)?Dl(a,l.extent,r):a;let u=Dl({x:s+c.x,y:i+c.y},n,r);l.extent==="parent"&&(u=la(u,r,e));const f=ga(l,o),h=e.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function Th(l,e,t,n=[0,0]){var i;const o=[],s=new Map;for(const r of l){const a=e.get(r.parentId);if(!a)continue;const c=((i=s.get(r.parentId))==null?void 0:i.expandedRect)??Ml(a),u=ch(c,r.rect);s.set(r.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:r,parent:a},c)=>{var k;const u=a.internals.positionAbsolute,f=Vl(a),h=a.origin??n,d=r.x<u.x?Math.round(Math.abs(u.x-r.x)):0,p=r.y<u.y?Math.round(Math.abs(u.y-r.y)):0,b=Math.max(f.width,Math.round(r.width)),w=Math.max(f.height,Math.round(r.height)),g=(b-f.width)*h[0],v=(w-f.height)*h[1];(d>0||p>0||g||v)&&(o.push({id:c,type:"position",position:{x:a.position.x-d+g,y:a.position.y-p+v}}),(k=t.get(c))==null||k.forEach(E=>{l.some(I=>I.id===E.id)||o.push({id:E.id,type:"position",position:{x:E.position.x+d,y:E.position.y+p}})})),(f.width<r.width||f.height<r.height||d||p)&&o.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:b+(d?h[0]*d-g:0),height:w+(p?h[1]*p-v:0)}})}),o}function Vh(l,e,t,n,o,s){const i=n==null?void 0:n.querySelector(".xyflow__viewport");let r=!1;if(!i)return{changes:[],updatedInternals:r};const a=[],c=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const h of l.values()){const d=e.get(h.id);if(d)if(d.hidden)d.internals={...d.internals,handleBounds:void 0},r=!0;else{const p=ra(h.nodeElement),b=d.measured.width!==p.width||d.measured.height!==p.height;if(!!(p.width&&p.height&&(b||!d.internals.handleBounds||h.force))){const g=h.nodeElement.getBoundingClientRect(),v=Wl(d.extent)?d.extent:s;let{positionAbsolute:k}=d.internals;d.parentId&&d.extent==="parent"?k=la(k,p,e.get(d.parentId)):v&&(k=Dl(k,v,p)),d.measured=p,d.internals={...d.internals,positionAbsolute:k,handleBounds:{source:Sr("source",h.nodeElement,g,u,d.id),target:Sr("target",h.nodeElement,g,u,d.id)}},d.parentId&&ma(d,e,t,{nodeOrigin:o}),r=!0,b&&(a.push({id:d.id,type:"dimensions",dimensions:p}),d.expandParent&&d.parentId&&f.push({id:d.id,parentId:d.parentId,rect:Ml(d,o)}))}}}if(f.length>0){const h=Th(f,e,t,o);a.push(...h)}return{changes:a,updatedInternals:r}}async function zh({delta:l,panZoom:e,transform:t,translateExtent:n,width:o,height:s}){if(!e||!l.x&&!l.y)return Promise.resolve(!1);const i=await e.setViewportConstrained({x:t[0]+l.x,y:t[1]+l.y,zoom:t[2]},[[0,0],[o,s]],n),r=!!i&&(i.x!==t[0]||i.y!==t[1]||i.k!==t[2]);return Promise.resolve(r)}function _a(l,e,t){l.clear(),e.clear();for(const n of t){const{source:o,target:s,sourceHandle:i=null,targetHandle:r=null}=n,a=`${o}-source-${i}`,c=`${s}-target-${r}`,u=l.get(a)||new Map,f=l.get(c)||new Map,h={edgeId:n.id,source:o,target:s,sourceHandle:i,targetHandle:r};e.set(n.id,n),l.set(a,u.set(`${s}-${r}`,h)),l.set(c,f.set(`${o}-${i}`,h))}}function pa(l,e){if(!l.parentId)return!1;const t=e.get(l.parentId);return t?t.selected?!0:pa(t,e):!1}function Nr(l,e,t){let n=l;do{if(n!=null&&n.matches(e))return!0;if(n===t)return!1;n=n.parentElement}while(n);return!1}function Nh(l,e,t,n){const o=new Map;for(const[s,i]of l)if((i.selected||i.id===n)&&(!i.parentId||!pa(i,l))&&(i.draggable||e&&typeof i.draggable>"u")){const r=l.get(s);r&&o.set(s,{id:s,position:r.position||{x:0,y:0},distance:{x:t.x-r.internals.positionAbsolute.x,y:t.y-r.internals.positionAbsolute.y},extent:r.extent,parentId:r.parentId,origin:r.origin,expandParent:r.expandParent,internals:{positionAbsolute:r.internals.positionAbsolute||{x:0,y:0}},measured:{width:r.measured.width??0,height:r.measured.height??0}})}return o}function Wo({nodeId:l,dragItems:e,nodeLookup:t,dragging:n=!0}){var i,r;const o=[];for(const[a,c]of e){const u=(i=t.get(a))==null?void 0:i.internals.userNode;u&&o.push({...u,position:c.position,dragging:n})}if(!l)return[o[0],o];const s=t.get(l).internals.userNode;return[{...s,position:((r=e.get(l))==null?void 0:r.position)||s.position,dragging:n},o]}function Ph({onNodeMouseDown:l,getStoreItems:e,onDragStart:t,onDrag:n,onDragStop:o}){let s={x:null,y:null},i=0,r=new Map,a=!1,c={x:0,y:0},u=null,f=!1,h=null,d=!1;function p({noDragClassName:w,handleSelector:g,domNode:v,isSelectable:k,nodeId:E,nodeClickDistance:I=0}){h=On(v);function T({x:H,y:F},K){const{nodeLookup:U,nodeExtent:D,snapGrid:Y,snapToGrid:P,nodeOrigin:j,onNodeDrag:G,onSelectionDrag:X,onError:Z,updateNodePositions:J}=e();s={x:H,y:F};let L=!1,re={x:0,y:0,x2:0,y2:0};if(r.size>1&&D){const q=Do(r);re=Jo(q)}for(const[q,ae]of r){let ge={x:H-ae.distance.x,y:F-ae.distance.y};P&&(ge=ls(ge,Y));let se=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];if(r.size>1&&D&&!ae.extent){const{positionAbsolute:fe}=ae.internals,Ce=fe.x-re.x+D[0][0],Ge=fe.x+ae.measured.width-re.x2+D[1][0],Ke=fe.y-re.y+D[0][1],ue=fe.y+ae.measured.height-re.y2+D[1][1];se=[[Ce,Ke],[Ge,ue]]}const{position:Oe,positionAbsolute:Q}=ah({nodeId:q,nextPosition:ge,nodeLookup:U,nodeExtent:se,nodeOrigin:j,onError:Z});L=L||ae.position.x!==Oe.x||ae.position.y!==Oe.y,ae.position=Oe,ae.internals.positionAbsolute=Q}if(L&&(J(r,!0),K&&(n||G||!E&&X))){const[q,ae]=Wo({nodeId:E,dragItems:r,nodeLookup:U});n==null||n(K,r,q,ae),G==null||G(K,q,ae),E||X==null||X(K,ae)}}async function S(){if(!u)return;const{transform:H,panBy:F,autoPanSpeed:K}=e(),[U,D]=oa(c,u,K);(U!==0||D!==0)&&(s.x=(s.x??0)-U/H[2],s.y=(s.y??0)-D/H[2],await F({x:U,y:D})&&T(s,null)),i=requestAnimationFrame(S)}function A(H){var L;const{nodeLookup:F,multiSelectionActive:K,nodesDraggable:U,transform:D,snapGrid:Y,snapToGrid:P,selectNodesOnDrag:j,onNodeDragStart:G,onSelectionDragStart:X,unselectNodesAndEdges:Z}=e();f=!0,(!j||!k)&&!K&&E&&((L=F.get(E))!=null&&L.selected||Z()),k&&j&&E&&(l==null||l(E));const J=Uo(H.sourceEvent,{transform:D,snapGrid:Y,snapToGrid:P});if(s=J,r=Nh(F,U,J,E),r.size>0&&(t||G||!E&&X)){const[re,q]=Wo({nodeId:E,dragItems:r,nodeLookup:F});t==null||t(H.sourceEvent,r,re,q),G==null||G(H.sourceEvent,re,q),E||X==null||X(H.sourceEvent,q)}}const O=Eu().clickDistance(I).on("start",H=>{const{domNode:F,nodeDragThreshold:K,transform:U,snapGrid:D,snapToGrid:Y}=e();d=!1,K===0&&A(H),s=Uo(H.sourceEvent,{transform:U,snapGrid:D,snapToGrid:Y}),u=(F==null?void 0:F.getBoundingClientRect())||null,c=qn(H.sourceEvent,u)}).on("drag",H=>{const{autoPanOnNodeDrag:F,transform:K,snapGrid:U,snapToGrid:D,nodeDragThreshold:Y}=e(),P=Uo(H.sourceEvent,{transform:K,snapGrid:U,snapToGrid:D});if(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1&&(d=!0),!d){if(!a&&F&&f&&(a=!0,S()),!f){const j=P.xSnapped-(s.x??0),G=P.ySnapped-(s.y??0);Math.sqrt(j*j+G*G)>Y&&A(H)}(s.x!==P.xSnapped||s.y!==P.ySnapped)&&r&&f&&(c=qn(H.sourceEvent,u),T(P,H.sourceEvent))}}).on("end",H=>{if(!(!f||d)&&(a=!1,f=!1,cancelAnimationFrame(i),r.size>0)){const{nodeLookup:F,updateNodePositions:K,onNodeDragStop:U,onSelectionDragStop:D}=e();if(K(r,!1),o||U||!E&&D){const[Y,P]=Wo({nodeId:E,dragItems:r,nodeLookup:F,dragging:!1});o==null||o(H.sourceEvent,r,Y,P),U==null||U(H.sourceEvent,Y,P),E||D==null||D(H.sourceEvent,P)}}}).filter(H=>{const F=H.target;return!H.button&&(!w||!Nr(F,`.${w}`,v))&&(!g||Nr(F,g,v))});h.call(O)}function b(){h==null||h.on(".drag",null)}return{update:p,destroy:b}}function Oh(l,e,t){const n=[],o={x:l.x-t,y:l.y-t,width:t*2,height:t*2};for(const s of e.values())Ul(o,Ml(s))>0&&n.push(s);return n}const Hh=250;function Bh(l,e,t,n){var r,a;let o=[],s=1/0;const i=Oh(l,t,e+Hh);for(const c of i){const u=[...((r=c.internals.handleBounds)==null?void 0:r.source)??[],...((a=c.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of u){if(n.nodeId===f.nodeId&&n.type===f.type&&n.id===f.id)continue;const{x:h,y:d}=Fl(c,f,f.position,!0),p=Math.sqrt(Math.pow(h-l.x,2)+Math.pow(d-l.y,2));p>e||(p<s?(o=[{...f,x:h,y:d}],s=p):p===s&&o.push({...f,x:h,y:d}))}}if(!o.length)return null;if(o.length>1){const c=n.type==="source"?"target":"source";return o.find(u=>u.type===c)??o[0]}return o[0]}function ba(l,e,t,n,o,s=!1){var c,u,f;const i=n.get(l);if(!i)return null;const r=o==="strict"?(c=i.internals.handleBounds)==null?void 0:c[e]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],a=(t?r==null?void 0:r.find(h=>h.id===t):r==null?void 0:r[0])??null;return a&&s?{...a,...Fl(i,a,a.position,!0)}:a}function va(l,e){return l||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Ah(l,e){let t=null;return e?t=!0:l&&!e&&(t=!1),t}const wa=()=>!0;function Lh(l,{connectionMode:e,connectionRadius:t,handleId:n,nodeId:o,edgeUpdaterType:s,isTarget:i,domNode:r,nodeLookup:a,lib:c,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:d,onConnectStart:p,onConnect:b,onConnectEnd:w,isValidConnection:g=wa,onReconnectEnd:v,updateConnection:k,getTransform:E,getFromHandle:I,autoPanSpeed:T}){const S=dh(l.target);let A=0,O;const{x:H,y:F}=qn(l),K=S==null?void 0:S.elementFromPoint(H,F),U=va(s,K),D=r==null?void 0:r.getBoundingClientRect();if(!D||!U)return;const Y=ba(o,U,n,a,e);if(!Y)return;let P=qn(l,D),j=!1,G=null,X=!1,Z=null;function J(){if(!u||!D)return;const[Q,fe]=oa(P,D,T);h({x:Q,y:fe}),A=requestAnimationFrame(J)}const L={...Y,nodeId:o,type:U,position:Y.position},re=a.get(o),ae={inProgress:!0,isValid:null,from:Fl(re,L,ot.Left,!0),fromHandle:L,fromPosition:L.position,fromNode:re,to:P,toHandle:null,toPosition:pr[L.position],toNode:null};k(ae);let ge=ae;p==null||p(l,{nodeId:o,handleId:n,handleType:U});function se(Q){if(!I()||!L){Oe(Q);return}const fe=E();P=qn(Q,D),O=Bh(Zl(P,fe,!1,[1,1]),t,a,L),j||(J(),j=!0);const Ce=ka(Q,{handle:O,connectionMode:e,fromNodeId:o,fromHandleId:n,fromType:i?"target":"source",isValidConnection:g,doc:S,lib:c,flowId:f,nodeLookup:a});Z=Ce.handleDomNode,G=Ce.connection,X=Ah(!!O,Ce.isValid);const Ge={...ge,isValid:X,to:O&&X?sa({x:O.x,y:O.y},fe):P,toHandle:Ce.toHandle,toPosition:X&&Ce.toHandle?Ce.toHandle.position:pr[L.position],toNode:Ce.toHandle?a.get(Ce.toHandle.nodeId):null};X&&O&&ge.toHandle&&Ge.toHandle&&ge.toHandle.type===Ge.toHandle.type&&ge.toHandle.nodeId===Ge.toHandle.nodeId&&ge.toHandle.id===Ge.toHandle.id&&ge.to.x===Ge.to.x&&ge.to.y===Ge.to.y||(k(Ge),ge=Ge)}function Oe(Q){(O||Z)&&G&&X&&(b==null||b(G));const{inProgress:fe,...Ce}=ge,Ge={...Ce,toPosition:ge.toHandle?ge.toPosition:null};w==null||w(Q,Ge),s&&(v==null||v(Q,Ge)),d(),cancelAnimationFrame(A),j=!1,X=!1,G=null,Z=null,S.removeEventListener("mousemove",se),S.removeEventListener("mouseup",Oe),S.removeEventListener("touchmove",se),S.removeEventListener("touchend",Oe)}S.addEventListener("mousemove",se),S.addEventListener("mouseup",Oe),S.addEventListener("touchmove",se),S.addEventListener("touchend",Oe)}function ka(l,{handle:e,connectionMode:t,fromNodeId:n,fromHandleId:o,fromType:s,doc:i,lib:r,flowId:a,isValidConnection:c=wa,nodeLookup:u}){const f=s==="target",h=e?i.querySelector(`.${r}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:d,y:p}=qn(l),b=i.elementFromPoint(d,p),w=b!=null&&b.classList.contains(`${r}-flow__handle`)?b:h,g={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const v=va(void 0,w),k=w.getAttribute("data-nodeid"),E=w.getAttribute("data-handleid"),I=w.classList.contains("connectable"),T=w.classList.contains("connectableend");if(!k||!v)return g;const S={source:f?k:n,sourceHandle:f?E:o,target:f?n:k,targetHandle:f?o:E};g.connection=S;const O=I&&T&&(t===fl.Strict?f&&v==="source"||!f&&v==="target":k!==n||E!==o);g.isValid=O&&c(S),g.toHandle=ba(k,v,E,u,t,!1)}return g}const Rh={onPointerDown:Lh,isValid:ka},Uh=(l,e)=>l.x!==e.x||l.y!==e.y||l.zoom!==e.k,Vo=l=>({x:l.x,y:l.y,zoom:l.k}),Fo=({x:l,y:e,zoom:t})=>es.translate(l,e).scale(t),wl=(l,e)=>l.target.closest(`.${e}`),ya=(l,e)=>e===2&&Array.isArray(l)&&l.includes(2),jo=(l,e=0,t=()=>{})=>{const n=typeof e=="number"&&e>0;return n||t(),n?l.transition().duration(e).on("end",t):l},Ea=l=>{const e=l.ctrlKey&&go()?10:1;return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*e};function Wh({zoomPanValues:l,noWheelClassName:e,d3Selection:t,d3Zoom:n,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:r,onPanZoom:a,onPanZoomEnd:c}){return u=>{if(wl(u,e))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=t.property("__zoom").k||1;if(u.ctrlKey&&i){const w=Fn(u),g=Ea(u),v=f*Math.pow(2,g);n.scaleTo(t,v,w,u);return}const h=u.deltaMode===1?20:1;let d=o===Yn.Vertical?0:u.deltaX*h,p=o===Yn.Horizontal?0:u.deltaY*h;!go()&&u.shiftKey&&o!==Yn.Vertical&&(d=u.deltaY*h,p=0),n.translateBy(t,-(d/f)*s,-(p/f)*s,{internal:!0});const b=Vo(t.property("__zoom"));clearTimeout(l.panScrollTimeout),l.isPanScrolling||(l.isPanScrolling=!0,r==null||r(u,b)),l.isPanScrolling&&(a==null||a(u,b),l.panScrollTimeout=setTimeout(()=>{c==null||c(u,b),l.isPanScrolling=!1},150))}}function Fh({noWheelClassName:l,preventScrolling:e,d3ZoomHandler:t}){return function(n,o){if(!e&&n.type==="wheel"&&!n.ctrlKey||wl(n,l))return null;n.preventDefault(),t.call(this,n,o)}}function jh({zoomPanValues:l,onDraggingChange:e,onPanZoomStart:t}){return n=>{var s,i,r;if((s=n.sourceEvent)!=null&&s.internal)return;const o=Vo(n.transform);l.mouseButton=((i=n.sourceEvent)==null?void 0:i.button)||0,l.isZoomingOrPanning=!0,l.prevViewport=o,((r=n.sourceEvent)==null?void 0:r.type)==="mousedown"&&e(!0),t&&(t==null||t(n.sourceEvent,o))}}function Yh({zoomPanValues:l,panOnDrag:e,onPaneContextMenu:t,onTransformChange:n,onPanZoom:o}){return s=>{var i,r;l.usedRightMouseButton=!!(t&&ya(e,l.mouseButton??0)),(i=s.sourceEvent)!=null&&i.sync||n([s.transform.x,s.transform.y,s.transform.k]),o&&!((r=s.sourceEvent)!=null&&r.internal)&&(o==null||o(s.sourceEvent,Vo(s.transform)))}}function Xh({zoomPanValues:l,panOnDrag:e,panOnScroll:t,onDraggingChange:n,onPanZoomEnd:o,onPaneContextMenu:s}){return i=>{var r;if(!((r=i.sourceEvent)!=null&&r.internal)&&(l.isZoomingOrPanning=!1,s&&ya(e,l.mouseButton??0)&&!l.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),l.usedRightMouseButton=!1,n(!1),o&&Uh(l.prevViewport,i.transform))){const a=Vo(i.transform);l.prevViewport=a,clearTimeout(l.timerId),l.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,a)},t?150:0)}}}function Kh({zoomActivationKeyPressed:l,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:n,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:r,noPanClassName:a,lib:c}){return u=>{var p;const f=l||e,h=t&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(wl(u,`${c}-flow__node`)||wl(u,`${c}-flow__edge`)))return!0;if(!n&&!f&&!o&&!s&&!t||i||wl(u,r)&&u.type==="wheel"||wl(u,a)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!l)||!t&&u.ctrlKey&&u.type==="wheel")return!1;if(!t&&u.type==="touchstart"&&((p=u.touches)==null?void 0:p.length)>1)return u.preventDefault(),!1;if(!f&&!o&&!h&&u.type==="wheel"||!n&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(n)&&!n.includes(u.button)&&u.type==="mousedown")return!1;const d=Array.isArray(n)&&n.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&d}}function Zh({domNode:l,minZoom:e,maxZoom:t,paneClickDistance:n,translateExtent:o,viewport:s,onPanZoom:i,onPanZoomStart:r,onPanZoomEnd:a,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=l.getBoundingClientRect(),h=Ou().clickDistance(!Hn(n)||n<0?0:n).scaleExtent([e,t]).translateExtent(o),d=On(l).call(h);k({x:s.x,y:s.y,zoom:Cl(s.zoom,e,t)},[[0,0],[f.width,f.height]],o);const p=d.on("wheel.zoom"),b=d.on("dblclick.zoom");h.wheelDelta(Ea);function w(K,U){return d?new Promise(D=>{h==null||h.transform(jo(d,U==null?void 0:U.duration,()=>D(!0)),K)}):Promise.resolve(!1)}function g({noWheelClassName:K,noPanClassName:U,onPaneContextMenu:D,userSelectionActive:Y,panOnScroll:P,panOnDrag:j,panOnScrollMode:G,panOnScrollSpeed:X,preventScrolling:Z,zoomOnPinch:J,zoomOnScroll:L,zoomOnDoubleClick:re,zoomActivationKeyPressed:q,lib:ae,onTransformChange:ge}){Y&&!u.isZoomingOrPanning&&v();const Oe=P&&!q&&!Y?Wh({zoomPanValues:u,noWheelClassName:K,d3Selection:d,d3Zoom:h,panOnScrollMode:G,panOnScrollSpeed:X,zoomOnPinch:J,onPanZoomStart:r,onPanZoom:i,onPanZoomEnd:a}):Fh({noWheelClassName:K,preventScrolling:Z,d3ZoomHandler:p});if(d.on("wheel.zoom",Oe,{passive:!1}),!Y){const fe=jh({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:r});h.on("start",fe);const Ce=Yh({zoomPanValues:u,panOnDrag:j,onPaneContextMenu:!!D,onPanZoom:i,onTransformChange:ge});h.on("zoom",Ce);const Ge=Xh({zoomPanValues:u,panOnDrag:j,panOnScroll:P,onPaneContextMenu:D,onPanZoomEnd:a,onDraggingChange:c});h.on("end",Ge)}const Q=Kh({zoomActivationKeyPressed:q,panOnDrag:j,zoomOnScroll:L,panOnScroll:P,zoomOnDoubleClick:re,zoomOnPinch:J,userSelectionActive:Y,noPanClassName:U,noWheelClassName:K,lib:ae});h.filter(Q),re?d.on("dblclick.zoom",b):d.on("dblclick.zoom",null)}function v(){h.on("zoom",null)}async function k(K,U,D){const Y=Fo(K),P=h==null?void 0:h.constrain()(Y,U,D);return P&&await w(P),new Promise(j=>j(P))}async function E(K,U){const D=Fo(K);return await w(D,U),new Promise(Y=>Y(D))}function I(K){if(d){const U=Fo(K),D=d.property("__zoom");(D.k!==K.zoom||D.x!==K.x||D.y!==K.y)&&(h==null||h.transform(d,U,null,{sync:!0}))}}function T(){const K=d?qc(d.node()):{x:0,y:0,k:1};return{x:K.x,y:K.y,zoom:K.k}}function S(K,U){return d?new Promise(D=>{h==null||h.scaleTo(jo(d,U==null?void 0:U.duration,()=>D(!0)),K)}):Promise.resolve(!1)}function A(K,U){return d?new Promise(D=>{h==null||h.scaleBy(jo(d,U==null?void 0:U.duration,()=>D(!0)),K)}):Promise.resolve(!1)}function O(K){h==null||h.scaleExtent(K)}function H(K){h==null||h.translateExtent(K)}function F(K){const U=!Hn(K)||K<0?0:K;h==null||h.clickDistance(U)}return{update:g,destroy:v,setViewport:E,setViewportConstrained:k,getViewport:T,scaleTo:S,scaleBy:A,setScaleExtent:O,setTranslateExtent:H,syncViewport:I,setClickDistance:F}}var Pr;(function(l){l.Line="line",l.Handle="handle"})(Pr||(Pr={}));function Gh(l){let e,t,n,o,s,i;const r=l[45].default,a=Gt(r,l,l[44],null);return{c(){e=V("div"),a&&a.c(),this.h()},l(c){e=z(c,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var u=M(e);a&&a.l(u),u.forEach(_),this.h()},h(){m(e,"data-handleid",l[6]),m(e,"data-nodeid",l[14]),m(e,"data-handlepos",l[2]),m(e,"data-id",t=l[13]+"-"+l[14]+"-"+(l[0]||null)+"-"+l[1]),m(e,"class",n=Ht(["svelte-flow__handle",`svelte-flow__handle-${l[2]}`,"nodrag","nopan",l[2],l[4]])),m(e,"style",l[3]),m(e,"role","button"),m(e,"tabindex","-1"),lt(e,"valid",l[7]),lt(e,"connectingto",l[5]),lt(e,"connectingfrom",l[9]),lt(e,"source",!l[11]),lt(e,"target",l[11]),lt(e,"connectablestart",l[12]),lt(e,"connectableend",l[12]),lt(e,"connectable",l[12]),lt(e,"connectionindicator",l[12]&&(!l[10]||l[8]))},m(c,u){B(c,e,u),a&&a.m(e,null),o=!0,s||(i=[ke(e,"mousedown",l[32]),ke(e,"touchstart",l[32])],s=!0)},p(c,u){a&&a.p&&(!o||u[1]&8192)&&qt(a,r,c,c[44],o?Qt(r,c[44],u,null):Jt(c[44]),null),(!o||u[0]&64)&&m(e,"data-handleid",c[6]),(!o||u[0]&4)&&m(e,"data-handlepos",c[2]),(!o||u[0]&8195&&t!==(t=c[13]+"-"+c[14]+"-"+(c[0]||null)+"-"+c[1]))&&m(e,"data-id",t),(!o||u[0]&20&&n!==(n=Ht(["svelte-flow__handle",`svelte-flow__handle-${c[2]}`,"nodrag","nopan",c[2],c[4]])))&&m(e,"class",n),(!o||u[0]&8)&&m(e,"style",c[3]),(!o||u[0]&148)&&lt(e,"valid",c[7]),(!o||u[0]&52)&&lt(e,"connectingto",c[5]),(!o||u[0]&532)&&lt(e,"connectingfrom",c[9]),(!o||u[0]&2068)&&lt(e,"source",!c[11]),(!o||u[0]&2068)&&lt(e,"target",c[11]),(!o||u[0]&4116)&&lt(e,"connectablestart",c[12]),(!o||u[0]&4116)&&lt(e,"connectableend",c[12]),(!o||u[0]&4116)&&lt(e,"connectable",c[12]),(!o||u[0]&5396)&&lt(e,"connectionindicator",c[12]&&(!c[10]||c[8]))},i(c){o||(C(a,c),o=!0)},o(c){N(a,c),o=!1},d(c){c&&_(e),a&&a.d(c),s=!1,en(i)}}}function qh(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E,I,T,S,A,O,H,F,{$$slots:K={},$$scope:U}=e,{id:D=void 0}=e,{type:Y="source"}=e,{position:P=ot.Top}=e,{style:j=void 0}=e,{isValidConnection:G=void 0}=e,{onconnect:X=void 0}=e,{ondisconnect:Z=void 0}=e,{isConnectable:J=void 0}=e,{class:L=void 0}=e;const re=Wt("svelteflow__node_id"),q=Wt("svelteflow__node_connectable");ce(l,q,De=>t(43,F=De));const ae=jt(),{connectionMode:ge,domNode:se,nodeLookup:Oe,connectionRadius:Q,viewport:fe,isValidConnection:Ce,lib:Ge,addEdge:Ke,onedgecreate:ue,panBy:it,cancelConnection:at,updateConnection:Yt,autoPanOnConnect:St,edges:_t,connectionLookup:Rt,onconnect:Tt,onconnectstart:pe,onconnectend:je,flowId:rt,connection:he}=ae;ce(l,ge,De=>t(40,h=De)),ce(l,se,De=>t(55,O=De)),ce(l,Oe,De=>t(54,A=De)),ce(l,Q,De=>t(56,H=De)),ce(l,fe,De=>t(46,b=De)),ce(l,Ce,De=>t(51,E=De)),ce(l,Ge,De=>t(53,S=De)),ce(l,ue,De=>t(50,k=De)),ce(l,St,De=>t(52,T=De)),ce(l,_t,De=>t(42,p=De)),ce(l,Rt,De=>t(41,d=De)),ce(l,Tt,De=>t(49,v=De)),ce(l,pe,De=>t(48,g=De)),ce(l,je,De=>t(47,w=De)),ce(l,rt,De=>t(13,I=De)),ce(l,he,De=>t(39,f=De));function wt(De){const Vt=ia(De);(Vt&&De.button===0||!Vt)&&Rh.onPointerDown(De,{handleId:s,nodeId:re,isTarget:n,connectionRadius:H,domNode:O,nodeLookup:A,connectionMode:h,lib:S,autoPanOnConnect:T,flowId:I,isValidConnection:G??E,updateConnection:Yt,cancelConnection:at,panBy:it,onConnect:de=>{const Me=k?k(de):de;Me&&(Ke(Me),v==null||v(de))},onConnectStart:(de,Me)=>{g==null||g(de,{nodeId:Me.nodeId,handleId:Me.handleId,handleType:Me.handleType})},onConnectEnd:(de,Me)=>{w==null||w(de,Me)},getTransform:()=>[b.x,b.y,b.zoom],getFromHandle:()=>f.fromHandle})}let dt=null,pt;return l.$$set=De=>{"id"in De&&t(0,D=De.id),"type"in De&&t(1,Y=De.type),"position"in De&&t(2,P=De.position),"style"in De&&t(3,j=De.style),"isValidConnection"in De&&t(33,G=De.isValidConnection),"onconnect"in De&&t(34,X=De.onconnect),"ondisconnect"in De&&t(35,Z=De.ondisconnect),"isConnectable"in De&&t(36,J=De.isConnectable),"class"in De&&t(4,L=De.class),"$$scope"in De&&t(44,U=De.$$scope)},l.$$.update=()=>{var De,Vt,de,Me,we,Xe,ht,yt,It;if(l.$$.dirty[0]&2&&t(11,n=Y==="target"),l.$$.dirty[1]&4128&&t(12,o=J!==void 0?J:F),l.$$.dirty[0]&1&&t(6,s=D||null),l.$$.dirty[0]&3|l.$$.dirty[1]&3096&&(X||Z)&&t(38,pt=d.get(`${re}-${Y}-${D||null}`)),l.$$.dirty[1]&216){if(dt&&!oh(pt,dt)){const zt=pt??new Map;br(dt,zt,Z),br(zt,dt,X)}t(37,dt=pt??new Map)}l.$$.dirty[1]&256&&t(10,i=!!f.fromHandle),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(9,r=((De=f.fromHandle)==null?void 0:De.nodeId)===re&&((Vt=f.fromHandle)==null?void 0:Vt.type)===Y&&((de=f.fromHandle)==null?void 0:de.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(5,a=((Me=f.toHandle)==null?void 0:Me.nodeId)===re&&((we=f.toHandle)==null?void 0:we.type)===Y&&((Xe=f.toHandle)==null?void 0:Xe.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&768&&t(8,c=h===fl.Strict?((ht=f.fromHandle)==null?void 0:ht.type)!==Y:re!==((yt=f.fromHandle)==null?void 0:yt.nodeId)||s!==((It=f.fromHandle)==null?void 0:It.id)),l.$$.dirty[0]&32|l.$$.dirty[1]&256&&t(7,u=a&&f.isValid)},[D,Y,P,j,L,a,s,u,c,r,i,n,o,I,re,q,ge,se,Oe,Q,fe,Ce,Ge,ue,St,_t,Rt,Tt,pe,je,rt,he,wt,G,X,Z,J,dt,pt,f,h,d,p,F,U,K]}class Tl extends Le{constructor(e){super(),Re(this,e,qh,Gh,Fe,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function Jh(l){var a;let e,t,n=((a=l[0])==null?void 0:a.label)+"",o,s,i,r;return e=new Tl({props:{type:"target",position:l[1]??ot.Top}}),i=new Tl({props:{type:"source",position:l[2]??ot.Bottom}}),{c(){te(e.$$.fragment),t=$(),o=Ie(n),s=$(),te(i.$$.fragment)},l(c){oe(e.$$.fragment,c),t=ee(c),o=Se(c,n),s=ee(c),oe(i.$$.fragment,c)},m(c,u){ne(e,c,u),B(c,t,u),B(c,o,u),B(c,s,u),ne(i,c,u),r=!0},p(c,[u]){var d;const f={};u&2&&(f.position=c[1]??ot.Top),e.$set(f),(!r||u&1)&&n!==(n=((d=c[0])==null?void 0:d.label)+"")&&Te(o,n);const h={};u&4&&(h.position=c[2]??ot.Bottom),i.$set(h)},i(c){r||(C(e.$$.fragment,c),C(i.$$.fragment,c),r=!0)},o(c){N(e.$$.fragment,c),N(i.$$.fragment,c),r=!1},d(c){c&&(_(t),_(o),_(s)),le(e,c),le(i,c)}}}function Qh(l,e,t){const n=["data","targetPosition","sourcePosition"];Ft(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:i=void 0}=e;return l.$$set=r=>{e=kt(kt({},e),Bn(r)),t(3,Ft(e,n)),"data"in r&&t(0,o=r.data),"targetPosition"in r&&t(1,s=r.targetPosition),"sourcePosition"in r&&t(2,i=r.sourcePosition)},[o,s,i]}class Ia extends Le{constructor(e){super(),Re(this,e,Qh,Jh,Fe,{data:0,targetPosition:1,sourcePosition:2})}}function xh(l){var i;let e=((i=l[0])==null?void 0:i.label)+"",t,n,o,s;return o=new Tl({props:{type:"source",position:l[1]??ot.Bottom}}),{c(){t=Ie(e),n=$(),te(o.$$.fragment)},l(r){t=Se(r,e),n=ee(r),oe(o.$$.fragment,r)},m(r,a){B(r,t,a),B(r,n,a),ne(o,r,a),s=!0},p(r,[a]){var u;(!s||a&1)&&e!==(e=((u=r[0])==null?void 0:u.label)+"")&&Te(t,e);const c={};a&2&&(c.position=r[1]??ot.Bottom),o.$set(c)},i(r){s||(C(o.$$.fragment,r),s=!0)},o(r){N(o.$$.fragment,r),s=!1},d(r){r&&(_(t),_(n)),le(o,r)}}}function $h(l,e,t){const n=["data","sourcePosition"];Ft(e,n);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return l.$$set=i=>{e=kt(kt({},e),Bn(i)),t(2,Ft(e,n)),"data"in i&&t(0,o=i.data),"sourcePosition"in i&&t(1,s=i.sourcePosition)},[o,s]}class em extends Le{constructor(e){super(),Re(this,e,$h,xh,Fe,{data:0,sourcePosition:1})}}function tm(l){var i;let e=((i=l[0])==null?void 0:i.label)+"",t,n,o,s;return o=new Tl({props:{type:"target",position:l[1]??ot.Top}}),{c(){t=Ie(e),n=$(),te(o.$$.fragment)},l(r){t=Se(r,e),n=ee(r),oe(o.$$.fragment,r)},m(r,a){B(r,t,a),B(r,n,a),ne(o,r,a),s=!0},p(r,[a]){var u;(!s||a&1)&&e!==(e=((u=r[0])==null?void 0:u.label)+"")&&Te(t,e);const c={};a&2&&(c.position=r[1]??ot.Top),o.$set(c)},i(r){s||(C(o.$$.fragment,r),s=!0)},o(r){N(o.$$.fragment,r),s=!1},d(r){r&&(_(t),_(n)),le(o,r)}}}function nm(l,e,t){const n=["data","targetPosition"];Ft(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return l.$$set=i=>{e=kt(kt({},e),Bn(i)),t(2,Ft(e,n)),"data"in i&&t(0,o=i.data),"targetPosition"in i&&t(1,s=i.targetPosition)},[o,s]}class lm extends Le{constructor(e){super(),Re(this,e,nm,tm,Fe,{data:0,targetPosition:1})}}function om(l,e,t){const n=[];return Ft(e,n),l.$$set=o=>{e=kt(kt({},e),Bn(o)),t(0,Ft(e,n))},[]}class sm extends Le{constructor(e){super(),Re(this,e,om,null,Fe,{})}}function Or(l,e,t){if(!e)return;const n=t?e.querySelector(t):e;n&&n.appendChild(l)}function rm(l,{target:e,domNode:t}){return Or(l,t,e),{async update({target:n,domNode:o}){Or(l,o,n)},destroy(){l.parentNode&&l.parentNode.removeChild(l)}}}function im(l){let e,t,n,o,s;const i=l[3].default,r=Gt(i,l,l[2],null);return{c(){e=V("div"),r&&r.c()},l(a){e=z(a,"DIV",{});var c=M(e);r&&r.l(c),c.forEach(_)},m(a,c){B(a,e,c),r&&r.m(e,null),n=!0,o||(s=gn(t=rm.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:l[0]})),o=!0)},p(a,[c]){r&&r.p&&(!n||c&4)&&qt(r,i,a,a[2],n?Qt(i,a[2],c,null):Jt(a[2]),null),t&&$t(t.update)&&c&1&&t.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){n||(C(r,a),n=!0)},o(a){N(r,a),n=!1},d(a){a&&_(e),r&&r.d(a),o=!1,s()}}}function am(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{domNode:i}=jt();return ce(l,i,r=>t(0,n=r)),l.$$set=r=>{"$$scope"in r&&t(2,s=r.$$scope)},[n,i,s,o]}class cm extends Le{constructor(e){super(),Re(this,e,am,im,Fe,{})}}function Sa(){const{edgeLookup:l,selectionRect:e,selectionRectMode:t,multiselectionKeyPressed:n,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:i}=jt();return r=>{const a=me(l).get(r);if(!a){console.warn("012",Kl.error012(r));return}(a.selectable||me(i)&&typeof a.selectable>"u")&&(e.set(null),t.set(null),a.selected?a.selected&&me(n)&&s({nodes:[],edges:[a]}):o([r]))}}function um(l){let e,t,n=`translate(-50%, -50%) translate(${l[1]}px,${l[2]}px)`,o,s,i;const r=l[5].default,a=Gt(r,l,l[7],null);return{c(){e=V("div"),a&&a.c(),this.h()},l(c){e=z(c,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var u=M(e);a&&a.l(u),u.forEach(_),this.h()},h(){m(e,"class","svelte-flow__edge-label"),m(e,"style",t="pointer-events: all;"+l[0]),m(e,"role","button"),m(e,"tabindex","-1"),$e(e,"transform",n)},m(c,u){B(c,e,u),a&&a.m(e,null),o=!0,s||(i=[ke(e,"keyup",dm),ke(e,"click",l[6])],s=!0)},p(c,u){a&&a.p&&(!o||u&128)&&qt(a,r,c,c[7],o?Qt(r,c[7],u,null):Jt(c[7]),null),(!o||u&1&&t!==(t="pointer-events: all;"+c[0]))&&m(e,"style",t);const f=u&1;(u&7&&n!==(n=`translate(-50%, -50%) translate(${c[1]}px,${c[2]}px)`)||f)&&$e(e,"transform",n)},i(c){o||(C(a,c),o=!0)},o(c){N(a,c),o=!1},d(c){c&&_(e),a&&a.d(c),s=!1,en(i)}}}function fm(l){let e,t;return e=new cm({props:{$$slots:{default:[um]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}const dm=()=>{};function hm(l,e,t){let{$$slots:n={},$$scope:o}=e,{style:s=void 0}=e,{x:i=void 0}=e,{y:r=void 0}=e;const a=Sa(),c=Wt("svelteflow__edge_id"),u=()=>{c&&a(c)};return l.$$set=f=>{"style"in f&&t(0,s=f.style),"x"in f&&t(1,i=f.x),"y"in f&&t(2,r=f.y),"$$scope"in f&&t(7,o=f.$$scope)},[s,i,r,a,c,n,u,o]}class mm extends Le{constructor(e){super(),Re(this,e,hm,fm,Fe,{style:0,x:1,y:2})}}function gm(l){let e;return{c(){e=Ve("path"),this.h()},l(t){e=ze(t,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),M(e).forEach(_),this.h()},h(){m(e,"d",l[1]),m(e,"stroke-opacity",0),m(e,"stroke-width",l[10]),m(e,"fill","none"),m(e,"class","svelte-flow__edge-interaction")},m(t,n){B(t,e,n)},p(t,n){n&2&&m(e,"d",t[1])},d(t){t&&_(e)}}}function Hr(l){let e,t;return e=new mm({props:{x:l[3],y:l[4],style:l[5],$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.x=n[3]),o&16&&(s.y=n[4]),o&32&&(s.style=n[5]),o&4100&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function _m(l){let e;return{c(){e=Ie(l[2])},l(t){e=Se(t,l[2])},m(t,n){B(t,e,n)},p(t,n){n&4&&Te(e,t[2])},d(t){t&&_(e)}}}function pm(l){let e,t,n,o,s,i,r=l[10]&&gm(l),a=l[2]&&Hr(l);return{c(){e=Ve("path"),n=$(),r&&r.c(),o=$(),a&&a.c(),s=Ae(),this.h()},l(c){e=ze(c,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),M(e).forEach(_),n=ee(c),r&&r.l(c),o=ee(c),a&&a.l(c),s=Ae(),this.h()},h(){m(e,"id",l[0]),m(e,"d",l[1]),m(e,"class",t=Ht(["svelte-flow__edge-path",l[9]])),m(e,"marker-start",l[6]),m(e,"marker-end",l[7]),m(e,"fill","none"),m(e,"style",l[8])},m(c,u){B(c,e,u),B(c,n,u),r&&r.m(c,u),B(c,o,u),a&&a.m(c,u),B(c,s,u),i=!0},p(c,[u]){(!i||u&1)&&m(e,"id",c[0]),(!i||u&2)&&m(e,"d",c[1]),(!i||u&512&&t!==(t=Ht(["svelte-flow__edge-path",c[9]])))&&m(e,"class",t),(!i||u&64)&&m(e,"marker-start",c[6]),(!i||u&128)&&m(e,"marker-end",c[7]),(!i||u&256)&&m(e,"style",c[8]),c[10]&&r.p(c,u),c[2]?a?(a.p(c,u),u&4&&C(a,1)):(a=Hr(c),a.c(),C(a,1),a.m(s.parentNode,s)):a&&(He(),N(a,1,1,()=>{a=null}),Be())},i(c){i||(C(a),i=!0)},o(c){N(a),i=!1},d(c){c&&(_(e),_(n),_(o),_(s)),r&&r.d(c),a&&a.d(c)}}}function bm(l,e,t){let{id:n=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:i=void 0}=e,{labelY:r=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:c=void 0}=e,{markerEnd:u=void 0}=e,{style:f=void 0}=e,{interactionWidth:h=20}=e,{class:d=void 0}=e,p=h===void 0?20:h;return l.$$set=b=>{"id"in b&&t(0,n=b.id),"path"in b&&t(1,o=b.path),"label"in b&&t(2,s=b.label),"labelX"in b&&t(3,i=b.labelX),"labelY"in b&&t(4,r=b.labelY),"labelStyle"in b&&t(5,a=b.labelStyle),"markerStart"in b&&t(6,c=b.markerStart),"markerEnd"in b&&t(7,u=b.markerEnd),"style"in b&&t(8,f=b.style),"interactionWidth"in b&&t(11,h=b.interactionWidth),"class"in b&&t(9,d=b.class)},[n,o,s,i,r,a,c,u,f,d,p,h]}class zo extends Le{constructor(e){super(),Re(this,e,bm,pm,Fe,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function vm(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function wm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ft(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{sourcePosition:b}=e,{targetX:w}=e,{targetY:g}=e,{targetPosition:v}=e;return l.$$set=k=>{e=kt(kt({},e),Bn(k)),t(15,Ft(e,i)),"label"in k&&t(0,r=k.label),"labelStyle"in k&&t(1,a=k.labelStyle),"style"in k&&t(2,c=k.style),"markerStart"in k&&t(3,u=k.markerStart),"markerEnd"in k&&t(4,f=k.markerEnd),"interactionWidth"in k&&t(5,h=k.interactionWidth),"sourceX"in k&&t(9,d=k.sourceX),"sourceY"in k&&t(10,p=k.sourceY),"sourcePosition"in k&&t(11,b=k.sourcePosition),"targetX"in k&&t(12,w=k.targetX),"targetY"in k&&t(13,g=k.targetY),"targetPosition"in k&&t(14,v=k.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=aa({sourceX:d,sourceY:p,targetX:w,targetY:g,sourcePosition:b,targetPosition:v}),n,(t(7,o),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)),(t(6,s),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)))},[r,a,c,u,f,h,s,o,n,d,p,b,w,g,v]}class Ca extends Le{constructor(e){super(),Re(this,e,wm,vm,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function km(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function ym(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ft(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{sourcePosition:b}=e,{targetX:w}=e,{targetY:g}=e,{targetPosition:v}=e;return l.$$set=k=>{e=kt(kt({},e),Bn(k)),t(15,Ft(e,i)),"label"in k&&t(0,r=k.label),"labelStyle"in k&&t(1,a=k.labelStyle),"style"in k&&t(2,c=k.style),"markerStart"in k&&t(3,u=k.markerStart),"markerEnd"in k&&t(4,f=k.markerEnd),"interactionWidth"in k&&t(5,h=k.interactionWidth),"sourceX"in k&&t(9,d=k.sourceX),"sourceY"in k&&t(10,p=k.sourceY),"sourcePosition"in k&&t(11,b=k.sourcePosition),"targetX"in k&&t(12,w=k.targetX),"targetY"in k&&t(13,g=k.targetY),"targetPosition"in k&&t(14,v=k.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=_o({sourceX:d,sourceY:p,targetX:w,targetY:g,sourcePosition:b,targetPosition:v}),n,(t(7,o),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)),(t(6,s),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)))},[r,a,c,u,f,h,s,o,n,d,p,b,w,g,v]}class Em extends Le{constructor(e){super(),Re(this,e,ym,km,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Im(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Sm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Ft(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{targetX:b}=e,{targetY:w}=e;return l.$$set=g=>{e=kt(kt({},e),Bn(g)),t(13,Ft(e,i)),"label"in g&&t(0,r=g.label),"labelStyle"in g&&t(1,a=g.labelStyle),"style"in g&&t(2,c=g.style),"markerStart"in g&&t(3,u=g.markerStart),"markerEnd"in g&&t(4,f=g.markerEnd),"interactionWidth"in g&&t(5,h=g.interactionWidth),"sourceX"in g&&t(9,d=g.sourceX),"sourceY"in g&&t(10,p=g.sourceY),"targetX"in g&&t(11,b=g.targetX),"targetY"in g&&t(12,w=g.targetY)},l.$$.update=()=>{l.$$.dirty&7680&&t(8,[n,o,s]=ua({sourceX:d,sourceY:p,targetX:b,targetY:w}),n,(t(7,o),t(9,d),t(10,p),t(11,b),t(12,w)),(t(6,s),t(9,d),t(10,p),t(11,b),t(12,w)))},[r,a,c,u,f,h,s,o,n,d,p,b,w]}class Cm extends Le{constructor(e){super(),Re(this,e,Sm,Im,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function Dm(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Mm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ft(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{sourcePosition:b}=e,{targetX:w}=e,{targetY:g}=e,{targetPosition:v}=e;return l.$$set=k=>{e=kt(kt({},e),Bn(k)),t(15,Ft(e,i)),"label"in k&&t(0,r=k.label),"labelStyle"in k&&t(1,a=k.labelStyle),"style"in k&&t(2,c=k.style),"markerStart"in k&&t(3,u=k.markerStart),"markerEnd"in k&&t(4,f=k.markerEnd),"interactionWidth"in k&&t(5,h=k.interactionWidth),"sourceX"in k&&t(9,d=k.sourceX),"sourceY"in k&&t(10,p=k.sourceY),"sourcePosition"in k&&t(11,b=k.sourcePosition),"targetX"in k&&t(12,w=k.targetX),"targetY"in k&&t(13,g=k.targetY),"targetPosition"in k&&t(14,v=k.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=_o({sourceX:d,sourceY:p,targetX:w,targetY:g,sourcePosition:b,targetPosition:v,borderRadius:0}),n,(t(7,o),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)),(t(6,s),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)))},[r,a,c,u,f,h,s,o,n,d,p,b,w,g,v]}class Tm extends Le{constructor(e){super(),Re(this,e,Mm,Dm,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Vm(l,e){const t=l.set,n=e.set,o=me(l),s=me(e);let r=o.length===0&&s.length>0?s:o;l.set(r);const a=c=>{const u=t(c);return r=u,n(r),u};l.set=e.set=a,l.update=e.update=c=>a(c(r))}function zm(l,e){const t=l.set,n=e.set;let o=me(e);l.set(o);const s=i=>{t(i),n(i),o=i};l.set=e.set=s,l.update=e.update=i=>s(i(o))}const Nm=(l,e,t)=>{if(!t)return;const n=me(l),o=e.set,s=t.set;let i=t?me(t):{x:0,y:0,zoom:1};e.set(i),e.set=r=>(o(r),s(r),i=r,r),t.set=r=>(n==null||n.syncViewport(r),o(r),s(r),i=r,r),e.update=r=>{e.set(r(i))},t.update=r=>{t.set(r(i))}},Pm=(l,e,t,n=[0,0],o=uo)=>{const{subscribe:s,set:i,update:r}=Qe([]);let a=l,c={},u=!0;const f=b=>(ha(b,e,t,{elevateNodesOnSelect:u,nodeOrigin:n,nodeExtent:o,defaults:c,checkEquality:!1}),a=b,i(a),a),h=b=>f(b(a)),d=b=>{c=b},p=b=>{u=b.elevateNodesOnSelect??u};return f(a),{subscribe:s,set:f,update:h,setDefaultOptions:d,setOptions:p}},Om=(l,e,t,n)=>{const{subscribe:o,set:s,update:i}=Qe([]);let r=l,a={};const c=h=>{const d=a?h.map(p=>({...a,...p})):h;_a(e,t,d),r=d,s(r)},u=h=>c(h(r)),f=h=>{a=h};return c(r),{subscribe:o,set:c,update:u,setDefaultOptions:f}},Da={input:em,output:lm,default:Ia,group:sm},Ma={straight:Cm,smoothstep:Em,default:Ca,step:Tm},Hm=({nodes:l=[],edges:e=[],width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i})=>{const r=new Map,a=new Map,c=new Map,u=new Map,f=s??[0,0],h=i??uo;ha(l,r,a,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),_a(c,u,e);let d={x:0,y:0,zoom:1};if(o&&t&&n){const p=Do(r,{filter:b=>!!((b.width||b.initialWidth)&&(b.height||b.initialHeight))});d=os(p,t,n,.5,2,.1)}return{flowId:Qe(null),nodes:Pm(l,r,a,f,h),nodeLookup:Pn(r),parentLookup:Pn(a),edgeLookup:Pn(u),visibleNodes:Pn([]),edges:Om(e,c,u),visibleEdges:Pn([]),connectionLookup:Pn(c),height:Qe(500),width:Qe(500),minZoom:Qe(.5),maxZoom:Qe(2),nodeOrigin:Qe(f),nodeDragThreshold:Qe(1),nodeExtent:Qe(h),translateExtent:Qe(uo),autoPanOnNodeDrag:Qe(!0),autoPanOnConnect:Qe(!0),fitViewOnInit:Qe(!1),fitViewOnInitDone:Qe(!1),fitViewOptions:Qe(void 0),panZoom:Qe(null),snapGrid:Qe(null),dragging:Qe(!1),selectionRect:Qe(null),selectionKeyPressed:Qe(!1),multiselectionKeyPressed:Qe(!1),deleteKeyPressed:Qe(!1),panActivationKeyPressed:Qe(!1),zoomActivationKeyPressed:Qe(!1),selectionRectMode:Qe(null),selectionMode:Qe(fo.Partial),nodeTypes:Qe(Da),edgeTypes:Qe(Ma),viewport:Qe(d),connectionMode:Qe(fl.Strict),domNode:Qe(null),connection:Pn(Go),connectionLineType:Qe(El.Bezier),connectionRadius:Qe(20),isValidConnection:Qe(()=>!0),nodesDraggable:Qe(!0),nodesConnectable:Qe(!0),elementsSelectable:Qe(!0),selectNodesOnDrag:Qe(!0),markers:Pn([]),defaultMarkerColor:Qe("#b1b1b7"),lib:Pn("svelte"),onlyRenderVisibleElements:Qe(!1),onerror:Qe(uh),ondelete:Qe(void 0),onedgecreate:Qe(void 0),onconnect:Qe(void 0),onconnectstart:Qe(void 0),onconnectend:Qe(void 0),onbeforedelete:Qe(void 0),nodesInitialized:Qe(!1),edgesInitialized:Qe(!1),viewportInitialized:Qe(!1),initialized:Pn(!1)}};function Bm(l){const e=kl([l.edges,l.nodes,l.nodeLookup,l.onlyRenderVisibleElements,l.viewport,l.width,l.height],([t,,n,o,s,i,r])=>o&&i&&r?t.filter(c=>{const u=n.get(c.source),f=n.get(c.target);return u&&f&&ph({sourceNode:u,targetNode:f,width:i,height:r,transform:[s.x,s.y,s.zoom]})}):t);return kl([e,l.nodes,l.nodeLookup,l.connectionMode,l.onerror],([t,,n,o,s])=>t.reduce((r,a)=>{const c=n.get(a.source),u=n.get(a.target);if(!c||!u)return r;const f=Ih({id:a.id,sourceNode:c,targetNode:u,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return f&&r.push({...a,zIndex:_h({selected:a.selected,zIndex:a.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),r},[]))}function Am(l){return kl([l.nodeLookup,l.onlyRenderVisibleElements,l.width,l.height,l.viewport,l.nodes],([e,t,n,o,s])=>{const i=[s.x,s.y,s.zoom];return t?ta(e,{x:0,y:0,width:n,height:o},i,!0):Array.from(e.values())})}const No=Symbol();function Ta({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i}){const r=Hm({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i});function a(P){r.nodeTypes.set({...Da,...P})}function c(P){r.edgeTypes.set({...Ma,...P})}function u(P){const j=me(r.edges);r.edges.set(wh(P,j))}const f=(P,j=!1)=>{var X;const G=me(r.nodeLookup);for(const[Z,J]of P){const L=(X=G.get(Z))==null?void 0:X.internals.userNode;L&&(L.position=J.position,L.dragging=j)}r.nodes.update(Z=>Z)};function h(P){var Z,J,L;const j=me(r.nodeLookup),{changes:G,updatedInternals:X}=Vh(P,j,me(r.parentLookup),me(r.domNode),me(r.nodeOrigin));if(X){if(!me(r.fitViewOnInitDone)&&me(r.fitViewOnInit)){const re=me(r.fitViewOptions),q=p({...re,nodes:re==null?void 0:re.nodes});r.fitViewOnInitDone.set(q)}for(const re of G){const q=(Z=j.get(re.id))==null?void 0:Z.internals.userNode;if(q)switch(re.type){case"dimensions":{const ae={...q.measured,...re.dimensions};re.setAttributes&&(q.width=((J=re.dimensions)==null?void 0:J.width)??q.width,q.height=((L=re.dimensions)==null?void 0:L.height)??q.height),q.measured=ae;break}case"position":q.position=re.position??q.position;break}}r.nodes.update(re=>re),me(r.nodesInitialized)||r.nodesInitialized.set(!0)}}function d(P){const j=me(r.panZoom);if(!j)return Promise.resolve(!1);const G=wr(me(r.nodeLookup),P);return kr({nodes:G,width:me(r.width),height:me(r.height),minZoom:me(r.minZoom),maxZoom:me(r.maxZoom),panZoom:j},P)}function p(P){const j=me(r.panZoom);if(!j)return!1;const G=wr(me(r.nodeLookup),P);return kr({nodes:G,width:me(r.width),height:me(r.height),minZoom:me(r.minZoom),maxZoom:me(r.maxZoom),panZoom:j},P),G.size>0}function b(P,j){const G=me(r.panZoom);return G?G.scaleBy(P,j):Promise.resolve(!1)}function w(P){return b(1.2,P)}function g(P){return b(1/1.2,P)}function v(P){const j=me(r.panZoom);j&&(j.setScaleExtent([P,me(r.maxZoom)]),r.minZoom.set(P))}function k(P){const j=me(r.panZoom);j&&(j.setScaleExtent([me(r.minZoom),P]),r.maxZoom.set(P))}function E(P){const j=me(r.panZoom);j&&(j.setTranslateExtent(P),r.translateExtent.set(P))}function I(P){let j=!1;return P.forEach(G=>{G.selected&&(G.selected=!1,j=!0)}),j}function T(P){var j;(j=me(r.panZoom))==null||j.setClickDistance(P)}function S(P){I((P==null?void 0:P.nodes)||me(r.nodes))&&r.nodes.set(me(r.nodes)),I((P==null?void 0:P.edges)||me(r.edges))&&r.edges.set(me(r.edges))}r.deleteKeyPressed.subscribe(async P=>{var j;if(P){const G=me(r.nodes),X=me(r.edges),Z=G.filter(q=>q.selected),J=X.filter(q=>q.selected),{nodes:L,edges:re}=await na({nodesToRemove:Z,edgesToRemove:J,nodes:G,edges:X,onBeforeDelete:me(r.onbeforedelete)});(L.length||re.length)&&(r.nodes.update(q=>q.filter(ae=>!L.some(ge=>ge.id===ae.id))),r.edges.update(q=>q.filter(ae=>!re.some(ge=>ge.id===ae.id))),(j=me(r.ondelete))==null||j({nodes:L,edges:re}))}});function A(P){const j=me(r.multiselectionKeyPressed);r.nodes.update(G=>G.map(X=>{const Z=P.includes(X.id),J=j&&X.selected||Z;return X.selected=J,X})),j||r.edges.update(G=>G.map(X=>(X.selected=!1,X)))}function O(P){const j=me(r.multiselectionKeyPressed);r.edges.update(G=>G.map(X=>{const Z=P.includes(X.id),J=j&&X.selected||Z;return X.selected=J,X})),j||r.nodes.update(G=>G.map(X=>(X.selected=!1,X)))}function H(P){var G;const j=(G=me(r.nodes))==null?void 0:G.find(X=>X.id===P);if(!j){console.warn("012",Kl.error012(P));return}r.selectionRect.set(null),r.selectionRectMode.set(null),j.selected?j.selected&&me(r.multiselectionKeyPressed)&&S({nodes:[j],edges:[]}):A([P])}function F(P){const j=me(r.viewport);return zh({delta:P,panZoom:me(r.panZoom),transform:[j.x,j.y,j.zoom],translateExtent:me(r.translateExtent),width:me(r.width),height:me(r.height)})}const K=Qe(Go),U=P=>{K.set({...P})};function D(){K.set(Go)}function Y(){r.fitViewOnInitDone.set(!1),r.selectionRect.set(null),r.selectionRectMode.set(null),r.snapGrid.set(null),r.isValidConnection.set(()=>!0),S(),D()}return{...r,visibleEdges:Bm(r),visibleNodes:Am(r),connection:kl([K,r.viewport],([P,j])=>P.inProgress?{...P,to:Zl(P.to,[j.x,j.y,j.zoom])}:{...P}),markers:kl([r.edges,r.defaultMarkerColor,r.flowId],([P,j,G])=>Sh(P,{defaultColor:j,id:G})),initialized:(()=>{let P=!1;const j=me(r.nodes).length,G=me(r.edges).length;return kl([r.nodesInitialized,r.edgesInitialized,r.viewportInitialized],([X,Z,J])=>P||(j===0?P=J:G===0?P=J&&X:P=J&&X&&Z,P))})(),syncNodeStores:P=>Vm(r.nodes,P),syncEdgeStores:P=>zm(r.edges,P),syncViewport:P=>Nm(r.panZoom,r.viewport,P),setNodeTypes:a,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:w,zoomOut:g,fitView:P=>d(P),setMinZoom:v,setMaxZoom:k,setTranslateExtent:E,setPaneClickDistance:T,unselectNodesAndEdges:S,addSelectedNodes:A,addSelectedEdges:O,handleNodeSelection:H,panBy:F,updateConnection:U,cancelConnection:D,reset:Y}}function jt(){const l=Wt(No);if(!l)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return l.getStore()}function Lm({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i}){const r=Ta({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i});return Ol(No,{getStore:()=>r}),r}function Rm(l,e){const{panZoom:t,minZoom:n,maxZoom:o,initialViewport:s,viewport:i,dragging:r,translateExtent:a,paneClickDistance:c}=e,u=Zh({domNode:l,minZoom:n,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:c,onDraggingChange:r.set}),f=u.getViewport();return i.set(f),t.set(u),u.update(e),{update(h){u.update(h)}}}function Um(l){let e,t,n,o,s;const i=l[35].default,r=Gt(i,l,l[34],null);return{c(){e=V("div"),r&&r.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=M(e);r&&r.l(c),c.forEach(_),this.h()},h(){m(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,c){B(a,e,c),r&&r.m(e,null),n=!0,o||(s=gn(t=Rm.call(null,e,{viewport:l[18],minZoom:l[12],maxZoom:l[13],initialViewport:l[11],dragging:l[23],panZoom:l[19],onPanZoomStart:l[0],onPanZoom:l[1],onPanZoomEnd:l[2],zoomOnScroll:l[5],zoomOnDoubleClick:l[6],zoomOnPinch:l[7],panOnScroll:l[9],panOnDrag:l[10],panOnScrollSpeed:.5,panOnScrollMode:l[3]||Yn.Free,zoomActivationKeyPressed:l[14],preventScrolling:typeof l[4]=="boolean"?l[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l[15],translateExtent:l[16],lib:l[17],paneClickDistance:l[8],onTransformChange:l[29]})),o=!0)},p(a,c){r&&r.p&&(!n||c[1]&8)&&qt(r,i,a,a[34],n?Qt(i,a[34],c,null):Jt(a[34]),null),t&&$t(t.update)&&c[0]&262143&&t.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||Yn.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){n||(C(r,a),n=!0)},o(a){N(r,a),n=!1},d(a){a&&_(e),r&&r.d(a),o=!1,s()}}}function Wm(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,{$$slots:p={},$$scope:b}=e,{initialViewport:w=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:v=void 0}=e,{onMoveEnd:k=void 0}=e,{panOnScrollMode:E}=e,{preventScrolling:I}=e,{zoomOnScroll:T}=e,{zoomOnDoubleClick:S}=e,{zoomOnPinch:A}=e,{panOnDrag:O}=e,{panOnScroll:H}=e,{paneClickDistance:F}=e;const{viewport:K,panZoom:U,selectionRect:D,minZoom:Y,maxZoom:P,dragging:j,translateExtent:G,lib:X,panActivationKeyPressed:Z,zoomActivationKeyPressed:J,viewportInitialized:L}=jt();ce(l,D,q=>t(15,f=q)),ce(l,Y,q=>t(12,a=q)),ce(l,P,q=>t(13,c=q)),ce(l,G,q=>t(16,h=q)),ce(l,X,q=>t(17,d=q)),ce(l,Z,q=>t(33,r=q)),ce(l,J,q=>t(14,u=q)),ce(l,L,q=>t(36,i=q));const re=q=>K.set({x:q[0],y:q[1],zoom:q[2]});return pn(()=>{io(L,i=!0,i)}),l.$$set=q=>{"initialViewport"in q&&t(30,w=q.initialViewport),"onMoveStart"in q&&t(0,g=q.onMoveStart),"onMove"in q&&t(1,v=q.onMove),"onMoveEnd"in q&&t(2,k=q.onMoveEnd),"panOnScrollMode"in q&&t(3,E=q.panOnScrollMode),"preventScrolling"in q&&t(4,I=q.preventScrolling),"zoomOnScroll"in q&&t(5,T=q.zoomOnScroll),"zoomOnDoubleClick"in q&&t(6,S=q.zoomOnDoubleClick),"zoomOnPinch"in q&&t(7,A=q.zoomOnPinch),"panOnDrag"in q&&t(31,O=q.panOnDrag),"panOnScroll"in q&&t(32,H=q.panOnScroll),"paneClickDistance"in q&&t(8,F=q.paneClickDistance),"$$scope"in q&&t(34,b=q.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1073741824&&t(11,n=w||{x:0,y:0,zoom:1}),l.$$.dirty[1]&5&&t(10,o=r||O),l.$$.dirty[1]&6&&t(9,s=r||H)},[g,v,k,E,I,T,S,A,F,s,o,n,a,c,u,f,h,d,K,U,D,Y,P,j,G,X,Z,J,L,re,w,O,H,r,b,p]}class Fm extends Le{constructor(e){super(),Re(this,e,Wm,Um,Fe,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function jm(l){let e,t,n,o;const s=l[28].default,i=Gt(s,l,l[27],null);return{c(){e=V("div"),i&&i.c(),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);i&&i.l(a),a.forEach(_),this.h()},h(){m(e,"class","svelte-flow__pane svelte-1esy7hx"),lt(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),lt(e,"dragging",l[4]),lt(e,"selection",l[1])},m(r,a){B(r,e,a),i&&i.m(e,null),l[29](e),t=!0,n||(o=[ke(e,"click",function(){$t(l[3]?void 0:oo(l[15],l[2]))&&(l[3]?void 0:oo(l[15],l[2])).apply(this,arguments)}),ke(e,"pointerdown",function(){$t(l[3]?l[16]:void 0)&&(l[3]?l[16]:void 0).apply(this,arguments)}),ke(e,"pointermove",function(){$t(l[3]?l[17]:void 0)&&(l[3]?l[17]:void 0).apply(this,arguments)}),ke(e,"pointerup",function(){$t(l[3]?l[18]:void 0)&&(l[3]?l[18]:void 0).apply(this,arguments)}),ke(e,"contextmenu",function(){$t(oo(l[19],l[2]))&&oo(l[19],l[2]).apply(this,arguments)})],n=!0)},p(r,a){l=r,i&&i.p&&(!t||a[0]&134217728)&&qt(i,s,l,l[27],t?Qt(s,l[27],a,null):Jt(l[27]),null),(!t||a[0]&1)&&lt(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),(!t||a[0]&16)&&lt(e,"dragging",l[4]),(!t||a[0]&2)&&lt(e,"selection",l[1])},i(r){t||(C(i,r),t=!0)},o(r){N(i,r),t=!1},d(r){r&&_(e),i&&i.d(r),l[29](null),n=!1,en(o)}}}function oo(l,e){return t=>{t.target===e&&(l==null||l(t))}}function Br(l){return e=>{const t=l.includes(e.id);return e.selected!==t&&(e.selected=t),e}}function Ym(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,p,b,{$$slots:w={},$$scope:g}=e,{panOnDrag:v=void 0}=e,{selectionOnDrag:k=void 0}=e;const E=ln(),{nodes:I,nodeLookup:T,edges:S,viewport:A,dragging:O,elementsSelectable:H,selectionRect:F,selectionRectMode:K,selectionKeyPressed:U,selectionMode:D,panActivationKeyPressed:Y,unselectNodesAndEdges:P}=jt();ce(l,T,se=>t(36,f=se)),ce(l,S,se=>t(33,a=se)),ce(l,A,se=>t(35,u=se)),ce(l,O,se=>t(4,b=se)),ce(l,H,se=>t(25,d=se)),ce(l,F,se=>t(24,h=se)),ce(l,K,se=>t(23,r=se)),ce(l,U,se=>t(22,i=se)),ce(l,D,se=>t(34,c=se)),ce(l,Y,se=>t(26,p=se));let j,G=null,X=[],Z=!1;function J(se){if(Z){Z=!1;return}E("paneclick",{event:se}),P(),K.set(null)}function L(se){var fe,Ce;if(G=j.getBoundingClientRect(),!H||!o||se.button!==0||se.target!==j||!G)return;(Ce=(fe=se.target)==null?void 0:fe.setPointerCapture)==null||Ce.call(fe,se.pointerId);const{x:Oe,y:Q}=qn(se,G);P(),F.set({width:0,height:0,startX:Oe,startY:Q,x:Oe,y:Q})}function re(se){if(!o||!G||!h)return;Z=!0;const Oe=qn(se,G),Q=h.startX??0,fe=h.startY??0,Ce={...h,x:Oe.x<Q?Oe.x:Q,y:Oe.y<fe?Oe.y:fe,width:Math.abs(Oe.x-Q),height:Math.abs(Oe.y-fe)},Ge=X.map(at=>at.id),Ke=qo(X,a).map(at=>at.id);X=ta(f,Ce,[u.x,u.y,u.zoom],c===fo.Partial,!0);const ue=qo(X,a).map(at=>at.id),it=X.map(at=>at.id);(Ge.length!==it.length||it.some(at=>!Ge.includes(at)))&&I.update(at=>at.map(Br(it))),(Ke.length!==ue.length||ue.some(at=>!Ke.includes(at)))&&S.update(at=>at.map(Br(ue))),K.set("user"),F.set(Ce)}function q(se){var Oe,Q;se.button===0&&((Q=(Oe=se.target)==null?void 0:Oe.releasePointerCapture)==null||Q.call(Oe,se.pointerId),!o&&r==="user"&&se.target===j&&(J==null||J(se)),F.set(null),X.length>0&&io(K,r="nodes",r),i&&(Z=!1))}const ae=se=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){se.preventDefault();return}E("panecontextmenu",{event:se})};function ge(se){We[se?"unshift":"push"](()=>{j=se,t(2,j)})}return l.$$set=se=>{"panOnDrag"in se&&t(0,v=se.panOnDrag),"selectionOnDrag"in se&&t(20,k=se.selectionOnDrag),"$$scope"in se&&t(27,g=se.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&67108865&&t(21,n=p||v),l.$$.dirty[0]&24117248&&t(1,o=i||h||k&&n!==!0),l.$$.dirty[0]&41943042&&t(3,s=d&&(o||r==="user"))},[v,o,j,s,b,T,S,A,O,H,F,K,U,D,Y,J,L,re,q,ae,k,n,i,r,h,d,p,g,w,ge]}class Xm extends Le{constructor(e){super(),Re(this,e,Ym,jm,Fe,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function Km(l){let e,t;const n=l[3].default,o=Gt(n,l,l[2],null);return{c(){e=V("div"),o&&o.c(),this.h()},l(s){e=z(s,"DIV",{class:!0,style:!0});var i=M(e);o&&o.l(i),i.forEach(_),this.h()},h(){m(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),$e(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},m(s,i){B(s,e,i),o&&o.m(e,null),t=!0},p(s,[i]){o&&o.p&&(!t||i&4)&&qt(o,n,s,s[2],t?Qt(n,s[2],i,null):Jt(s[2]),null),(!t||i&1)&&$e(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){t||(C(o,s),t=!0)},o(s){N(o,s),t=!1},d(s){s&&_(e),o&&o.d(s)}}}function Zm(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{viewport:i}=jt();return ce(l,i,r=>t(0,n=r)),l.$$set=r=>{"$$scope"in r&&t(2,s=r.$$scope)},[n,i,s,o]}class Gm extends Le{constructor(e){super(),Re(this,e,Zm,Km,Fe,{})}}function Va(l,e){const{store:t,onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:i}=e,r=Ph({onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const c=me(t.snapGrid),u=me(t.viewport);return{nodes:me(t.nodes),nodeLookup:me(t.nodeLookup),edges:me(t.edges),nodeExtent:me(t.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:me(t.nodeOrigin),multiSelectionActive:me(t.multiselectionKeyPressed),domNode:me(t.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:me(t.autoPanOnNodeDrag),nodesDraggable:me(t.nodesDraggable),selectNodesOnDrag:me(t.selectNodesOnDrag),nodeDragThreshold:me(t.nodeDragThreshold),unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodePositions:t.updateNodePositions,panBy:t.panBy}}});function a(c,u){if(u.disabled){r.destroy();return}r.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return a(l,e),{update(c){a(l,c)},destroy(){r.destroy()}}}function qm({width:l,height:e,initialWidth:t,initialHeight:n,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const i=l??t,r=e??n;return{width:i?`width:${i}px;`:"",height:r?`height:${r}px;`:""}}return{width:l?`width:${l}px;`:"",height:e?`height:${e}px;`:""}}function Ar(l){let e,t,n,o,s,i=`translate(${l[12]}px, ${l[13]}px)`,r,a,c;var u=l[27];function f(h,d){return{props:{data:h[2],id:h[1],selected:h[3],selectable:h[5],deletable:h[7],sourcePosition:h[14],targetPosition:h[15],zIndex:h[16],dragging:h[9],draggable:h[4],dragHandle:h[19],parentId:h[21],type:h[25],isConnectable:h[28],positionAbsoluteX:h[12],positionAbsoluteY:h[13],width:h[17],height:h[18]}}}return u&&(t=ao(u,f(l))),{c(){e=V("div"),t&&te(t.$$.fragment),this.h()},l(h){e=z(h,"DIV",{"data-id":!0,class:!0,style:!0});var d=M(e);t&&oe(t.$$.fragment,d),d.forEach(_),this.h()},h(){m(e,"data-id",l[1]),m(e,"class",n=Ht(["svelte-flow__node",`svelte-flow__node-${l[25]}`,l[23]])),m(e,"style",o=(l[10]??"")+";"+l[26].width+l[26].height),lt(e,"dragging",l[9]),lt(e,"selected",l[3]),lt(e,"draggable",l[4]),lt(e,"connectable",l[6]),lt(e,"selectable",l[5]),lt(e,"nopan",l[4]),lt(e,"parent",l[11]),$e(e,"z-index",l[16]),$e(e,"transform",i),$e(e,"visibility",l[20]?"visible":"hidden")},m(h,d){B(h,e,d),t&&ne(t,e,null),l[50](e),r=!0,a||(c=[gn(s=Va.call(null,e,{nodeId:l[1],isSelectable:l[5],disabled:!1,handleSelector:l[19],noDragClass:"nodrag",nodeClickDistance:l[22],onNodeMouseDown:l[31],onDrag:l[47],onDragStart:l[48],onDragStop:l[49],store:l[29]})),ke(e,"click",l[34]),ke(e,"mouseenter",l[51]),ke(e,"mouseleave",l[52]),ke(e,"mousemove",l[53]),ke(e,"contextmenu",l[54])],a=!0)},p(h,d){if(d[0]&134217728&&u!==(u=h[27])){if(t){He();const b=t;N(b.$$.fragment,1,0,()=>{le(b,1)}),Be()}u?(t=ao(u,f(h)),te(t.$$.fragment),C(t.$$.fragment,1),ne(t,e,null)):t=null}else if(u){const b={};d[0]&4&&(b.data=h[2]),d[0]&2&&(b.id=h[1]),d[0]&8&&(b.selected=h[3]),d[0]&32&&(b.selectable=h[5]),d[0]&128&&(b.deletable=h[7]),d[0]&16384&&(b.sourcePosition=h[14]),d[0]&32768&&(b.targetPosition=h[15]),d[0]&65536&&(b.zIndex=h[16]),d[0]&512&&(b.dragging=h[9]),d[0]&16&&(b.draggable=h[4]),d[0]&524288&&(b.dragHandle=h[19]),d[0]&2097152&&(b.parentId=h[21]),d[0]&33554432&&(b.type=h[25]),d[0]&268435456&&(b.isConnectable=h[28]),d[0]&4096&&(b.positionAbsoluteX=h[12]),d[0]&8192&&(b.positionAbsoluteY=h[13]),d[0]&131072&&(b.width=h[17]),d[0]&262144&&(b.height=h[18]),t.$set(b)}(!r||d[0]&2)&&m(e,"data-id",h[1]),(!r||d[0]&41943040&&n!==(n=Ht(["svelte-flow__node",`svelte-flow__node-${h[25]}`,h[23]])))&&m(e,"class",n),(!r||d[0]&67109888&&o!==(o=(h[10]??"")+";"+h[26].width+h[26].height))&&m(e,"style",o),s&&$t(s.update)&&d[0]&4718626&&s.update.call(null,{nodeId:h[1],isSelectable:h[5],disabled:!1,handleSelector:h[19],noDragClass:"nodrag",nodeClickDistance:h[22],onNodeMouseDown:h[31],onDrag:h[47],onDragStart:h[48],onDragStop:h[49],store:h[29]}),(!r||d[0]&41943552)&&lt(e,"dragging",h[9]),(!r||d[0]&41943048)&&lt(e,"selected",h[3]),(!r||d[0]&41943056)&&lt(e,"draggable",h[4]),(!r||d[0]&41943104)&&lt(e,"connectable",h[6]),(!r||d[0]&41943072)&&lt(e,"selectable",h[5]),(!r||d[0]&41943056)&&lt(e,"nopan",h[4]),(!r||d[0]&41945088)&&lt(e,"parent",h[11]);const p=d[0]&67109888;(d[0]&67175424||p)&&$e(e,"z-index",h[16]),(d[0]&67122176&&i!==(i=`translate(${h[12]}px, ${h[13]}px)`)||p)&&$e(e,"transform",i),(d[0]&68158464||p)&&$e(e,"visibility",h[20]?"visible":"hidden")},i(h){r||(t&&C(t.$$.fragment,h),r=!0)},o(h){t&&N(t.$$.fragment,h),r=!1},d(h){h&&_(e),t&&le(t),l[50](null),a=!1,en(c)}}}function Jm(l){let e,t,n=!l[8]&&Ar(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[8]?n&&(He(),N(n,1,1,()=>{n=null}),Be()):n?(n.p(o,s),s[0]&256&&C(n,1)):(n=Ar(o),n.c(),C(n,1),n.m(e.parentNode,e))},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Qm(l,e,t){let n,o,s,i,r,a,{node:c}=e,{id:u}=e,{data:f={}}=e,{selected:h=!1}=e,{draggable:d=void 0}=e,{selectable:p=void 0}=e,{connectable:b=!0}=e,{deletable:w=!0}=e,{hidden:g=!1}=e,{dragging:v=!1}=e,{resizeObserver:k=null}=e,{style:E=void 0}=e,{type:I="default"}=e,{isParent:T=!1}=e,{positionX:S}=e,{positionY:A}=e,{sourcePosition:O=void 0}=e,{targetPosition:H=void 0}=e,{zIndex:F}=e,{measuredWidth:K=void 0}=e,{measuredHeight:U=void 0}=e,{initialWidth:D=void 0}=e,{initialHeight:Y=void 0}=e,{width:P=void 0}=e,{height:j=void 0}=e,{dragHandle:G=void 0}=e,{initialized:X=!1}=e,{parentId:Z=void 0}=e,{nodeClickDistance:J=void 0}=e,{class:L=""}=e;const re=jt(),{nodeTypes:q,nodeDragThreshold:ae,selectNodesOnDrag:ge,handleNodeSelection:se,updateNodeInternals:Oe}=re;ce(l,q,he=>t(46,r=he));let Q,fe=null;const Ce=ln(),Ge=Qe(b);ce(l,Ge,he=>t(28,a=he));let Ke,ue,it;Ol("svelteflow__node_id",u),Ol("svelteflow__node_connectable",Ge),ll(()=>{fe&&(k==null||k.unobserve(fe))});function at(he){p&&(!me(ge)||!d||me(ae)>0)&&se(u),Ce("nodeclick",{node:c.internals.userNode,event:he})}const Yt=(he,wt,dt,pt)=>{Ce("nodedrag",{event:he,targetNode:dt,nodes:pt})},St=(he,wt,dt,pt)=>{Ce("nodedragstart",{event:he,targetNode:dt,nodes:pt})},_t=(he,wt,dt,pt)=>{Ce("nodedragstop",{event:he,targetNode:dt,nodes:pt})};function Rt(he){We[he?"unshift":"push"](()=>{Q=he,t(24,Q)})}const Tt=he=>Ce("nodemouseenter",{node:c,event:he}),pe=he=>Ce("nodemouseleave",{node:c,event:he}),je=he=>Ce("nodemousemove",{node:c,event:he}),rt=he=>Ce("nodecontextmenu",{node:c,event:he});return l.$$set=he=>{"node"in he&&t(0,c=he.node),"id"in he&&t(1,u=he.id),"data"in he&&t(2,f=he.data),"selected"in he&&t(3,h=he.selected),"draggable"in he&&t(4,d=he.draggable),"selectable"in he&&t(5,p=he.selectable),"connectable"in he&&t(6,b=he.connectable),"deletable"in he&&t(7,w=he.deletable),"hidden"in he&&t(8,g=he.hidden),"dragging"in he&&t(9,v=he.dragging),"resizeObserver"in he&&t(35,k=he.resizeObserver),"style"in he&&t(10,E=he.style),"type"in he&&t(36,I=he.type),"isParent"in he&&t(11,T=he.isParent),"positionX"in he&&t(12,S=he.positionX),"positionY"in he&&t(13,A=he.positionY),"sourcePosition"in he&&t(14,O=he.sourcePosition),"targetPosition"in he&&t(15,H=he.targetPosition),"zIndex"in he&&t(16,F=he.zIndex),"measuredWidth"in he&&t(37,K=he.measuredWidth),"measuredHeight"in he&&t(38,U=he.measuredHeight),"initialWidth"in he&&t(39,D=he.initialWidth),"initialHeight"in he&&t(40,Y=he.initialHeight),"width"in he&&t(17,P=he.width),"height"in he&&t(18,j=he.height),"dragHandle"in he&&t(19,G=he.dragHandle),"initialized"in he&&t(20,X=he.initialized),"parentId"in he&&t(21,Z=he.parentId),"nodeClickDistance"in he&&t(22,J=he.nodeClickDistance),"class"in he&&t(23,L=he.class)},l.$$.update=()=>{l.$$.dirty[1]&32&&t(25,n=I||"default"),l.$$.dirty[0]&33554432|l.$$.dirty[1]&32768&&t(45,o=!!r[n]),l.$$.dirty[0]&33554432|l.$$.dirty[1]&32768&&t(27,s=r[n]||Ia),l.$$.dirty[1]&16416&&(o||console.warn("003",Kl.error003(I))),l.$$.dirty[0]&393216|l.$$.dirty[1]&960&&t(26,i=qm({width:P,height:j,initialWidth:D,initialHeight:Y,measuredWidth:K,measuredHeight:U})),l.$$.dirty[0]&64&&Ge.set(!!b),l.$$.dirty[0]&50380802|l.$$.dirty[1]&14336&&((Ke&&n!==Ke||ue&&O!==ue||it&&H!==it)&&requestAnimationFrame(()=>Oe(new Map([[u,{id:u,nodeElement:Q,force:!0}]]))),t(42,Ke=n),t(43,ue=O),t(44,it=H)),l.$$.dirty[0]&17825792|l.$$.dirty[1]&1040&&k&&(Q!==fe||!X)&&(fe&&k.unobserve(fe),Q&&k.observe(Q),t(41,fe=Q))},[c,u,f,h,d,p,b,w,g,v,E,T,S,A,O,H,F,P,j,G,X,Z,J,L,Q,n,i,s,a,re,q,se,Ce,Ge,at,k,I,K,U,D,Y,fe,Ke,ue,it,o,r,Yt,St,_t,Rt,Tt,pe,je,rt]}class xm extends Le{constructor(e){super(),Re(this,e,Qm,Jm,Ri,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:$m}=Ui;function Lr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Rr(l,e){let t,n,o;return n=new xm({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:Ir(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),n.$on("nodeclick",e[12]),n.$on("nodemouseenter",e[13]),n.$on("nodemousemove",e[14]),n.$on("nodemouseleave",e[15]),n.$on("nodedrag",e[16]),n.$on("nodedragstart",e[17]),n.$on("nodedragstop",e[18]),n.$on("nodecontextmenu",e[19]),{key:l,first:null,c(){t=Ae(),te(n.$$.fragment),this.h()},l(s){t=Ae(),oe(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){B(s,t,i),ne(n,s,i),o=!0},p(s,i){e=s;const r={};i&2&&(r.node=e[21]),i&2&&(r.id=e[21].id),i&2&&(r.data=e[21].data),i&2&&(r.selected=!!e[21].selected),i&2&&(r.hidden=!!e[21].hidden),i&6&&(r.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),i&10&&(r.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),i&18&&(r.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),i&2&&(r.deletable=e[21].deletable??!0),i&2&&(r.positionX=e[21].internals.positionAbsolute.x),i&2&&(r.positionY=e[21].internals.positionAbsolute.y),i&34&&(r.isParent=e[5].has(e[21].id)),i&2&&(r.style=e[21].style),i&2&&(r.class=e[21].class),i&2&&(r.type=e[21].type??"default"),i&2&&(r.sourcePosition=e[21].sourcePosition),i&2&&(r.targetPosition=e[21].targetPosition),i&2&&(r.dragging=e[21].dragging),i&2&&(r.zIndex=e[21].internals.z??0),i&2&&(r.dragHandle=e[21].dragHandle),i&2&&(r.initialized=Ir(e[21])),i&2&&(r.width=e[21].width),i&2&&(r.height=e[21].height),i&2&&(r.initialWidth=e[21].initialWidth),i&2&&(r.initialHeight=e[21].initialHeight),i&2&&(r.measuredWidth=e[21].measured.width),i&2&&(r.measuredHeight=e[21].measured.height),i&2&&(r.parentId=e[21].parentId),i&1&&(r.nodeClickDistance=e[0]),n.$set(r)},i(s){o||(C(n.$$.fragment,s),o=!0)},o(s){N(n.$$.fragment,s),o=!1},d(s){s&&_(t),le(n,s)}}}function eg(l){let e,t=[],n=new $m,o,s=vt(l[1]);const i=r=>r[21].id;for(let r=0;r<s.length;r+=1){let a=Lr(l,s,r),c=i(a);n.set(c,t[r]=Rr(c,a))}return{c(){e=V("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(_),this.h()},h(){m(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,a){B(r,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(r,[a]){a&2111&&(s=vt(r[1]),He(),t=bo(t,a,i,1,r,s,n,e,vo,Rr,null,Lr),Be())},i(r){if(!o){for(let a=0;a<s.length;a+=1)C(t[a]);o=!0}},o(r){for(let a=0;a<t.length;a+=1)N(t[a]);o=!1},d(r){r&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function tg(l,e,t){let n,o,s,i,r,{nodeClickDistance:a=0}=e;const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:d,parentLookup:p}=jt();ce(l,c,A=>t(1,n=A)),ce(l,u,A=>t(2,o=A)),ce(l,f,A=>t(4,i=A)),ce(l,h,A=>t(3,s=A)),ce(l,p,A=>t(5,r=A));const b=typeof ResizeObserver>"u"?null:new ResizeObserver(A=>{const O=new Map;A.forEach(H=>{const F=H.target.getAttribute("data-id");O.set(F,{id:F,nodeElement:H.target,force:!0})}),d(O)});ll(()=>{b==null||b.disconnect()});function w(A){mt.call(this,l,A)}function g(A){mt.call(this,l,A)}function v(A){mt.call(this,l,A)}function k(A){mt.call(this,l,A)}function E(A){mt.call(this,l,A)}function I(A){mt.call(this,l,A)}function T(A){mt.call(this,l,A)}function S(A){mt.call(this,l,A)}return l.$$set=A=>{"nodeClickDistance"in A&&t(0,a=A.nodeClickDistance)},[a,n,o,s,i,r,c,u,f,h,p,b,w,g,v,k,E,I,T,S]}class ng extends Le{constructor(e){super(),Re(this,e,tg,eg,Fe,{nodeClickDistance:0})}}function Ur(l){let e,t,n,o,s,i,r,a;var c=l[27];function u(f,h){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[14],sourceY:f[15],targetX:f[16],targetY:f[17],sourcePosition:f[18],targetPosition:f[19],animated:f[6],selected:f[7],label:f[10],labelStyle:f[11],data:f[3],style:f[4],interactionWidth:f[21],selectable:f[24],deletable:f[8]??!0,type:f[23],sourceHandleId:f[12],targetHandleId:f[13],markerStart:f[26],markerEnd:f[25]}}}return c&&(n=ao(c,u(l))),{c(){e=Ve("svg"),t=Ve("g"),n&&te(n.$$.fragment),this.h()},l(f){e=ze(f,"svg",{});var h=M(e);t=ze(h,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var d=M(t);n&&oe(n.$$.fragment,d),d.forEach(_),h.forEach(_),this.h()},h(){m(t,"class",o=Ht(["svelte-flow__edge",l[22]])),m(t,"data-id",l[0]),m(t,"aria-label",s=l[20]===null?void 0:l[20]?l[20]:`Edge from ${l[1]} to ${l[2]}`),m(t,"role","img"),lt(t,"animated",l[6]),lt(t,"selected",l[7]),lt(t,"selectable",l[24]),$e(e,"z-index",l[5])},m(f,h){B(f,e,h),y(e,t),n&&ne(n,t,null),i=!0,r||(a=[ke(t,"click",l[32]),ke(t,"contextmenu",l[41]),ke(t,"mouseenter",l[42]),ke(t,"mouseleave",l[43])],r=!0)},p(f,h){if(h[0]&134217728&&c!==(c=f[27])){if(n){He();const d=n;N(d.$$.fragment,1,0,()=>{le(d,1)}),Be()}c?(n=ao(c,u(f)),te(n.$$.fragment),C(n.$$.fragment,1),ne(n,t,null)):n=null}else if(c){const d={};h[0]&1&&(d.id=f[0]),h[0]&2&&(d.source=f[1]),h[0]&4&&(d.target=f[2]),h[0]&16384&&(d.sourceX=f[14]),h[0]&32768&&(d.sourceY=f[15]),h[0]&65536&&(d.targetX=f[16]),h[0]&131072&&(d.targetY=f[17]),h[0]&262144&&(d.sourcePosition=f[18]),h[0]&524288&&(d.targetPosition=f[19]),h[0]&64&&(d.animated=f[6]),h[0]&128&&(d.selected=f[7]),h[0]&1024&&(d.label=f[10]),h[0]&2048&&(d.labelStyle=f[11]),h[0]&8&&(d.data=f[3]),h[0]&16&&(d.style=f[4]),h[0]&2097152&&(d.interactionWidth=f[21]),h[0]&16777216&&(d.selectable=f[24]),h[0]&256&&(d.deletable=f[8]??!0),h[0]&8388608&&(d.type=f[23]),h[0]&4096&&(d.sourceHandleId=f[12]),h[0]&8192&&(d.targetHandleId=f[13]),h[0]&67108864&&(d.markerStart=f[26]),h[0]&33554432&&(d.markerEnd=f[25]),n.$set(d)}(!i||h[0]&4194304&&o!==(o=Ht(["svelte-flow__edge",f[22]])))&&m(t,"class",o),(!i||h[0]&1)&&m(t,"data-id",f[0]),(!i||h[0]&1048582&&s!==(s=f[20]===null?void 0:f[20]?f[20]:`Edge from ${f[1]} to ${f[2]}`))&&m(t,"aria-label",s),(!i||h[0]&4194368)&&lt(t,"animated",f[6]),(!i||h[0]&4194432)&&lt(t,"selected",f[7]),(!i||h[0]&20971520)&&lt(t,"selectable",f[24]),h[0]&32&&$e(e,"z-index",f[5])},i(f){i||(n&&C(n.$$.fragment,f),i=!0)},o(f){n&&N(n.$$.fragment,f),i=!1},d(f){f&&_(e),n&&le(n),r=!1,en(a)}}}function lg(l){let e,t,n=!l[9]&&Ur(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[9]?n&&(He(),N(n,1,1,()=>{n=null}),Be()):n?(n.p(o,s),s[0]&512&&C(n,1)):(n=Ur(o),n.c(),C(n,1),n.m(e.parentNode,e))},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function og(l,e,t){let n,o,s,i,r,a,c,u,f,{id:h}=e,{type:d="default"}=e,{source:p=""}=e,{target:b=""}=e,{data:w={}}=e,{style:g=void 0}=e,{zIndex:v=void 0}=e,{animated:k=!1}=e,{selected:E=!1}=e,{selectable:I=void 0}=e,{deletable:T=void 0}=e,{hidden:S=!1}=e,{label:A=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:H=void 0}=e,{markerEnd:F=void 0}=e,{sourceHandle:K=void 0}=e,{targetHandle:U=void 0}=e,{sourceX:D}=e,{sourceY:Y}=e,{targetX:P}=e,{targetY:j}=e,{sourcePosition:G}=e,{targetPosition:X}=e,{ariaLabel:Z=void 0}=e,{interactionWidth:J=void 0}=e,{class:L=""}=e;Ol("svelteflow__edge_id",h);const{edgeLookup:re,edgeTypes:q,flowId:ae,elementsSelectable:ge}=jt();ce(l,re,ue=>t(44,a=ue)),ce(l,q,ue=>t(40,f=ue)),ce(l,ae,ue=>t(39,u=ue)),ce(l,ge,ue=>t(38,c=ue));const se=ln(),Oe=Sa();function Q(ue){const it=a.get(h);it&&(Oe(h),se("edgeclick",{event:ue,edge:it}))}function fe(ue,it){const at=a.get(h);at&&se(it,{event:ue,edge:at})}const Ce=ue=>{fe(ue,"edgecontextmenu")},Ge=ue=>{fe(ue,"edgemouseenter")},Ke=ue=>{fe(ue,"edgemouseleave")};return l.$$set=ue=>{"id"in ue&&t(0,h=ue.id),"type"in ue&&t(34,d=ue.type),"source"in ue&&t(1,p=ue.source),"target"in ue&&t(2,b=ue.target),"data"in ue&&t(3,w=ue.data),"style"in ue&&t(4,g=ue.style),"zIndex"in ue&&t(5,v=ue.zIndex),"animated"in ue&&t(6,k=ue.animated),"selected"in ue&&t(7,E=ue.selected),"selectable"in ue&&t(35,I=ue.selectable),"deletable"in ue&&t(8,T=ue.deletable),"hidden"in ue&&t(9,S=ue.hidden),"label"in ue&&t(10,A=ue.label),"labelStyle"in ue&&t(11,O=ue.labelStyle),"markerStart"in ue&&t(36,H=ue.markerStart),"markerEnd"in ue&&t(37,F=ue.markerEnd),"sourceHandle"in ue&&t(12,K=ue.sourceHandle),"targetHandle"in ue&&t(13,U=ue.targetHandle),"sourceX"in ue&&t(14,D=ue.sourceX),"sourceY"in ue&&t(15,Y=ue.sourceY),"targetX"in ue&&t(16,P=ue.targetX),"targetY"in ue&&t(17,j=ue.targetY),"sourcePosition"in ue&&t(18,G=ue.sourcePosition),"targetPosition"in ue&&t(19,X=ue.targetPosition),"ariaLabel"in ue&&t(20,Z=ue.ariaLabel),"interactionWidth"in ue&&t(21,J=ue.interactionWidth),"class"in ue&&t(22,L=ue.class)},l.$$.update=()=>{l.$$.dirty[1]&8&&t(23,n=d||"default"),l.$$.dirty[0]&8388608|l.$$.dirty[1]&512&&t(27,o=f[n]||Ca),l.$$.dirty[1]&288&&t(26,s=H?`url('#${Qo(H,u)}')`:void 0),l.$$.dirty[1]&320&&t(25,i=F?`url('#${Qo(F,u)}')`:void 0),l.$$.dirty[1]&144&&t(24,r=I??c)},[h,p,b,w,g,v,k,E,T,S,A,O,K,U,D,Y,P,j,G,X,Z,J,L,n,r,i,s,o,re,q,ae,ge,Q,fe,d,I,H,F,c,u,f,Ce,Ge,Ke]}class sg extends Le{constructor(e){super(),Re(this,e,og,lg,Ri,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function rg(l,e,t){let{onMount:n=void 0}=e,{onDestroy:o=void 0}=e;return pn(()=>(n==null||n(),o)),l.$$set=s=>{"onMount"in s&&t(0,n=s.onMount),"onDestroy"in s&&t(1,o=s.onDestroy)},[n,o]}class ig extends Le{constructor(e){super(),Re(this,e,rg,null,Fe,{onMount:0,onDestroy:1})}}function Wr(l,e,t){const n=l.slice();return n[2]=e[t],n}function Fr(l,e){let t,n,o;const s=[e[2]];let i={};for(let r=0;r<s.length;r+=1)i=kt(i,s[r]);return n=new gg({props:i}),{key:l,first:null,c(){t=Ae(),te(n.$$.fragment),this.h()},l(r){t=Ae(),oe(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){B(r,t,a),ne(n,r,a),o=!0},p(r,a){e=r;const c=a&1?nl(s,[Bl(e[2])]):{};n.$set(c)},i(r){o||(C(n.$$.fragment,r),o=!0)},o(r){N(n.$$.fragment,r),o=!1},d(r){r&&_(t),le(n,r)}}}function ag(l){let e,t=[],n=new Map,o,s=vt(l[0]);const i=r=>r[2].id;for(let r=0;r<s.length;r+=1){let a=Wr(l,s,r),c=i(a);n.set(c,t[r]=Fr(c,a))}return{c(){e=Ve("defs");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=ze(r,"defs",{});var a=M(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(_)},m(r,a){B(r,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(r,[a]){a&1&&(s=vt(r[0]),He(),t=bo(t,a,i,1,r,s,n,e,vo,Fr,null,Wr),Be())},i(r){if(!o){for(let a=0;a<s.length;a+=1)C(t[a]);o=!0}},o(r){for(let a=0;a<t.length;a+=1)N(t[a]);o=!1},d(r){r&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function cg(l,e,t){let n;const{markers:o}=jt();return ce(l,o,s=>t(0,n=s)),[n,o]}class ug extends Le{constructor(e){super(),Re(this,e,cg,ag,Fe,{})}}function fg(l){let e;return{c(){e=Ve("polyline"),this.h()},l(t){e=ze(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),M(e).forEach(_),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill",l[6]),m(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(t,n){B(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7]),n&64&&m(e,"fill",t[6])},d(t){t&&_(e)}}}function dg(l){let e;return{c(){e=Ve("polyline"),this.h()},l(t){e=ze(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),M(e).forEach(_),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill","none"),m(e,"points","-5,-4 0,0 -5,4")},m(t,n){B(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7])},d(t){t&&_(e)}}}function hg(l){let e,t,n;function o(r,a){if(r[1]===ho.Arrow)return dg;if(r[1]===ho.ArrowClosed)return fg}let s=o(l),i=s&&s(l);return{c(){e=Ve("marker"),i&&i.c(),this.h()},l(r){e=ze(r,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=M(e);i&&i.l(a),a.forEach(_),this.h()},h(){m(e,"class","svelte-flow__arrowhead"),m(e,"id",l[0]),m(e,"markerWidth",t=`${l[2]}`),m(e,"markerHeight",n=`${l[3]}`),m(e,"viewBox","-10 -10 20 20"),m(e,"markerUnits",l[4]),m(e,"orient",l[5]),m(e,"refX","0"),m(e,"refY","0")},m(r,a){B(r,e,a),i&&i.m(e,null)},p(r,[a]){s===(s=o(r))&&i?i.p(r,a):(i&&i.d(1),i=s&&s(r),i&&(i.c(),i.m(e,null))),a&1&&m(e,"id",r[0]),a&4&&t!==(t=`${r[2]}`)&&m(e,"markerWidth",t),a&8&&n!==(n=`${r[3]}`)&&m(e,"markerHeight",n),a&16&&m(e,"markerUnits",r[4]),a&32&&m(e,"orient",r[5])},i:ye,o:ye,d(r){r&&_(e),i&&i.d()}}}function mg(l,e,t){let{id:n}=e,{type:o}=e,{width:s=12.5}=e,{height:i=12.5}=e,{markerUnits:r="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:c=void 0}=e,{strokeWidth:u=void 0}=e;return l.$$set=f=>{"id"in f&&t(0,n=f.id),"type"in f&&t(1,o=f.type),"width"in f&&t(2,s=f.width),"height"in f&&t(3,i=f.height),"markerUnits"in f&&t(4,r=f.markerUnits),"orient"in f&&t(5,a=f.orient),"color"in f&&t(6,c=f.color),"strokeWidth"in f&&t(7,u=f.strokeWidth)},[n,o,s,i,r,a,c,u]}class gg extends Le{constructor(e){super(),Re(this,e,mg,hg,Fe,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function jr(l,e,t){const n=l.slice();return n[14]=e[t],n}function Yr(l,e){let t,n,o;return n=new sg({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),n.$on("edgeclick",e[7]),n.$on("edgecontextmenu",e[8]),n.$on("edgemouseenter",e[9]),n.$on("edgemouseleave",e[10]),{key:l,first:null,c(){t=Ae(),te(n.$$.fragment),this.h()},l(s){t=Ae(),oe(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){B(s,t,i),ne(n,s,i),o=!0},p(s,i){e=s;const r={};i&1&&(r.id=e[14].id),i&1&&(r.source=e[14].source),i&1&&(r.target=e[14].target),i&1&&(r.data=e[14].data),i&1&&(r.style=e[14].style),i&1&&(r.animated=e[14].animated),i&1&&(r.selected=e[14].selected),i&3&&(r.selectable=e[14].selectable??e[1]),i&1&&(r.deletable=e[14].deletable),i&1&&(r.hidden=e[14].hidden),i&1&&(r.label=e[14].label),i&1&&(r.labelStyle=e[14].labelStyle),i&1&&(r.markerStart=e[14].markerStart),i&1&&(r.markerEnd=e[14].markerEnd),i&1&&(r.sourceHandle=e[14].sourceHandle),i&1&&(r.targetHandle=e[14].targetHandle),i&1&&(r.sourceX=e[14].sourceX),i&1&&(r.sourceY=e[14].sourceY),i&1&&(r.targetX=e[14].targetX),i&1&&(r.targetY=e[14].targetY),i&1&&(r.sourcePosition=e[14].sourcePosition),i&1&&(r.targetPosition=e[14].targetPosition),i&1&&(r.ariaLabel=e[14].ariaLabel),i&1&&(r.interactionWidth=e[14].interactionWidth),i&1&&(r.class=e[14].class),i&1&&(r.type=e[14].type||"default"),i&1&&(r.zIndex=e[14].zIndex),n.$set(r)},i(s){o||(C(n.$$.fragment,s),o=!0)},o(s){N(n.$$.fragment,s),o=!1},d(s){s&&_(t),le(n,s)}}}function Xr(l){let e,t;return e=new ig({props:{onMount:l[11],onDestroy:l[12]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&4&&(s.onMount=n[11]),o&4&&(s.onDestroy=n[12]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function _g(l){let e,t,n,o,s=[],i=new Map,r,a;n=new ug({});let c=vt(l[0]);const u=h=>h[14].id;for(let h=0;h<c.length;h+=1){let d=jr(l,c,h),p=u(d);i.set(p,s[h]=Yr(p,d))}let f=l[0].length>0&&Xr(l);return{c(){e=V("div"),t=Ve("svg"),te(n.$$.fragment),o=$();for(let h=0;h<s.length;h+=1)s[h].c();r=$(),f&&f.c(),this.h()},l(h){e=z(h,"DIV",{class:!0});var d=M(e);t=ze(d,"svg",{class:!0});var p=M(t);oe(n.$$.fragment,p),p.forEach(_),o=ee(d);for(let b=0;b<s.length;b+=1)s[b].l(d);r=ee(d),f&&f.l(d),d.forEach(_),this.h()},h(){m(t,"class","svelte-flow__marker"),m(e,"class","svelte-flow__edges")},m(h,d){B(h,e,d),y(e,t),ne(n,t,null),y(e,o);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(e,null);y(e,r),f&&f.m(e,null),a=!0},p(h,[d]){d&3&&(c=vt(h[0]),He(),s=bo(s,d,u,1,h,c,i,e,vo,Yr,r,jr),Be()),h[0].length>0?f?(f.p(h,d),d&1&&C(f,1)):(f=Xr(h),f.c(),C(f,1),f.m(e,null)):f&&(He(),N(f,1,1,()=>{f=null}),Be())},i(h){if(!a){C(n.$$.fragment,h);for(let d=0;d<c.length;d+=1)C(s[d]);C(f),a=!0}},o(h){N(n.$$.fragment,h);for(let d=0;d<s.length;d+=1)N(s[d]);N(f),a=!1},d(h){h&&_(e),le(n);for(let d=0;d<s.length;d+=1)s[d].d();f&&f.d()}}}function pg(l,e,t){let n,o,s,{defaultEdgeOptions:i}=e;const{visibleEdges:r,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:u}=jt();ce(l,r,g=>t(0,n=g)),ce(l,a,g=>t(2,s=g)),ce(l,u,g=>t(1,o=g)),pn(()=>{i&&c(i)});function f(g){mt.call(this,l,g)}function h(g){mt.call(this,l,g)}function d(g){mt.call(this,l,g)}function p(g){mt.call(this,l,g)}const b=()=>{io(a,s=!0,s)},w=()=>{io(a,s=!1,s)};return l.$$set=g=>{"defaultEdgeOptions"in g&&t(6,i=g.defaultEdgeOptions)},[n,o,s,r,a,u,i,f,h,d,p,b,w]}class bg extends Le{constructor(e){super(),Re(this,e,pg,_g,Fe,{defaultEdgeOptions:6})}}function Kr(l){let e;return{c(){e=V("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),M(e).forEach(_),this.h()},h(){m(e,"class","svelte-flow__selection svelte-1iugwpu"),$e(e,"width",typeof l[2]=="string"?l[2]:`${l[2]}px`),$e(e,"height",typeof l[3]=="string"?l[3]:`${l[3]}px`),$e(e,"transform",`translate(${l[0]}px, ${l[1]}px)`)},m(t,n){B(t,e,n)},p(t,n){n&4&&$e(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),n&8&&$e(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),n&3&&$e(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},d(t){t&&_(e)}}}function vg(l){let e,t=l[4]&&Kr(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),B(n,e,o)},p(n,[o]){n[4]?t?t.p(n,o):(t=Kr(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}function wg(l,e,t){let{x:n=0}=e,{y:o=0}=e,{width:s=0}=e,{height:i=0}=e,{isVisible:r=!0}=e;return l.$$set=a=>{"x"in a&&t(0,n=a.x),"y"in a&&t(1,o=a.y),"width"in a&&t(2,s=a.width),"height"in a&&t(3,i=a.height),"isVisible"in a&&t(4,r=a.isVisible)},[n,o,s,i,r]}class za extends Le{constructor(e){super(),Re(this,e,wg,vg,Fe,{x:0,y:1,width:2,height:3,isVisible:4})}}function kg(l){var n,o,s,i;let e,t;return e=new za({props:{isVisible:!!(l[0]&&l[1]==="user"),width:(n=l[0])==null?void 0:n.width,height:(o=l[0])==null?void 0:o.height,x:(s=l[0])==null?void 0:s.x,y:(i=l[0])==null?void 0:i.y}}),{c(){te(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,a){ne(e,r,a),t=!0},p(r,[a]){var u,f,h,d;const c={};a&3&&(c.isVisible=!!(r[0]&&r[1]==="user")),a&1&&(c.width=(u=r[0])==null?void 0:u.width),a&1&&(c.height=(f=r[0])==null?void 0:f.height),a&1&&(c.x=(h=r[0])==null?void 0:h.x),a&1&&(c.y=(d=r[0])==null?void 0:d.y),e.$set(c)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){le(e,r)}}}function yg(l,e,t){let n,o;const{selectionRect:s,selectionRectMode:i}=jt();return ce(l,s,r=>t(0,n=r)),ce(l,i,r=>t(1,o=r)),[n,o,s,i]}class Eg extends Le{constructor(e){super(),Re(this,e,yg,kg,Fe,{})}}function Zr(l){let e,t,n,o,s;return t=new za({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var r=M(e);oe(t.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","selection-wrapper nopan svelte-5pxri"),$e(e,"width",l[1].width+"px"),$e(e,"height",l[1].height+"px"),$e(e,"transform","translate("+l[1].x+"px, "+l[1].y+"px)"),m(e,"role","button"),m(e,"tabindex","-1")},m(i,r){B(i,e,r),ne(t,e,null),n=!0,o||(s=[gn(Va.call(null,e,{disabled:!1,store:l[2],onDrag:l[11],onDragStart:l[12],onDragStop:l[13]})),ke(e,"contextmenu",l[7]),ke(e,"click",l[8]),ke(e,"keyup",Sg)],o=!0)},p(i,r){(!n||r&2)&&$e(e,"width",i[1].width+"px"),(!n||r&2)&&$e(e,"height",i[1].height+"px"),(!n||r&2)&&$e(e,"transform","translate("+i[1].x+"px, "+i[1].y+"px)")},i(i){n||(C(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){i&&_(e),le(t),o=!1,en(s)}}}function Ig(l){let e=l[0]==="nodes"&&l[1]&&Hn(l[1].x)&&Hn(l[1].y),t,n,o=e&&Zr(l);return{c(){o&&o.c(),t=Ae()},l(s){o&&o.l(s),t=Ae()},m(s,i){o&&o.m(s,i),B(s,t,i),n=!0},p(s,[i]){i&3&&(e=s[0]==="nodes"&&s[1]&&Hn(s[1].x)&&Hn(s[1].y)),e?o?(o.p(s,i),i&3&&C(o,1)):(o=Zr(s),o.c(),C(o,1),o.m(t.parentNode,t)):o&&(He(),N(o,1,1,()=>{o=null}),Be())},i(s){n||(C(o),n=!0)},o(s){N(o),n=!1},d(s){s&&_(t),o&&o.d(s)}}}const Sg=()=>{};function Cg(l,e,t){let n,o,s;const i=jt(),{selectionRectMode:r,nodes:a,nodeLookup:c}=i;ce(l,r,g=>t(0,s=g)),ce(l,a,g=>t(9,n=g)),ce(l,c,g=>t(10,o=g));const u=ln();let f=null;function h(g){const v=n.filter(k=>k.selected);u("selectioncontextmenu",{nodes:v,event:g})}function d(g){const v=n.filter(k=>k.selected);u("selectionclick",{nodes:v,event:g})}const p=(g,v,k,E)=>{u("nodedrag",{event:g,targetNode:null,nodes:E})},b=(g,v,k,E)=>{u("nodedragstart",{event:g,targetNode:null,nodes:E})},w=(g,v,k,E)=>{u("nodedragstop",{event:g,targetNode:null,nodes:E})};return l.$$.update=()=>{l.$$.dirty&1537&&s==="nodes"&&t(1,f=Do(o,{filter:g=>!!g.selected}))},[s,f,i,r,a,c,u,h,d,n,o,p,b,w]}class Dg extends Le{constructor(e){super(),Re(this,e,Cg,Ig,Fe,{})}}function Wn(l,e){let{enabled:t=!0,trigger:n,type:o="keydown"}=e;function s(i){const r=Array.isArray(n)?n:[n],a={alt:i.altKey,ctrl:i.ctrlKey,shift:i.shiftKey,meta:i.metaKey};for(const c of r){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:d,preventDefault:p,enabled:b}=u;if(b){if(f.length&&!(Array.isArray(f)?f:[f]).map(v=>typeof v=="string"?[v]:v).some(v=>v.every(k=>a[k])))continue;if(i.key===h){p&&i.preventDefault();const w={node:l,trigger:u,originalEvent:i};l.dispatchEvent(new CustomEvent("shortcut",{detail:w})),d==null||d(w)}}}}return t&&l.addEventListener(o,s),{update:i=>{const{enabled:r=!0,type:a="keydown"}=i;t&&(!r||o!==a)?l.removeEventListener(o,s):!t&&r&&l.addEventListener(a,s),t=r,o=a,n=i.trigger},destroy:()=>{l.removeEventListener(o,s)}}}function Mg(l){let e,t,n,o,s,i,r,a,c,u,f,h;return{c:ye,l:ye,m(d,p){f||(h=[gn(e=Wn.call(null,window,{trigger:Zt(l[0],l[11]),type:"keydown"})),gn(t=Wn.call(null,window,{trigger:Zt(l[0],l[12]),type:"keyup"})),gn(n=Wn.call(null,window,{trigger:Zt(l[1],l[13]),type:"keydown"})),gn(o=Wn.call(null,window,{trigger:Zt(l[1],l[14]),type:"keyup"})),gn(s=Wn.call(null,window,{trigger:Zt(l[2],l[15]),type:"keydown"})),gn(i=Wn.call(null,window,{trigger:Zt(l[2],l[16]),type:"keyup"})),gn(r=Wn.call(null,window,{trigger:Zt(l[3],l[17]),type:"keydown"})),gn(a=Wn.call(null,window,{trigger:Zt(l[3],l[18]),type:"keyup"})),gn(c=Wn.call(null,window,{trigger:Zt(l[4],l[19]),type:"keydown"})),gn(u=Wn.call(null,window,{trigger:Zt(l[4],l[20]),type:"keyup"})),ke(window,"blur",l[10]),ke(window,"contextmenu",l[10])],f=!0)},p(d,[p]){e&&$t(e.update)&&p&1&&e.update.call(null,{trigger:Zt(d[0],d[11]),type:"keydown"}),t&&$t(t.update)&&p&1&&t.update.call(null,{trigger:Zt(d[0],d[12]),type:"keyup"}),n&&$t(n.update)&&p&2&&n.update.call(null,{trigger:Zt(d[1],d[13]),type:"keydown"}),o&&$t(o.update)&&p&2&&o.update.call(null,{trigger:Zt(d[1],d[14]),type:"keyup"}),s&&$t(s.update)&&p&4&&s.update.call(null,{trigger:Zt(d[2],d[15]),type:"keydown"}),i&&$t(i.update)&&p&4&&i.update.call(null,{trigger:Zt(d[2],d[16]),type:"keyup"}),r&&$t(r.update)&&p&8&&r.update.call(null,{trigger:Zt(d[3],d[17]),type:"keydown"}),a&&$t(a.update)&&p&8&&a.update.call(null,{trigger:Zt(d[3],d[18]),type:"keyup"}),c&&$t(c.update)&&p&16&&c.update.call(null,{trigger:Zt(d[4],d[19]),type:"keydown"}),u&&$t(u.update)&&p&16&&u.update.call(null,{trigger:Zt(d[4],d[20]),type:"keyup"})},i:ye,o:ye,d(d){f=!1,en(h)}}}function Na(l){return l!==null&&typeof l=="object"}function Tg(l){return Na(l)?l.modifier||[]:[]}function Vg(l){return l==null?"":Na(l)?l.key:l}function Zt(l,e){return(Array.isArray(l)?l:[l]).map(n=>{const o=Vg(n);return{key:o,modifier:Tg(n),enabled:o!==null,callback:e}})}function zg(l,e,t){let{selectionKey:n="Shift"}=e,{multiSelectionKey:o=go()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:i=" "}=e,{zoomActivationKey:r=go()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:u,panActivationKeyPressed:f,zoomActivationKeyPressed:h,selectionRect:d}=jt();function p(){d.set(null),a.set(!1),c.set(!1),u.set(!1),f.set(!1),h.set(!1)}const b=()=>a.set(!0),w=()=>a.set(!1),g=()=>c.set(!0),v=()=>c.set(!1),k=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!mh(O.originalEvent)&&u.set(!0)},E=()=>u.set(!1),I=()=>f.set(!0),T=()=>f.set(!1),S=()=>h.set(!0),A=()=>h.set(!1);return l.$$set=O=>{"selectionKey"in O&&t(0,n=O.selectionKey),"multiSelectionKey"in O&&t(1,o=O.multiSelectionKey),"deleteKey"in O&&t(2,s=O.deleteKey),"panActivationKey"in O&&t(3,i=O.panActivationKey),"zoomActivationKey"in O&&t(4,r=O.zoomActivationKey)},[n,o,s,i,r,a,c,u,f,h,p,b,w,g,v,k,E,I,T,S,A]}class Ng extends Le{constructor(e){super(),Re(this,e,zg,Mg,Fe,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const Pg=l=>({}),Gr=l=>({});function qr(l){let e,t,n,o;const s=l[13].connectionLine,i=Gt(s,l,l[12],Gr);let r=!l[2]&&Jr(l);return{c(){e=Ve("svg"),t=Ve("g"),i&&i.c(),r&&r.c(),this.h()},l(a){e=ze(a,"svg",{width:!0,height:!0,class:!0,style:!0});var c=M(e);t=ze(c,"g",{class:!0});var u=M(t);i&&i.l(u),r&&r.l(u),u.forEach(_),c.forEach(_),this.h()},h(){m(t,"class",n=Ht(["svelte-flow__connection",vr(l[3].isValid)])),m(e,"width",l[5]),m(e,"height",l[6]),m(e,"class","svelte-flow__connectionline"),m(e,"style",l[0])},m(a,c){B(a,e,c),y(e,t),i&&i.m(t,null),r&&r.m(t,null),o=!0},p(a,c){i&&i.p&&(!o||c&4096)&&qt(i,s,a,a[12],o?Qt(s,a[12],c,Pg):Jt(a[12]),Gr),a[2]?r&&(r.d(1),r=null):r?r.p(a,c):(r=Jr(a),r.c(),r.m(t,null)),(!o||c&8&&n!==(n=Ht(["svelte-flow__connection",vr(a[3].isValid)])))&&m(t,"class",n),(!o||c&32)&&m(e,"width",a[5]),(!o||c&64)&&m(e,"height",a[6]),(!o||c&1)&&m(e,"style",a[0])},i(a){o||(C(i,a),o=!0)},o(a){N(i,a),o=!1},d(a){a&&_(e),i&&i.d(a),r&&r.d()}}}function Jr(l){let e;return{c(){e=Ve("path"),this.h()},l(t){e=ze(t,"path",{d:!0,style:!0,fill:!0,class:!0}),M(e).forEach(_),this.h()},h(){m(e,"d",l[4]),m(e,"style",l[1]),m(e,"fill","none"),m(e,"class","svelte-flow__connection-path")},m(t,n){B(t,e,n)},p(t,n){n&16&&m(e,"d",t[4]),n&2&&m(e,"style",t[1])},d(t){t&&_(e)}}}function Og(l){let e,t,n=l[3].inProgress&&qr(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,[s]){o[3].inProgress?n?(n.p(o,s),s&8&&C(n,1)):(n=qr(o),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Hg(l,e,t){let n,o,s,i,{$$slots:r={},$$scope:a}=e,{containerStyle:c=""}=e,{style:u=""}=e,{isCustomComponent:f=!1}=e;const{width:h,height:d,connection:p,connectionLineType:b}=jt();ce(l,h,g=>t(5,s=g)),ce(l,d,g=>t(6,i=g)),ce(l,p,g=>t(3,o=g)),ce(l,b,g=>t(11,n=g));let w=null;return l.$$set=g=>{"containerStyle"in g&&t(0,c=g.containerStyle),"style"in g&&t(1,u=g.style),"isCustomComponent"in g&&t(2,f=g.isCustomComponent),"$$scope"in g&&t(12,a=g.$$scope)},l.$$.update=()=>{if(l.$$.dirty&2060&&o.inProgress&&!f){const{from:g,to:v,fromPosition:k,toPosition:E}=o,I={sourceX:g.x,sourceY:g.y,sourcePosition:k,targetX:v.x,targetY:v.y,targetPosition:E};switch(n){case El.Bezier:t(4,[w]=aa(I),w);break;case El.Step:t(4,[w]=_o({...I,borderRadius:0}),w);break;case El.SmoothStep:t(4,[w]=_o(I),w);break;default:t(4,[w]=ua(I),w)}}},[c,u,f,o,w,s,i,h,d,p,b,n,a,r]}class Bg extends Le{constructor(e){super(),Re(this,e,Hg,Og,Fe,{containerStyle:0,style:1,isCustomComponent:2})}}function Ag(l){let e,t,n;const o=l[8].default,s=Gt(o,l,l[7],null);let i=[{class:t=Ht(["svelte-flow__panel",l[1],...l[2]])},{style:l[0]},l[5]],r={};for(let a=0;a<i.length;a+=1)r=kt(r,i[a]);return{c(){e=V("div"),s&&s.c(),this.h()},l(a){e=z(a,"DIV",{class:!0,style:!0});var c=M(e);s&&s.l(c),c.forEach(_),this.h()},h(){Il(e,r),$e(e,"pointer-events",l[3]?"none":"")},m(a,c){B(a,e,c),s&&s.m(e,null),n=!0},p(a,[c]){s&&s.p&&(!n||c&128)&&qt(s,o,a,a[7],n?Qt(o,a[7],c,null):Jt(a[7]),null),Il(e,r=nl(i,[(!n||c&6&&t!==(t=Ht(["svelte-flow__panel",a[1],...a[2]])))&&{class:t},(!n||c&1)&&{style:a[0]},c&32&&a[5]])),$e(e,"pointer-events",a[3]?"none":"")},i(a){n||(C(s,a),n=!0)},o(a){N(s,a),n=!1},d(a){a&&_(e),s&&s.d(a)}}}function Lg(l,e,t){let n;const o=["position","style","class"];let s=Ft(e,o),i,{$$slots:r={},$$scope:a}=e,{position:c="top-right"}=e,{style:u=void 0}=e,{class:f=void 0}=e;const{selectionRectMode:h}=jt();return ce(l,h,d=>t(3,i=d)),l.$$set=d=>{e=kt(kt({},e),Bn(d)),t(5,s=Ft(e,o)),"position"in d&&t(6,c=d.position),"style"in d&&t(0,u=d.style),"class"in d&&t(1,f=d.class),"$$scope"in d&&t(7,a=d.$$scope)},l.$$.update=()=>{l.$$.dirty&64&&t(2,n=`${c}`.split("-"))},[u,f,n,i,h,s,c,a,r]}class Pa extends Le{constructor(e){super(),Re(this,e,Lg,Ag,Fe,{position:6,style:0,class:1})}}function Qr(l){let e,t;return e=new Pa({props:{position:l[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[Rg]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.position=n[1]),o&4&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Rg(l){let e,t="Svelte Flow";return{c(){e=V("a"),e.textContent=t,this.h()},l(n){e=z(n,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),ut(e)!=="svelte-2vm8e4"&&(e.textContent=t),this.h()},h(){m(e,"href","https://svelteflow.dev"),m(e,"target","_blank"),m(e,"rel","noopener noreferrer"),m(e,"aria-label","Svelte Flow attribution")},m(n,o){B(n,e,o)},p:ye,d(n){n&&_(e)}}}function Ug(l){var o;let e,t,n=!((o=l[0])!=null&&o.hideAttribution)&&Qr(l);return{c(){n&&n.c(),e=Ae()},l(s){n&&n.l(s),e=Ae()},m(s,i){n&&n.m(s,i),B(s,e,i),t=!0},p(s,[i]){var r;(r=s[0])!=null&&r.hideAttribution?n&&(He(),N(n,1,1,()=>{n=null}),Be()):n?(n.p(s,i),i&1&&C(n,1)):(n=Qr(s),n.c(),C(n,1),n.m(e.parentNode,e))},i(s){t||(C(n),t=!0)},o(s){N(n),t=!1},d(s){s&&_(e),n&&n.d(s)}}}function Wg(l,e,t){let{proOptions:n=void 0}=e,{position:o="bottom-right"}=e;return l.$$set=s=>{"proOptions"in s&&t(0,n=s.proOptions),"position"in s&&t(1,o=s.position)},[n,o]}class Fg extends Le{constructor(e){super(),Re(this,e,Wg,Ug,Fe,{proOptions:0,position:1})}}function xr(l,{nodeTypes:e,edgeTypes:t,minZoom:n,maxZoom:o,translateExtent:s,paneClickDistance:i}){e!==void 0&&l.setNodeTypes(e),t!==void 0&&l.setEdgeTypes(t),n!==void 0&&l.setMinZoom(n),o!==void 0&&l.setMaxZoom(o),s!==void 0&&l.setTranslateExtent(s),i!==void 0&&l.setPaneClickDistance(i)}const jg=l=>Object.keys(l);function Yg(l,e){jg(e).forEach(t=>{const n=e[t];n!==void 0&&l[t].set(n)})}function Xg(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Kg(l="light"){return Pn("light",t=>{if(l!=="system"){t(l);return}const n=Xg(),o=()=>t(n!=null&&n.matches?"dark":"light");return t(n!=null&&n.matches?"dark":"light"),n==null||n.addEventListener("change",o),()=>{n==null||n.removeEventListener("change",o)}})}const Zg=l=>({}),$r=l=>({slot:"connectionLine"});function Gg(l){let e;const t=l[75].connectionLine,n=Gt(t,l,l[99],$r);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[3]&64)&&qt(n,t,o,o[99],e?Qt(t,o[99],s,Zg):Jt(o[99]),$r)},i(o){e||(C(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function qg(l){let e,t,n,o,s,i,r,a,c,u,f,h;return e=new bg({props:{defaultEdgeOptions:l[21]}}),e.$on("edgeclick",l[78]),e.$on("edgecontextmenu",l[79]),e.$on("edgemouseenter",l[80]),e.$on("edgemouseleave",l[81]),n=new Bg({props:{containerStyle:l[7],style:l[6],isCustomComponent:l[34].connectionLine,$$slots:{connectionLine:[Gg]},$$scope:{ctx:l}}}),c=new ng({props:{nodeClickDistance:l[23]}}),c.$on("nodeclick",l[82]),c.$on("nodemouseenter",l[83]),c.$on("nodemousemove",l[84]),c.$on("nodemouseleave",l[85]),c.$on("nodedragstart",l[86]),c.$on("nodedrag",l[87]),c.$on("nodedragstop",l[88]),c.$on("nodecontextmenu",l[89]),f=new Dg({}),f.$on("selectionclick",l[90]),f.$on("selectioncontextmenu",l[91]),f.$on("nodedragstart",l[92]),f.$on("nodedrag",l[93]),f.$on("nodedragstop",l[94]),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment),o=$(),s=V("div"),i=$(),r=V("div"),a=$(),te(c.$$.fragment),u=$(),te(f.$$.fragment),this.h()},l(d){oe(e.$$.fragment,d),t=ee(d),oe(n.$$.fragment,d),o=ee(d),s=z(d,"DIV",{class:!0}),M(s).forEach(_),i=ee(d),r=z(d,"DIV",{class:!0}),M(r).forEach(_),a=ee(d),oe(c.$$.fragment,d),u=ee(d),oe(f.$$.fragment,d),this.h()},h(){m(s,"class","svelte-flow__edgelabel-renderer"),m(r,"class","svelte-flow__viewport-portal")},m(d,p){ne(e,d,p),B(d,t,p),ne(n,d,p),B(d,o,p),B(d,s,p),B(d,i,p),B(d,r,p),B(d,a,p),ne(c,d,p),B(d,u,p),ne(f,d,p),h=!0},p(d,p){const b={};p[0]&2097152&&(b.defaultEdgeOptions=d[21]),e.$set(b);const w={};p[0]&128&&(w.containerStyle=d[7]),p[0]&64&&(w.style=d[6]),p[1]&8&&(w.isCustomComponent=d[34].connectionLine),p[3]&64&&(w.$$scope={dirty:p,ctx:d}),n.$set(w);const g={};p[0]&8388608&&(g.nodeClickDistance=d[23]),c.$set(g)},i(d){h||(C(e.$$.fragment,d),C(n.$$.fragment,d),C(c.$$.fragment,d),C(f.$$.fragment,d),h=!0)},o(d){N(e.$$.fragment,d),N(n.$$.fragment,d),N(c.$$.fragment,d),N(f.$$.fragment,d),h=!1},d(d){d&&(_(t),_(o),_(s),_(i),_(r),_(a),_(u)),le(e,d),le(n,d),le(c,d),le(f,d)}}}function Jg(l){let e,t,n,o;return e=new Gm({props:{$$slots:{default:[qg]},$$scope:{ctx:l}}}),n=new Eg({}),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=ee(s),oe(n.$$.fragment,s)},m(s,i){ne(e,s,i),B(s,t,i),ne(n,s,i),o=!0},p(s,i){const r={};i[0]&10485952|i[1]&8|i[3]&64&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),le(e,s),le(n,s)}}}function Qg(l){let e,t;return e=new Xm({props:{panOnDrag:l[17]===void 0?!0:l[17],selectionOnDrag:l[18],$$slots:{default:[Jg]},$$scope:{ctx:l}}}),e.$on("paneclick",l[95]),e.$on("panecontextmenu",l[96]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&131072&&(s.panOnDrag=n[17]===void 0?!0:n[17]),o[0]&262144&&(s.selectionOnDrag=n[18]),o[0]&10485952|o[1]&8|o[3]&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function xg(l){let e,t,n,o,s,i,r,a,c,u,f,h;t=new Ng({props:{selectionKey:l[1],deleteKey:l[5],panActivationKey:l[2],multiSelectionKey:l[3],zoomActivationKey:l[4]}}),o=new Fm({props:{initialViewport:l[31],onMoveStart:l[8],onMove:l[9],onMoveEnd:l[10],panOnScrollMode:l[11]===void 0?Yn.Free:l[11],preventScrolling:l[12]===void 0?!0:l[12],zoomOnScroll:l[13]===void 0?!0:l[13],zoomOnDoubleClick:l[14]===void 0?!0:l[14],zoomOnPinch:l[15]===void 0?!0:l[15],panOnScroll:l[16]===void 0?!1:l[16],panOnDrag:l[17]===void 0?!0:l[17],paneClickDistance:l[22]===void 0?0:l[22],$$slots:{default:[Qg]},$$scope:{ctx:l}}}),i=new Fg({props:{proOptions:l[20],position:l[19]}});const d=l[75].default,p=Gt(d,l,l[99],null);let b=[{style:l[24]},{class:a=Ht(["svelte-flow",l[25],l[30]])},{"data-testid":"svelte-flow__wrapper"},l[33],{role:"application"}],w={};for(let g=0;g<b.length;g+=1)w=kt(w,b[g]);return{c(){e=V("div"),te(t.$$.fragment),n=$(),te(o.$$.fragment),s=$(),te(i.$$.fragment),r=$(),p&&p.c(),this.h()},l(g){e=z(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var v=M(e);oe(t.$$.fragment,v),n=ee(v),oe(o.$$.fragment,v),s=ee(v),oe(i.$$.fragment,v),r=ee(v),p&&p.l(v),v.forEach(_),this.h()},h(){Il(e,w),tl(()=>l[98].call(e)),lt(e,"svelte-12wlba6",!0)},m(g,v){B(g,e,v),ne(t,e,null),y(e,n),ne(o,e,null),y(e,s),ne(i,e,null),y(e,r),p&&p.m(e,null),l[97](e),c=Ra(e,l[98].bind(e)),u=!0,f||(h=[ke(e,"dragover",l[76]),ke(e,"drop",l[77])],f=!0)},p(g,v){const k={};v[0]&2&&(k.selectionKey=g[1]),v[0]&32&&(k.deleteKey=g[5]),v[0]&4&&(k.panActivationKey=g[2]),v[0]&8&&(k.multiSelectionKey=g[3]),v[0]&16&&(k.zoomActivationKey=g[4]),t.$set(k);const E={};v[0]&256&&(E.onMoveStart=g[8]),v[0]&512&&(E.onMove=g[9]),v[0]&1024&&(E.onMoveEnd=g[10]),v[0]&2048&&(E.panOnScrollMode=g[11]===void 0?Yn.Free:g[11]),v[0]&4096&&(E.preventScrolling=g[12]===void 0?!0:g[12]),v[0]&8192&&(E.zoomOnScroll=g[13]===void 0?!0:g[13]),v[0]&16384&&(E.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),v[0]&32768&&(E.zoomOnPinch=g[15]===void 0?!0:g[15]),v[0]&65536&&(E.panOnScroll=g[16]===void 0?!1:g[16]),v[0]&131072&&(E.panOnDrag=g[17]===void 0?!0:g[17]),v[0]&4194304&&(E.paneClickDistance=g[22]===void 0?0:g[22]),v[0]&10879168|v[1]&8|v[3]&64&&(E.$$scope={dirty:v,ctx:g}),o.$set(E);const I={};v[0]&1048576&&(I.proOptions=g[20]),v[0]&524288&&(I.position=g[19]),i.$set(I),p&&p.p&&(!u||v[3]&64)&&qt(p,d,g,g[99],u?Qt(d,g[99],v,null):Jt(g[99]),null),Il(e,w=nl(b,[(!u||v[0]&16777216)&&{style:g[24]},(!u||v[0]&1107296256&&a!==(a=Ht(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},v[1]&4&&g[33],{role:"application"}])),lt(e,"svelte-12wlba6",!0)},i(g){u||(C(t.$$.fragment,g),C(o.$$.fragment,g),C(i.$$.fragment,g),C(p,g),u=!0)},o(g){N(t.$$.fragment,g),N(o.$$.fragment,g),N(i.$$.fragment,g),N(p,g),u=!1},d(g){g&&_(e),le(t),le(o),le(i),p&&p.d(g),l[97](null),c(),f=!1,en(h)}}}function $g(l,e,t){let n;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=Ft(e,o),i,r,a=ye,c=()=>(a(),a=cs(A,x=>t(100,r=x)),A),u,f=ye,h=()=>(f(),f=cs(n,x=>t(30,u=x)),n);l.$$.on_destroy.push(()=>a()),l.$$.on_destroy.push(()=>f());let{$$slots:d={},$$scope:p}=e;const b=Ua(d);let{id:w="1"}=e,{nodes:g}=e,{edges:v}=e,{fitView:k=void 0}=e,{fitViewOptions:E=void 0}=e,{minZoom:I=void 0}=e,{maxZoom:T=void 0}=e,{initialViewport:S=void 0}=e,{viewport:A=void 0}=e;c();let{nodeTypes:O=void 0}=e,{edgeTypes:H=void 0}=e,{selectionKey:F=void 0}=e,{selectionMode:K=void 0}=e,{panActivationKey:U=void 0}=e,{multiSelectionKey:D=void 0}=e,{zoomActivationKey:Y=void 0}=e,{nodesDraggable:P=void 0}=e,{nodesConnectable:j=void 0}=e,{nodeDragThreshold:G=void 0}=e,{elementsSelectable:X=void 0}=e,{snapGrid:Z=void 0}=e,{deleteKey:J=void 0}=e,{connectionRadius:L=void 0}=e,{connectionLineType:re=void 0}=e,{connectionMode:q=fl.Strict}=e,{connectionLineStyle:ae=""}=e,{connectionLineContainerStyle:ge=""}=e,{onMoveStart:se=void 0}=e,{onMove:Oe=void 0}=e,{onMoveEnd:Q=void 0}=e,{isValidConnection:fe=void 0}=e,{translateExtent:Ce=void 0}=e,{nodeExtent:Ge=void 0}=e,{onlyRenderVisibleElements:Ke=void 0}=e,{panOnScrollMode:ue=Yn.Free}=e,{preventScrolling:it=!0}=e,{zoomOnScroll:at=!0}=e,{zoomOnDoubleClick:Yt=!0}=e,{zoomOnPinch:St=!0}=e,{panOnScroll:_t=!1}=e,{panOnDrag:Rt=!0}=e,{selectionOnDrag:Tt=void 0}=e,{autoPanOnConnect:pe=!0}=e,{autoPanOnNodeDrag:je=!0}=e,{onerror:rt=void 0}=e,{ondelete:he=void 0}=e,{onedgecreate:wt=void 0}=e,{attributionPosition:dt=void 0}=e,{proOptions:pt=void 0}=e,{defaultEdgeOptions:De=void 0}=e,{width:Vt=void 0}=e,{height:de=void 0}=e,{colorMode:Me="light"}=e,{onconnect:we=void 0}=e,{onconnectstart:Xe=void 0}=e,{onconnectend:ht=void 0}=e,{onbeforedelete:yt=void 0}=e,{oninit:It=void 0}=e,{nodeOrigin:zt=void 0}=e,{paneClickDistance:Bt=0}=e,{nodeClickDistance:Nt=0}=e,{defaultMarkerColor:Xt="#b1b1b7"}=e,{style:At=void 0}=e,{class:on=void 0}=e,fn,rn,dn;const yn=r||S,Ct=Wa(No)?jt():Lm({nodes:me(g),edges:me(v),width:Vt,height:de,fitView:k,nodeOrigin:zt,nodeExtent:Ge});pn(()=>(Ct.width.set(rn),Ct.height.set(dn),Ct.domNode.set(fn),Ct.syncNodeStores(g),Ct.syncEdgeStores(v),Ct.syncViewport(A),k!==void 0&&Ct.fitViewOnInit.set(k),E&&Ct.fitViewOptions.set(E),xr(Ct,{nodeTypes:O,edgeTypes:H,minZoom:I,maxZoom:T,translateExtent:Ce,paneClickDistance:Bt}),()=>{Ct.reset()}));const{initialized:tn}=Ct;ce(l,tn,x=>t(74,i=x));let W=!1;function Ne(x){mt.call(this,l,x)}function Ze(x){mt.call(this,l,x)}function tt(x){mt.call(this,l,x)}function Ye(x){mt.call(this,l,x)}function st(x){mt.call(this,l,x)}function hn(x){mt.call(this,l,x)}function En(x){mt.call(this,l,x)}function ct(x){mt.call(this,l,x)}function Pt(x){mt.call(this,l,x)}function In(x){mt.call(this,l,x)}function Mn(x){mt.call(this,l,x)}function An(x){mt.call(this,l,x)}function Tn(x){mt.call(this,l,x)}function hl(x){mt.call(this,l,x)}function ol(x){mt.call(this,l,x)}function Sn(x){mt.call(this,l,x)}function Ln(x){mt.call(this,l,x)}function Xn(x){mt.call(this,l,x)}function $n(x){mt.call(this,l,x)}function sl(x){mt.call(this,l,x)}function Vn(x){mt.call(this,l,x)}function ml(x){We[x?"unshift":"push"](()=>{fn=x,t(28,fn)})}function rl(){rn=this.clientWidth,dn=this.clientHeight,t(26,rn),t(27,dn)}return l.$$set=x=>{e=kt(kt({},e),Bn(x)),t(33,s=Ft(e,o)),"id"in x&&t(35,w=x.id),"nodes"in x&&t(36,g=x.nodes),"edges"in x&&t(37,v=x.edges),"fitView"in x&&t(38,k=x.fitView),"fitViewOptions"in x&&t(39,E=x.fitViewOptions),"minZoom"in x&&t(40,I=x.minZoom),"maxZoom"in x&&t(41,T=x.maxZoom),"initialViewport"in x&&t(42,S=x.initialViewport),"viewport"in x&&c(t(0,A=x.viewport)),"nodeTypes"in x&&t(43,O=x.nodeTypes),"edgeTypes"in x&&t(44,H=x.edgeTypes),"selectionKey"in x&&t(1,F=x.selectionKey),"selectionMode"in x&&t(45,K=x.selectionMode),"panActivationKey"in x&&t(2,U=x.panActivationKey),"multiSelectionKey"in x&&t(3,D=x.multiSelectionKey),"zoomActivationKey"in x&&t(4,Y=x.zoomActivationKey),"nodesDraggable"in x&&t(46,P=x.nodesDraggable),"nodesConnectable"in x&&t(47,j=x.nodesConnectable),"nodeDragThreshold"in x&&t(48,G=x.nodeDragThreshold),"elementsSelectable"in x&&t(49,X=x.elementsSelectable),"snapGrid"in x&&t(50,Z=x.snapGrid),"deleteKey"in x&&t(5,J=x.deleteKey),"connectionRadius"in x&&t(51,L=x.connectionRadius),"connectionLineType"in x&&t(52,re=x.connectionLineType),"connectionMode"in x&&t(53,q=x.connectionMode),"connectionLineStyle"in x&&t(6,ae=x.connectionLineStyle),"connectionLineContainerStyle"in x&&t(7,ge=x.connectionLineContainerStyle),"onMoveStart"in x&&t(8,se=x.onMoveStart),"onMove"in x&&t(9,Oe=x.onMove),"onMoveEnd"in x&&t(10,Q=x.onMoveEnd),"isValidConnection"in x&&t(54,fe=x.isValidConnection),"translateExtent"in x&&t(55,Ce=x.translateExtent),"nodeExtent"in x&&t(56,Ge=x.nodeExtent),"onlyRenderVisibleElements"in x&&t(57,Ke=x.onlyRenderVisibleElements),"panOnScrollMode"in x&&t(11,ue=x.panOnScrollMode),"preventScrolling"in x&&t(12,it=x.preventScrolling),"zoomOnScroll"in x&&t(13,at=x.zoomOnScroll),"zoomOnDoubleClick"in x&&t(14,Yt=x.zoomOnDoubleClick),"zoomOnPinch"in x&&t(15,St=x.zoomOnPinch),"panOnScroll"in x&&t(16,_t=x.panOnScroll),"panOnDrag"in x&&t(17,Rt=x.panOnDrag),"selectionOnDrag"in x&&t(18,Tt=x.selectionOnDrag),"autoPanOnConnect"in x&&t(58,pe=x.autoPanOnConnect),"autoPanOnNodeDrag"in x&&t(59,je=x.autoPanOnNodeDrag),"onerror"in x&&t(60,rt=x.onerror),"ondelete"in x&&t(61,he=x.ondelete),"onedgecreate"in x&&t(62,wt=x.onedgecreate),"attributionPosition"in x&&t(19,dt=x.attributionPosition),"proOptions"in x&&t(20,pt=x.proOptions),"defaultEdgeOptions"in x&&t(21,De=x.defaultEdgeOptions),"width"in x&&t(63,Vt=x.width),"height"in x&&t(64,de=x.height),"colorMode"in x&&t(65,Me=x.colorMode),"onconnect"in x&&t(66,we=x.onconnect),"onconnectstart"in x&&t(67,Xe=x.onconnectstart),"onconnectend"in x&&t(68,ht=x.onconnectend),"onbeforedelete"in x&&t(69,yt=x.onbeforedelete),"oninit"in x&&t(70,It=x.oninit),"nodeOrigin"in x&&t(71,zt=x.nodeOrigin),"paneClickDistance"in x&&t(22,Bt=x.paneClickDistance),"nodeClickDistance"in x&&t(23,Nt=x.nodeClickDistance),"defaultMarkerColor"in x&&t(72,Xt=x.defaultMarkerColor),"style"in x&&t(24,At=x.style),"class"in x&&t(25,on=x.class),"$$scope"in x&&t(99,p=x.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&201326592&&rn!==void 0&&dn!==void 0&&(Ct.width.set(rn),Ct.height.set(dn)),l.$$.dirty[2]&6400&&!W&&i&&(It==null||It(),t(73,W=!0)),l.$$.dirty[1]&2097135632|l.$$.dirty[2]&1777&&Yg(Ct,{flowId:w,connectionLineType:re,connectionRadius:L,selectionMode:K,snapGrid:Z,defaultMarkerColor:Xt,nodesDraggable:P,nodesConnectable:j,elementsSelectable:X,onlyRenderVisibleElements:Ke,isValidConnection:fe,autoPanOnConnect:pe,autoPanOnNodeDrag:je,onerror:rt,ondelete:he,onedgecreate:wt,connectionMode:q,nodeDragThreshold:G,onconnect:we,onconnectstart:Xe,onconnectend:ht,onbeforedelete:yt,nodeOrigin:zt}),l.$$.dirty[0]&4194304|l.$$.dirty[1]&16791040&&xr(Ct,{nodeTypes:O,edgeTypes:H,minZoom:I,maxZoom:T,translateExtent:Ce,paneClickDistance:Bt}),l.$$.dirty[2]&8&&h(t(29,n=Kg(Me)))},[A,F,U,D,Y,J,ae,ge,se,Oe,Q,ue,it,at,Yt,St,_t,Rt,Tt,dt,pt,De,Bt,Nt,At,on,rn,dn,fn,n,u,yn,tn,s,b,w,g,v,k,E,I,T,S,O,H,K,P,j,G,X,Z,L,re,q,fe,Ce,Ge,Ke,pe,je,rt,he,wt,Vt,de,Me,we,Xe,ht,yt,It,zt,Xt,W,i,d,Ne,Ze,tt,Ye,st,hn,En,ct,Pt,In,Mn,An,Tn,hl,ol,Sn,Ln,Xn,$n,sl,Vn,ml,rl,p]}class e1 extends Le{constructor(e){super(),Re(this,e,$g,xg,Fe,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function t1(l){let e;const t=l[7].default,n=Gt(t,l,l[6],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,[s]){n&&n.p&&(!e||s&64)&&qt(n,t,o,o[6],e?Qt(t,o[6],s,null):Jt(o[6]),null)},i(o){e||(C(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function n1(l,e,t){let{$$slots:n={},$$scope:o}=e,{initialNodes:s=void 0}=e,{initialEdges:i=void 0}=e,{initialWidth:r=void 0}=e,{initialHeight:a=void 0}=e,{fitView:c=void 0}=e,{nodeOrigin:u=void 0}=e;const f=Ta({nodes:s,edges:i,width:r,height:a,nodeOrigin:u,fitView:c});return Ol(No,{getStore:()=>f}),ll(()=>{f.reset()}),l.$$set=h=>{"initialNodes"in h&&t(0,s=h.initialNodes),"initialEdges"in h&&t(1,i=h.initialEdges),"initialWidth"in h&&t(2,r=h.initialWidth),"initialHeight"in h&&t(3,a=h.initialHeight),"fitView"in h&&t(4,c=h.fitView),"nodeOrigin"in h&&t(5,u=h.nodeOrigin),"$$scope"in h&&t(6,o=h.$$scope)},[s,i,r,a,c,u,o,n]}class l1 extends Le{constructor(e){super(),Re(this,e,n1,t1,Fe,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const o1=l=>({}),ei=l=>({class:"button-svg"});function s1(l){let e,t,n,o,s;const i=l[8].default,r=Gt(i,l,l[7],ei);let a=[{type:"button"},{class:t=Ht(["svelte-flow__controls-button",l[0]])},l[6]],c={};for(let u=0;u<a.length;u+=1)c=kt(c,a[u]);return{c(){e=V("button"),r&&r.c(),this.h()},l(u){e=z(u,"BUTTON",{type:!0,class:!0});var f=M(e);r&&r.l(f),f.forEach(_),this.h()},h(){Il(e,c),$e(e,"--xy-controls-button-background-color-props",l[1]),$e(e,"--xy-controls-button-background-color-hover-props",l[2]),$e(e,"--xy-controls-button-color-props",l[3]),$e(e,"--xy-controls-button-color-hover-props",l[4]),$e(e,"--xy-controls-button-border-color-props",l[5])},m(u,f){B(u,e,f),r&&r.m(e,null),e.autofocus&&e.focus(),n=!0,o||(s=ke(e,"click",l[9]),o=!0)},p(u,[f]){r&&r.p&&(!n||f&128)&&qt(r,i,u,u[7],n?Qt(i,u[7],f,o1):Jt(u[7]),ei),Il(e,c=nl(a,[{type:"button"},(!n||f&1&&t!==(t=Ht(["svelte-flow__controls-button",u[0]])))&&{class:t},f&64&&u[6]])),$e(e,"--xy-controls-button-background-color-props",u[1]),$e(e,"--xy-controls-button-background-color-hover-props",u[2]),$e(e,"--xy-controls-button-color-props",u[3]),$e(e,"--xy-controls-button-color-hover-props",u[4]),$e(e,"--xy-controls-button-border-color-props",u[5])},i(u){n||(C(r,u),n=!0)},o(u){N(r,u),n=!1},d(u){u&&_(e),r&&r.d(u),o=!1,s()}}}function r1(l,e,t){const n=["class"];let o=Ft(e,n),{$$slots:s={},$$scope:i}=e,{class:r=void 0}=e,a,c,u,f,h;function d(p){mt.call(this,l,p)}return l.$$set=p=>{e=kt(kt({},e),Bn(p)),t(6,o=Ft(e,n)),"class"in p&&t(0,r=p.class),"$$scope"in p&&t(7,i=p.$$scope)},[r,a,c,u,f,h,o,i,s,d]}class po extends Le{constructor(e){super(),Re(this,e,r1,s1,Fe,{class:0})}}function i1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=M(e);t=ze(o,"path",{d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 32")},m(n,o){B(n,e,o),y(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class a1 extends Le{constructor(e){super(),Re(this,e,null,i1,Fe,{})}}function c1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=M(e);t=ze(o,"path",{d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M0 0h32v4.2H0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 5")},m(n,o){B(n,e,o),y(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class u1 extends Le{constructor(e){super(),Re(this,e,null,c1,Fe,{})}}function f1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=M(e);t=ze(o,"path",{d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 30")},m(n,o){B(n,e,o),y(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class d1 extends Le{constructor(e){super(),Re(this,e,null,f1,Fe,{})}}function h1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=M(e);t=ze(o,"path",{d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){B(n,e,o),y(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class m1 extends Le{constructor(e){super(),Re(this,e,null,h1,Fe,{})}}function g1(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,viewBox:!0});var o=M(e);t=ze(o,"path",{d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){B(n,e,o),y(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class _1 extends Le{constructor(e){super(),Re(this,e,null,g1,Fe,{})}}const p1=l=>({}),ti=l=>({}),b1=l=>({}),ni=l=>({});function li(l){let e,t,n,o;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:l[9]},l[17]];let i={$$slots:{default:[v1]},$$scope:{ctx:l}};for(let c=0;c<s.length;c+=1)i=kt(i,s[c]);e=new po({props:i}),e.$on("click",l[18]);const r=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:l[10]},l[17]];let a={$$slots:{default:[w1]},$$scope:{ctx:l}};for(let c=0;c<r.length;c+=1)a=kt(a,r[c]);return n=new po({props:a}),n.$on("click",l[19]),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment)},l(c){oe(e.$$.fragment,c),t=ee(c),oe(n.$$.fragment,c)},m(c,u){ne(e,c,u),B(c,t,u),ne(n,c,u),o=!0},p(c,u){const f=u[0]&131584?nl(s,[s[0],s[1],s[2],u[0]&512&&{disabled:c[9]},u[0]&131072&&Bl(c[17])]):{};u[1]&32&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const h=u[0]&132096?nl(r,[r[0],r[1],r[2],u[0]&1024&&{disabled:c[10]},u[0]&131072&&Bl(c[17])]):{};u[1]&32&&(h.$$scope={dirty:u,ctx:c}),n.$set(h)},i(c){o||(C(e.$$.fragment,c),C(n.$$.fragment,c),o=!0)},o(c){N(e.$$.fragment,c),N(n.$$.fragment,c),o=!1},d(c){c&&_(t),le(e,c),le(n,c)}}}function v1(l){let e,t;return e=new a1({}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function w1(l){let e,t;return e=new u1({}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function oi(l){let e,t;const n=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},l[17]];let o={$$slots:{default:[k1]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=kt(o,n[s]);return e=new po({props:o}),e.$on("click",l[20]),{c(){te(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,i){ne(e,s,i),t=!0},p(s,i){const r=i[0]&131072?nl(n,[n[0],n[1],n[2],Bl(s[17])]):{};i[1]&32&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){le(e,s)}}}function k1(l){let e,t;return e=new d1({}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function si(l){let e,t;const n=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},l[17]];let o={$$slots:{default:[I1]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=kt(o,n[s]);return e=new po({props:o}),e.$on("click",l[21]),{c(){te(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,i){ne(e,s,i),t=!0},p(s,i){const r=i[0]&131072?nl(n,[n[0],n[1],n[2],Bl(s[17])]):{};i[0]&256|i[1]&32&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){le(e,s)}}}function y1(l){let e,t;return e=new m1({}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function E1(l){let e,t;return e=new _1({}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function I1(l){let e,t,n,o;const s=[E1,y1],i=[];function r(a,c){return a[8]?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e!==u&&(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t||(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function S1(l){let e,t,n,o,s,i;const r=l[35].before,a=Gt(r,l,l[36],ni);let c=l[1]&&li(l),u=l[2]&&oi(l),f=l[3]&&si(l);const h=l[35].default,d=Gt(h,l,l[36],null),p=l[35].after,b=Gt(p,l,l[36],ti);return{c(){a&&a.c(),e=$(),c&&c.c(),t=$(),u&&u.c(),n=$(),f&&f.c(),o=$(),d&&d.c(),s=$(),b&&b.c()},l(w){a&&a.l(w),e=ee(w),c&&c.l(w),t=ee(w),u&&u.l(w),n=ee(w),f&&f.l(w),o=ee(w),d&&d.l(w),s=ee(w),b&&b.l(w)},m(w,g){a&&a.m(w,g),B(w,e,g),c&&c.m(w,g),B(w,t,g),u&&u.m(w,g),B(w,n,g),f&&f.m(w,g),B(w,o,g),d&&d.m(w,g),B(w,s,g),b&&b.m(w,g),i=!0},p(w,g){a&&a.p&&(!i||g[1]&32)&&qt(a,r,w,w[36],i?Qt(r,w[36],g,b1):Jt(w[36]),ni),w[1]?c?(c.p(w,g),g[0]&2&&C(c,1)):(c=li(w),c.c(),C(c,1),c.m(t.parentNode,t)):c&&(He(),N(c,1,1,()=>{c=null}),Be()),w[2]?u?(u.p(w,g),g[0]&4&&C(u,1)):(u=oi(w),u.c(),C(u,1),u.m(n.parentNode,n)):u&&(He(),N(u,1,1,()=>{u=null}),Be()),w[3]?f?(f.p(w,g),g[0]&8&&C(f,1)):(f=si(w),f.c(),C(f,1),f.m(o.parentNode,o)):f&&(He(),N(f,1,1,()=>{f=null}),Be()),d&&d.p&&(!i||g[1]&32)&&qt(d,h,w,w[36],i?Qt(h,w[36],g,null):Jt(w[36]),null),b&&b.p&&(!i||g[1]&32)&&qt(b,p,w,w[36],i?Qt(p,w[36],g,p1):Jt(w[36]),ti)},i(w){i||(C(a,w),C(c),C(u),C(f),C(d,w),C(b,w),i=!0)},o(w){N(a,w),N(c),N(u),N(f),N(d,w),N(b,w),i=!1},d(w){w&&(_(e),_(t),_(n),_(o),_(s)),a&&a.d(w),c&&c.d(w),u&&u.d(w),f&&f.d(w),d&&d.d(w),b&&b.d(w)}}}function C1(l){let e,t;return e=new Pa({props:{class:Ht(["svelte-flow__controls",l[7],l[6]]),position:l[0],"data-testid":"svelte-flow__controls","aria-label":l[4]??"Svelte Flow controls",style:l[5],$$slots:{default:[S1]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&192&&(s.class=Ht(["svelte-flow__controls",n[7],n[6]])),o[0]&1&&(s.position=n[0]),o[0]&16&&(s["aria-label"]=n[4]??"Svelte Flow controls"),o[0]&32&&(s.style=n[5]),o[0]&1806|o[1]&32&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function D1(l,e,t){let n,o,s,i,r,a,c,u,f,h,{$$slots:d={},$$scope:p}=e,{position:b="bottom-left"}=e,{showZoom:w=!0}=e,{showFitView:g=!0}=e,{showLock:v=!0}=e,{buttonBgColor:k=void 0}=e,{buttonBgColorHover:E=void 0}=e,{buttonColor:I=void 0}=e,{buttonColorHover:T=void 0}=e,{buttonBorderColor:S=void 0}=e,{ariaLabel:A=void 0}=e,{style:O=void 0}=e,{orientation:H="vertical"}=e,{fitViewOptions:F=void 0}=e,{class:K=""}=e;const{zoomIn:U,zoomOut:D,fitView:Y,viewport:P,minZoom:j,maxZoom:G,nodesDraggable:X,nodesConnectable:Z,elementsSelectable:J}=jt();ce(l,P,se=>t(30,a=se)),ce(l,j,se=>t(31,c=se)),ce(l,G,se=>t(29,r=se)),ce(l,X,se=>t(34,h=se)),ce(l,Z,se=>t(33,f=se)),ce(l,J,se=>t(32,u=se));const L={bgColor:k,bgColorHover:E,color:I,colorHover:T,borderColor:S},re=()=>{U()},q=()=>{D()},ae=()=>{Y(F)},ge=()=>{t(8,n=!n),X.set(n),Z.set(n),J.set(n)};return l.$$set=se=>{"position"in se&&t(0,b=se.position),"showZoom"in se&&t(1,w=se.showZoom),"showFitView"in se&&t(2,g=se.showFitView),"showLock"in se&&t(3,v=se.showLock),"buttonBgColor"in se&&t(22,k=se.buttonBgColor),"buttonBgColorHover"in se&&t(23,E=se.buttonBgColorHover),"buttonColor"in se&&t(24,I=se.buttonColor),"buttonColorHover"in se&&t(25,T=se.buttonColorHover),"buttonBorderColor"in se&&t(26,S=se.buttonBorderColor),"ariaLabel"in se&&t(4,A=se.ariaLabel),"style"in se&&t(5,O=se.style),"orientation"in se&&t(27,H=se.orientation),"fitViewOptions"in se&&t(28,F=se.fitViewOptions),"class"in se&&t(6,K=se.class),"$$scope"in se&&t(36,p=se.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&14&&t(8,n=h||f||u),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&1&&t(10,o=a.zoom<=c),l.$$.dirty[0]&1610612736&&t(9,s=a.zoom>=r),l.$$.dirty[0]&134217728&&t(7,i=H==="horizontal"?"horizontal":"vertical")},[b,w,g,v,A,O,K,i,n,s,o,P,j,G,X,Z,J,L,re,q,ae,ge,k,E,I,T,S,H,F,r,a,c,u,f,h,d,p]}let M1=class extends Le{constructor(e){super(),Re(this,e,D1,C1,Fe,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}};var Jn;(function(l){l.Lines="lines",l.Dots="dots",l.Cross="cross"})(Jn||(Jn={}));function T1(l){let e,t;return{c(){e=Ve("circle"),this.h()},l(n){e=ze(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),M(e).forEach(_),this.h()},h(){m(e,"cx",l[0]),m(e,"cy",l[0]),m(e,"r",l[0]),m(e,"class",t=Ht(["svelte-flow__background-pattern","dots",l[1]]))},m(n,o){B(n,e,o)},p(n,[o]){o&1&&m(e,"cx",n[0]),o&1&&m(e,"cy",n[0]),o&1&&m(e,"r",n[0]),o&2&&t!==(t=Ht(["svelte-flow__background-pattern","dots",n[1]]))&&m(e,"class",t)},i:ye,o:ye,d(n){n&&_(e)}}}function V1(l,e,t){let{radius:n=5}=e,{class:o=""}=e;return l.$$set=s=>{"radius"in s&&t(0,n=s.radius),"class"in s&&t(1,o=s.class)},[n,o]}class z1 extends Le{constructor(e){super(),Re(this,e,V1,T1,Fe,{radius:0,class:1})}}function N1(l){let e,t,n;return{c(){e=Ve("path"),this.h()},l(o){e=ze(o,"path",{"stroke-width":!0,d:!0,class:!0}),M(e).forEach(_),this.h()},h(){m(e,"stroke-width",l[0]),m(e,"d",t=`M${l[1][0]/2} 0 V${l[1][1]} M0 ${l[1][1]/2} H${l[1][0]}`),m(e,"class",n=Ht(["svelte-flow__background-pattern",l[2],l[3]]))},m(o,s){B(o,e,s)},p(o,[s]){s&1&&m(e,"stroke-width",o[0]),s&2&&t!==(t=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&m(e,"d",t),s&12&&n!==(n=Ht(["svelte-flow__background-pattern",o[2],o[3]]))&&m(e,"class",n)},i:ye,o:ye,d(o){o&&_(e)}}}function P1(l,e,t){let{lineWidth:n=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:i=""}=e;return l.$$set=r=>{"lineWidth"in r&&t(0,n=r.lineWidth),"dimensions"in r&&t(1,o=r.dimensions),"variant"in r&&t(2,s=r.variant),"class"in r&&t(3,i=r.class)},[n,o,s,i]}class O1 extends Le{constructor(e){super(),Re(this,e,P1,N1,Fe,{lineWidth:0,dimensions:1,variant:2,class:3})}}function H1(l){let e,t;return e=new O1({props:{dimensions:l[6],variant:l[0],lineWidth:l[1],class:l[4]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.dimensions=n[6]),o&1&&(s.variant=n[0]),o&2&&(s.lineWidth=n[1]),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function B1(l){let e,t;return e=new z1({props:{radius:l[7]/2,class:l[4]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.radius=n[7]/2),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function A1(l){let e,t,n,o,s,i,r,a,c,u,f,h,d;const p=[B1,H1],b=[];function w(g,v){return g[14]?0:1}return n=w(l),o=b[n]=p[n](l),{c(){e=Ve("svg"),t=Ve("pattern"),o.c(),u=Ve("rect"),this.h()},l(g){e=ze(g,"svg",{class:!0,"data-testid":!0});var v=M(e);t=ze(v,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var k=M(t);o.l(k),k.forEach(_),u=ze(v,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),M(u).forEach(_),v.forEach(_),this.h()},h(){m(t,"id",l[11]),m(t,"x",s=l[9].x%l[8][0]),m(t,"y",i=l[9].y%l[8][1]),m(t,"width",r=l[8][0]),m(t,"height",a=l[8][1]),m(t,"patternUnits","userSpaceOnUse"),m(t,"patternTransform",c=`translate(-${l[10][0]},-${l[10][1]})`),m(u,"x","0"),m(u,"y","0"),m(u,"width","100%"),m(u,"height","100%"),m(u,"fill",f=`url(#${l[11]})`),m(e,"class",h=us(Ht(["svelte-flow__background",l[5]]))+" svelte-1r7pe8d"),m(e,"data-testid","svelte-flow__background"),$e(e,"--xy-background-color-props",l[2]),$e(e,"--xy-background-pattern-color-props",l[3])},m(g,v){B(g,e,v),y(e,t),b[n].m(t,null),y(e,u),d=!0},p(g,[v]){o.p(g,v),(!d||v&2048)&&m(t,"id",g[11]),(!d||v&768&&s!==(s=g[9].x%g[8][0]))&&m(t,"x",s),(!d||v&768&&i!==(i=g[9].y%g[8][1]))&&m(t,"y",i),(!d||v&256&&r!==(r=g[8][0]))&&m(t,"width",r),(!d||v&256&&a!==(a=g[8][1]))&&m(t,"height",a),(!d||v&1024&&c!==(c=`translate(-${g[10][0]},-${g[10][1]})`))&&m(t,"patternTransform",c),(!d||v&2048&&f!==(f=`url(#${g[11]})`))&&m(u,"fill",f),(!d||v&32&&h!==(h=us(Ht(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&m(e,"class",h),v&4&&$e(e,"--xy-background-color-props",g[2]),v&8&&$e(e,"--xy-background-pattern-color-props",g[3])},i(g){d||(C(o),d=!0)},o(g){N(o),d=!1},d(g){g&&_(e),b[n].d()}}}const L1={[Jn.Dots]:1,[Jn.Lines]:1,[Jn.Cross]:6};function R1(l,e,t){let n,o,s,i,r,a,c,{id:u=void 0}=e,{variant:f=Jn.Dots}=e,{gap:h=20}=e,{size:d=1}=e,{lineWidth:p=1}=e,{bgColor:b=void 0}=e,{patternColor:w=void 0}=e,{patternClass:g=void 0}=e,{class:v=""}=e;const{viewport:k,flowId:E}=jt();ce(l,k,O=>t(9,a=O)),ce(l,E,O=>t(18,c=O));const I=d||L1[f],T=f===Jn.Dots,S=f===Jn.Cross,A=Array.isArray(h)?h:[h,h];return l.$$set=O=>{"id"in O&&t(15,u=O.id),"variant"in O&&t(0,f=O.variant),"gap"in O&&t(16,h=O.gap),"size"in O&&t(17,d=O.size),"lineWidth"in O&&t(1,p=O.lineWidth),"bgColor"in O&&t(2,b=O.bgColor),"patternColor"in O&&t(3,w=O.patternColor),"patternClass"in O&&t(4,g=O.patternClass),"class"in O&&t(5,v=O.class)},l.$$.update=()=>{l.$$.dirty&294912&&t(11,n=`background-pattern-${c}-${u||""}`),l.$$.dirty&512&&t(8,o=[A[0]*a.zoom||1,A[1]*a.zoom||1]),l.$$.dirty&512&&t(7,s=I*a.zoom),l.$$.dirty&384&&t(6,i=S?[s,s]:o),l.$$.dirty&192&&t(10,r=T?[s/2,s/2]:[i[0]/2,i[1]/2])},[f,p,b,w,g,v,i,s,o,a,r,n,k,E,T,u,h,d,c]}class U1 extends Le{constructor(e){super(),Re(this,e,R1,A1,Fe,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const ri=l=>rh(l);function W1(){const{zoomIn:l,zoomOut:e,fitView:t,onbeforedelete:n,snapGrid:o,viewport:s,width:i,height:r,minZoom:a,maxZoom:c,panZoom:u,nodes:f,edges:h,domNode:d,nodeLookup:p,nodeOrigin:b,edgeLookup:w,connectionLookup:g}=jt(),v=I=>{var H,F;const T=me(p),S=ri(I)?I:T.get(I.id),A=S.parentId?fh(S.position,S.measured,S.parentId,T,me(b)):S.position,O={id:S.id,position:A,width:((H=S.measured)==null?void 0:H.width)??S.width,height:((F=S.measured)==null?void 0:F.height)??S.height,data:S.data};return Ml(O)},k=(I,T,S={replace:!1})=>{var H;const A=(H=me(p).get(I))==null?void 0:H.internals.userNode;if(!A)return;const O=typeof T=="function"?T(A):T;S.replace?f.update(F=>F.map(K=>K.id===I?ri(O)?O:{...K,...O}:K)):(Object.assign(A,O),f.update(F=>F))},E=I=>me(p).get(I);return{zoomIn:l,zoomOut:e,getInternalNode:E,getNode:I=>{var T;return(T=E(I))==null?void 0:T.internals.userNode},getNodes:I=>I===void 0?me(f):ii(me(p),I),getEdge:I=>me(w).get(I),getEdges:I=>I===void 0?me(h):ii(me(w),I),setZoom:(I,T)=>{const S=me(u);return S?S.scaleTo(I,{duration:T==null?void 0:T.duration}):Promise.resolve(!1)},getZoom:()=>me(s).zoom,setViewport:async(I,T)=>{const S=me(s),A=me(u);return A?(await A.setViewport({x:I.x??S.x,y:I.y??S.y,zoom:I.zoom??S.zoom},{duration:T==null?void 0:T.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>me(s),setCenter:async(I,T,S)=>{const A=typeof(S==null?void 0:S.zoom)<"u"?S.zoom:me(c),O=me(u);return O?(await O.setViewport({x:me(i)/2-I*A,y:me(r)/2-T*A,zoom:A},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(I,T)=>{const S=me(u);if(!S)return Promise.resolve(!1);const A=os(I,me(i),me(r),me(a),me(c),(T==null?void 0:T.padding)??.1);return await S.setViewport(A,{duration:T==null?void 0:T.duration}),Promise.resolve(!0)},getIntersectingNodes:(I,T=!0,S)=>{const A=Er(I),O=A?I:v(I);return O?(S||me(f)).filter(H=>{const F=me(p).get(H.id);if(!F||!A&&H.id===I.id)return!1;const K=Ml(F),U=Ul(K,O);return T&&U>0||U>=O.width*O.height}):[]},isNodeIntersecting:(I,T,S=!0)=>{const O=Er(I)?I:v(I);if(!O)return!1;const H=Ul(O,T);return S&&H>0||H>=O.width*O.height},deleteElements:async({nodes:I=[],edges:T=[]})=>{const{nodes:S,edges:A}=await na({nodesToRemove:I,edgesToRemove:T,nodes:me(f),edges:me(h),onBeforeDelete:me(n)});return S&&f.update(O=>O.filter(H=>!S.some(({id:F})=>F===H.id))),A&&h.update(O=>O.filter(H=>!A.some(({id:F})=>F===H.id))),{deletedNodes:S,deletedEdges:A}},screenToFlowPosition:(I,T={snapToGrid:!0})=>{const S=me(d);if(!S)return I;const A=T.snapToGrid?me(o):!1,{x:O,y:H,zoom:F}=me(s),{x:K,y:U}=S.getBoundingClientRect(),D={x:I.x-K,y:I.y-U};return Zl(D,[O,H,F],A!==null,A||[1,1])},flowToScreenPosition:I=>{const T=me(d);if(!T)return I;const{x:S,y:A,zoom:O}=me(s),{x:H,y:F}=T.getBoundingClientRect(),K=sa(I,[S,A,O]);return{x:K.x+H,y:K.y+F}},toObject:()=>({nodes:me(f).map(I=>({...I,position:{...I.position},data:{...I.data}})),edges:me(h).map(I=>({...I})),viewport:{...me(s)}}),updateNode:k,updateNodeData:(I,T,S)=>{var H;const A=(H=me(p).get(I))==null?void 0:H.internals.userNode;if(!A)return;const O=typeof T=="function"?T(A):T;A.data=S!=null&&S.replace?O:{...A.data,...O},f.update(F=>F)},getNodesBounds:I=>{const T=me(p),S=me(b);return ih(I,{nodeLookup:T,nodeOrigin:S})},getHandleConnections:({type:I,id:T,nodeId:S})=>{var A;return Array.from(((A=me(g).get(`${S}-${I}-${T??null}`))==null?void 0:A.values())??[])},viewport:s}}function ii(l,e){var n;const t=[];for(const o of e){const s=l.get(o);if(s){const i="internals"in s?(n=s.internals)==null?void 0:n.userNode:s;t.push(i)}}return t}function F1(){const{nodesInitialized:l}=jt();return{subscribe:l.subscribe}}function ai(l,e,t){const n=l.slice();return n[25]=e[t],n[27]=t,n}function ci(l,e,t){const n=l.slice();return n[22]=e[t],n[24]=t,n}function j1(l){let e,t;return e=new Io({props:{className:"size-4"}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p:ye,i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Y1(l){let e,t,n,o,s,i,r,a=l[8].t("Tools")+"",c,u,f=l[8].t("Functions")+"",h,d,p,b,w,g,v,k;function E(A,O){if(A[1]==="tools")return K1;if(A[1]==="functions")return X1}let I=E(l),T=I&&I(l),S=l[2]&&di(l);return{c(){e=V("form"),t=V("div"),n=V("div"),o=V("div"),s=V("div"),i=V("select"),r=V("option"),c=Ie(a),u=V("option"),h=Ie(f),d=$(),p=V("div"),b=V("select"),T&&T.c(),w=$(),S&&S.c(),this.h()},l(A){e=z(A,"FORM",{class:!0});var O=M(e);t=z(O,"DIV",{class:!0});var H=M(t);n=z(H,"DIV",{class:!0});var F=M(n);o=z(F,"DIV",{class:!0});var K=M(o);s=z(K,"DIV",{class:!0});var U=M(s);i=z(U,"SELECT",{class:!0,placeholder:!0});var D=M(i);r=z(D,"OPTION",{class:!0});var Y=M(r);c=Se(Y,a),Y.forEach(_),u=z(D,"OPTION",{class:!0});var P=M(u);h=Se(P,f),P.forEach(_),D.forEach(_),U.forEach(_),d=ee(K),p=z(K,"DIV",{class:!0});var j=M(p);b=z(j,"SELECT",{class:!0});var G=M(b);T&&T.l(G),G.forEach(_),j.forEach(_),K.forEach(_),F.forEach(_),w=ee(H),S&&S.l(H),H.forEach(_),O.forEach(_),this.h()},h(){r.__value="tools",Cn(r,r.__value),m(r,"class","bg-gray-100 dark:bg-gray-800"),u.__value="functions",Cn(u,u.__value),m(u,"class","bg-gray-100 dark:bg-gray-800"),m(i,"class","w-full rounded text-xs py-2 px-1 bg-transparent outline-none"),m(i,"placeholder","Select"),l[1]===void 0&&tl(()=>l[13].call(i)),m(s,"class","flex-1"),m(b,"class","w-full rounded py-2 px-1 text-xs bg-transparent outline-none"),l[2]===void 0&&tl(()=>l[14].call(b)),m(p,"class","flex-1"),m(o,"class","flex gap-2"),m(n,"class","space-y-1"),m(t,"class","flex flex-col"),m(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(A,O){B(A,e,O),y(e,t),y(t,n),y(n,o),y(o,s),y(s,i),y(i,r),y(r,c),y(i,u),y(u,h),Ql(i,l[1],!0),y(o,d),y(o,p),y(p,b),T&&T.m(b,null),Ql(b,l[2],!0),y(t,w),S&&S.m(t,null),g=!0,v||(k=[ke(i,"change",l[13]),ke(b,"change",l[14]),ke(b,"change",l[15]),ke(e,"submit",jl(l[18]))],v=!0)},p(A,O){(!g||O&256)&&a!==(a=A[8].t("Tools")+"")&&Te(c,a),(!g||O&256)&&f!==(f=A[8].t("Functions")+"")&&Te(h,f),O&2&&Ql(i,A[1]),I===(I=E(A))&&T?T.p(A,O):(T&&T.d(1),T=I&&I(A),T&&(T.c(),T.m(b,null))),O&196&&Ql(b,A[2]),A[2]?S?(S.p(A,O),O&4&&C(S,1)):(S=di(A),S.c(),C(S,1),S.m(t,null)):S&&(He(),N(S,1,1,()=>{S=null}),Be())},i(A){g||(C(S),g=!0)},o(A){N(S),g=!1},d(A){A&&_(e),T&&T.d(),S&&S.d(),v=!1,en(k)}}}function X1(l){let e,t=l[8].t("Select a function")+"",n,o,s=vt(l[7]),i=[];for(let r=0;r<s.length;r+=1)i[r]=ui(ai(l,s,r));return{c(){e=V("option"),n=Ie(t);for(let r=0;r<i.length;r+=1)i[r].c();o=Ae(),this.h()},l(r){e=z(r,"OPTION",{class:!0});var a=M(e);n=Se(a,t),a.forEach(_);for(let c=0;c<i.length;c+=1)i[c].l(r);o=Ae(),this.h()},h(){e.__value="",Cn(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(r,a){B(r,e,a),y(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,a);B(r,o,a)},p(r,a){if(a&256&&t!==(t=r[8].t("Select a function")+"")&&Te(n,t),a&128){s=vt(r[7]);let c;for(c=0;c<s.length;c+=1){const u=ai(r,s,c);i[c]?i[c].p(u,a):(i[c]=ui(u),i[c].c(),i[c].m(o.parentNode,o))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&(_(e),_(o)),Dn(i,r)}}}function K1(l){let e,t=l[8].t("Select a tool")+"",n,o,s=vt(l[6]),i=[];for(let r=0;r<s.length;r+=1)i[r]=fi(ci(l,s,r));return{c(){e=V("option"),n=Ie(t);for(let r=0;r<i.length;r+=1)i[r].c();o=Ae(),this.h()},l(r){e=z(r,"OPTION",{class:!0});var a=M(e);n=Se(a,t),a.forEach(_);for(let c=0;c<i.length;c+=1)i[c].l(r);o=Ae(),this.h()},h(){e.__value="",Cn(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(r,a){B(r,e,a),y(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,a);B(r,o,a)},p(r,a){if(a&256&&t!==(t=r[8].t("Select a tool")+"")&&Te(n,t),a&64){s=vt(r[6]);let c;for(c=0;c<s.length;c+=1){const u=ci(r,s,c);i[c]?i[c].p(u,a):(i[c]=fi(u),i[c].c(),i[c].m(o.parentNode,o))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&(_(e),_(o)),Dn(i,r)}}}function ui(l){let e,t=l[25].name+"",n,o;return{c(){e=V("option"),n=Ie(t),this.h()},l(s){e=z(s,"OPTION",{class:!0});var i=M(e);n=Se(i,t),i.forEach(_),this.h()},h(){e.__value=o=l[25].id,Cn(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,i){B(s,e,i),y(e,n)},p(s,i){i&128&&t!==(t=s[25].name+"")&&Te(n,t),i&128&&o!==(o=s[25].id)&&(e.__value=o,Cn(e,e.__value))},d(s){s&&_(e)}}}function fi(l){let e,t=l[22].name+"",n,o;return{c(){e=V("option"),n=Ie(t),this.h()},l(s){e=z(s,"OPTION",{class:!0});var i=M(e);n=Se(i,t),i.forEach(_),this.h()},h(){e.__value=o=l[22].id,Cn(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,i){B(s,e,i),y(e,n)},p(s,i){i&64&&t!==(t=s[22].name+"")&&Te(n,t),i&64&&o!==(o=s[22].id)&&(e.__value=o,Cn(e,e.__value))},d(s){s&&_(e)}}}function di(l){let e,t,n,o,s,i;const r=[G1,Z1],a=[];function c(u,f){return u[3]?1:0}return o=c(l),s=a[o]=r[o](l),{c(){e=V("hr"),t=$(),n=V("div"),s.c(),this.h()},l(u){e=z(u,"HR",{class:!0}),t=ee(u),n=z(u,"DIV",{class:!0});var f=M(n);s.l(f),f.forEach(_),this.h()},h(){m(e,"class","dark:border-gray-800 my-1 w-full"),m(n,"class","my-2 text-xs")},m(u,f){B(u,e,f),B(u,t,f),B(u,n,f),a[o].m(n,null),i=!0},p(u,f){let h=o;o=c(u),o===h?a[o].p(u,f):(He(),N(a[h],1,1,()=>{a[h]=null}),Be(),s=a[o],s?s.p(u,f):(s=a[o]=r[o](u),s.c()),C(s,1),s.m(n,null))},i(u){i||(C(s),i=!0)},o(u){N(s),i=!1},d(u){u&&(_(e),_(t),_(n)),a[o].d()}}}function Z1(l){let e,t;return e=new Io({props:{className:"size-5"}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p:ye,i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function G1(l){let e,t,n;function o(i){l[16](i)}let s={valvesSpec:l[4]};return l[5]!==void 0&&(s.valves=l[5]),e=new du({props:s}),We.push(()=>Je(e,"valves",o)),e.$on("change",l[17]),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),n=!0},p(i,r){const a={};r&16&&(a.valvesSpec=i[4]),!t&&r&32&&(t=!0,a.valves=i[5],qe(()=>t=!1)),e.$set(a)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function q1(l){let e,t,n,o;const s=[Y1,j1],i=[];function r(a,c){return a[0]&&!a[3]?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,[c]){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function J1(l,e,t){let n,o,s;ce(l,ul,O=>t(6,n=O)),ce(l,ms,O=>t(7,o=O));const i=ln(),r=Wt("i18n");ce(l,r,O=>t(8,s=O));let{show:a=!1}=e,c="tools",u="",f=!1,h=null,d={},p;const b=async()=>{p&&clearTimeout(p),p=setTimeout(()=>{g()},500)},w=async()=>{var O;if(t(3,f=!0),c==="tools"?(t(5,d=await Pc(localStorage.token,u)),t(4,h=await Oc(localStorage.token,u))):c==="functions"&&(t(5,d=await cu(localStorage.token,u)),t(4,h=await uu(localStorage.token,u))),h)for(const H in h.properties)((O=h.properties[H])==null?void 0:O.type)==="array"&&t(5,d[H]=(d[H]??[]).join(","),d);t(3,f=!1)},g=async()=>{var O;if(h){for(const H in h.properties)((O=h.properties[H])==null?void 0:O.type)==="array"&&t(5,d[H]=(d[H]??"").split(",").map(F=>F.trim()),d);if(c==="tools"){const H=await Hc(localStorage.token,u,d).catch(F=>(et.error(`${F}`),null));H&&(et.success(s.t("Valves updated")),t(5,d=H))}else if(c==="functions"){const H=await fu(localStorage.token,u,d).catch(F=>(et.error(`${F}`),null));H&&(et.success(s.t("Valves updated")),t(5,d=H))}}},v=async()=>{t(3,f=!0),o===null&&ms.set(await au(localStorage.token)),n===null&&ul.set(await $o(localStorage.token)),t(3,f=!1)};function k(){c=fs(this),t(1,c)}function E(){u=fs(this),t(2,u),t(1,c)}const I=async()=>{await xe()};function T(O){d=O,t(5,d)}const S=()=>{b()},A=()=>{g(),i("save")};return l.$$set=O=>{"show"in O&&t(0,a=O.show)},l.$$.update=()=>{l.$$.dirty&2&&c&&t(2,u=""),l.$$.dirty&4&&u&&w(),l.$$.dirty&1&&a&&v()},[a,c,u,f,h,d,n,o,s,i,r,b,g,k,E,I,T,S,A]}class Q1 extends Le{constructor(e){super(),Re(this,e,J1,q1,Fe,{show:0})}}function hi(l,e,t){const n=l.slice();return n[14]=e[t],n[16]=t,n}function x1(l){let e,t=l[3].t("You do not have permission to access this feature.")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-sm dark:text-gray-300 text-center py-2 px-10")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&8&&t!==(t=o[3].t("You do not have permission to access this feature.")+"")&&Te(n,t)},i:ye,o:ye,d(o){o&&_(e)}}}function $1(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,p=l[0].length>0&&mi(l);function b(g){l[11](g)}let w={title:l[3].t("Valves"),buttonClassName:"w-full",$$slots:{content:[t0]},$$scope:{ctx:l}};return l[2]!==void 0&&(w.open=l[2]),n=new ro({props:w}),We.push(()=>Je(n,"open",b)),a=new ro({props:{title:l[3].t("System Prompt"),open:!0,buttonClassName:"w-full",$$slots:{content:[n0]},$$scope:{ctx:l}}}),h=new ro({props:{title:l[3].t("Advanced Params"),open:!0,buttonClassName:"w-full",$$slots:{content:[l0]},$$scope:{ctx:l}}}),{c(){e=V("div"),p&&p.c(),t=$(),te(n.$$.fragment),s=$(),i=V("hr"),r=$(),te(a.$$.fragment),c=$(),u=V("hr"),f=$(),te(h.$$.fragment),this.h()},l(g){e=z(g,"DIV",{class:!0});var v=M(e);p&&p.l(v),t=ee(v),oe(n.$$.fragment,v),s=ee(v),i=z(v,"HR",{class:!0}),r=ee(v),oe(a.$$.fragment,v),c=ee(v),u=z(v,"HR",{class:!0}),f=ee(v),oe(h.$$.fragment,v),v.forEach(_),this.h()},h(){m(i,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(u,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(e,"class","dark:text-gray-200 text-sm font-primary py-0.5 px-0.5")},m(g,v){B(g,e,v),p&&p.m(e,null),y(e,t),ne(n,e,null),y(e,s),y(e,i),y(e,r),ne(a,e,null),y(e,c),y(e,u),y(e,f),ne(h,e,null),d=!0},p(g,v){g[0].length>0?p?(p.p(g,v),v&1&&C(p,1)):(p=mi(g),p.c(),C(p,1),p.m(e,t)):p&&(He(),N(p,1,1,()=>{p=null}),Be());const k={};v&8&&(k.title=g[3].t("Valves")),v&131076&&(k.$$scope={dirty:v,ctx:g}),!o&&v&4&&(o=!0,k.open=g[2],qe(()=>o=!1)),n.$set(k);const E={};v&8&&(E.title=g[3].t("System Prompt")),v&131082&&(E.$$scope={dirty:v,ctx:g}),a.$set(E);const I={};v&8&&(I.title=g[3].t("Advanced Params")),v&131090&&(I.$$scope={dirty:v,ctx:g}),h.$set(I)},i(g){d||(C(p),C(n.$$.fragment,g),C(a.$$.fragment,g),C(h.$$.fragment,g),d=!0)},o(g){N(p),N(n.$$.fragment,g),N(a.$$.fragment,g),N(h.$$.fragment,g),d=!1},d(g){g&&_(e),p&&p.d(),le(n),le(a),le(h)}}}function mi(l){let e,t,n,o;return e=new ro({props:{title:l[3].t("Files"),open:!0,buttonClassName:"w-full",$$slots:{content:[e0]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment),t=$(),n=V("hr"),this.h()},l(s){oe(e.$$.fragment,s),t=ee(s),n=z(s,"HR",{class:!0}),this.h()},h(){m(n,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(s,i){ne(e,s,i),B(s,t,i),B(s,n,i),o=!0},p(s,i){const r={};i&8&&(r.title=s[3].t("Files")),i&131073&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){o||(C(e.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),o=!1},d(s){s&&(_(t),_(n)),le(e,s)}}}function gi(l){var s,i;let e,t;function n(){return l[9](l[16])}function o(){return l[10](l[14])}return e=new Gi({props:{className:"w-full",item:l[14],edit:!0,url:(s=l[14])!=null&&s.url?l[14].url:null,name:l[14].name,type:l[14].type,size:(i=l[14])==null?void 0:i.size,dismissible:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){te(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,a){ne(e,r,a),t=!0},p(r,a){var u,f;l=r;const c={};a&1&&(c.item=l[14]),a&1&&(c.url=(u=l[14])!=null&&u.url?l[14].url:null),a&1&&(c.name=l[14].name),a&1&&(c.type=l[14].type),a&1&&(c.size=(f=l[14])==null?void 0:f.size),e.$set(c)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){le(e,r)}}}function e0(l){let e,t,n=vt(l[0]),o=[];for(let i=0;i<n.length;i+=1)o[i]=gi(hi(l,n,i));const s=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){e=V("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=z(i,"DIV",{class:!0,slot:!0});var r=M(e);for(let a=0;a<o.length;a+=1)o[a].l(r);r.forEach(_),this.h()},h(){m(e,"class","flex flex-col gap-1 mt-1.5"),m(e,"slot","content")},m(i,r){B(i,e,r);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,r){if(r&1){n=vt(i[0]);let a;for(a=0;a<n.length;a+=1){const c=hi(i,n,a);o[a]?(o[a].p(c,r),C(o[a],1)):(o[a]=gi(c),o[a].c(),C(o[a],1),o[a].m(e,null))}for(He(),a=n.length;a<o.length;a+=1)s(a);Be()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)C(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);t=!1},d(i){i&&_(e),Dn(o,i)}}}function t0(l){let e,t,n;return t=new Q1({props:{show:l[2]}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0,slot:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","text-sm"),m(e,"slot","content")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&4&&(i.show=o[2]),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function n0(l){let e,t,n,o,s;return{c(){e=V("div"),t=V("textarea"),this.h()},l(i){e=z(i,"DIV",{class:!0,slot:!0});var r=M(e);t=z(r,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),M(t).forEach(_),r.forEach(_),this.h()},h(){m(t,"class","w-full text-xs py-1.5 bg-transparent outline-none resize-none"),m(t,"rows","4"),m(t,"placeholder",n=l[3].t("Enter system prompt")),m(e,"class",""),m(e,"slot","content")},m(i,r){B(i,e,r),y(e,t),Cn(t,l[1].system),o||(s=ke(t,"input",l[12]),o=!0)},p(i,r){r&8&&n!==(n=i[3].t("Enter system prompt"))&&m(t,"placeholder",n),r&2&&Cn(t,i[1].system)},d(i){i&&_(e),o=!1,s()}}}function l0(l){var a;let e,t,n,o,s;function i(c){l[13](c)}let r={admin:((a=l[4])==null?void 0:a.role)==="admin"};return l[1]!==void 0&&(r.params=l[1]),n=new iu({props:r}),We.push(()=>Je(n,"params",i)),{c(){e=V("div"),t=V("div"),te(n.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0,slot:!0});var u=M(e);t=z(u,"DIV",{});var f=M(t);oe(n.$$.fragment,f),f.forEach(_),u.forEach(_),this.h()},h(){m(e,"class","text-sm mt-1.5"),m(e,"slot","content")},m(c,u){B(c,e,u),y(e,t),ne(n,t,null),s=!0},p(c,u){var h;const f={};u&16&&(f.admin=((h=c[4])==null?void 0:h.role)==="admin"),!o&&u&2&&(o=!0,f.params=c[1],qe(()=>o=!1)),n.$set(f)},i(c){s||(C(n.$$.fragment,c),s=!0)},o(c){N(n.$$.fragment,c),s=!1},d(c){c&&_(e),le(n)}}}function o0(l){let e,t,n,o=l[3].t("Chat Controls")+"",s,i,r,a,c,u,f,h,d,p;a=new So({props:{className:"size-3.5"}});const b=[$1,x1],w=[];function g(v,k){var E,I;return v[4].role==="admin"||(I=(E=v[4])==null?void 0:E.permissions.chat)!=null&&I.controls?0:1}return u=g(l),f=w[u]=b[u](l),{c(){e=V("div"),t=V("div"),n=V("div"),s=Ie(o),i=$(),r=V("button"),te(a.$$.fragment),c=$(),f.c(),this.h()},l(v){e=z(v,"DIV",{class:!0});var k=M(e);t=z(k,"DIV",{class:!0});var E=M(t);n=z(E,"DIV",{class:!0});var I=M(n);s=Se(I,o),I.forEach(_),i=ee(E),r=z(E,"BUTTON",{class:!0});var T=M(r);oe(a.$$.fragment,T),T.forEach(_),E.forEach(_),c=ee(k),f.l(k),k.forEach(_),this.h()},h(){m(n,"class","text-lg font-medium self-center font-primary"),m(r,"class","self-center"),m(t,"class","flex items-center justify-between dark:text-gray-100 mb-2"),m(e,"class","dark:text-white")},m(v,k){B(v,e,k),y(e,t),y(t,n),y(n,s),y(t,i),y(t,r),ne(a,r,null),y(e,c),w[u].m(e,null),h=!0,d||(p=ke(r,"click",l[8]),d=!0)},p(v,[k]){(!h||k&8)&&o!==(o=v[3].t("Chat Controls")+"")&&Te(s,o);let E=u;u=g(v),u===E?w[u].p(v,k):(He(),N(w[E],1,1,()=>{w[E]=null}),Be(),f=w[u],f?f.p(v,k):(f=w[u]=b[u](v),f.c()),C(f,1),f.m(e,null))},i(v){h||(C(a.$$.fragment,v),C(f),h=!0)},o(v){N(a.$$.fragment,v),N(f),h=!1},d(v){v&&_(e),le(a),w[u].d(),d=!1,p()}}}function s0(l,e,t){let n,o;ce(l,xn,g=>t(4,o=g));const s=ln(),i=Wt("i18n");ce(l,i,g=>t(3,n=g));let{models:r=[]}=e,{chatFiles:a=[]}=e,{params:c={}}=e,u=!1;const f=()=>{s("close")},h=g=>{a.splice(g,1),t(0,a)},d=g=>{console.log(g)};function p(g){u=g,t(2,u)}function b(){c.system=this.value,t(1,c)}function w(g){c=g,t(1,c)}return l.$$set=g=>{"models"in g&&t(7,r=g.models),"chatFiles"in g&&t(0,a=g.chatFiles),"params"in g&&t(1,c=g.params)},[a,c,u,n,o,s,i,r,f,h,d,p,b,w]}class Oa extends Le{constructor(e){super(),Re(this,e,s0,o0,Fe,{models:7,chatFiles:0,params:1})}}function _i(l,e,t){const n=l.slice();return n[10]=e[t],n}function r0(l){let e;const t=l[4].default,n=Gt(t,l,l[8],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&256)&&qt(n,t,o,o[8],e?Qt(t,o[8],s,null):Jt(o[8]),null)},i(o){e||(C(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function i0(l){var i;let e,t,n=(((i=l[10])==null?void 0:i.label)??"Camera")+"",o,s;return{c(){e=V("div"),t=V("div"),o=Ie(n),s=$(),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);t=z(a,"DIV",{class:!0});var c=M(t);o=Se(c,n),c.forEach(_),a.forEach(_),s=ee(r),this.h()},h(){m(t,"class","line-clamp-1"),m(e,"class","flex items-center")},m(r,a){B(r,e,a),y(e,t),y(t,o),B(r,s,a)},p(r,a){var c;a&2&&n!==(n=(((c=r[10])==null?void 0:c.label)??"Camera")+"")&&Te(o,n)},d(r){r&&(_(e),_(s))}}}function pi(l){let e,t;function n(){return l[5](l[10])}return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[i0]},$$scope:{ctx:l}}}),e.$on("click",n),{c(){te(e.$$.fragment)},l(o){oe(e.$$.fragment,o)},m(o,s){ne(e,o,s),t=!0},p(o,s){l=o;const i={};s&258&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(o){t||(C(e.$$.fragment,o),t=!0)},o(o){N(e.$$.fragment,o),t=!1},d(o){le(e,o)}}}function a0(l){let e,t,n=vt(l[1]),o=[];for(let i=0;i<n.length;i+=1)o[i]=pi(_i(l,n,i));const s=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ae()},l(i){for(let r=0;r<o.length;r+=1)o[r].l(i);e=Ae()},m(i,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,r);B(i,e,r),t=!0},p(i,r){if(r&10){n=vt(i[1]);let a;for(a=0;a<n.length;a+=1){const c=_i(i,n,a);o[a]?(o[a].p(c,r),C(o[a],1)):(o[a]=pi(c),o[a].c(),C(o[a],1),o[a].m(e.parentNode,e))}for(He(),a=n.length;a<o.length;a+=1)s(a);Be()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)C(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);t=!1},d(i){i&&_(e),Dn(o,i)}}}function c0(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-[9999] bg-white dark:bg-gray-900 dark:text-white shadow-sm",sideOffset:6,side:"top",align:"start",transition:Xl,$$slots:{default:[a0]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&258&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function u0(l){let e,t,n;function o(i){l[6](i)}let s={$$slots:{content:[c0],default:[r0]},$$scope:{ctx:l}};return l[2]!==void 0&&(s.show=l[2]),e=new yo({props:s}),We.push(()=>Je(e,"show",o)),e.$on("change",l[7]),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),n=!0},p(i,[r]){const a={};r&258&&(a.$$scope={dirty:r,ctx:i}),!t&&r&4&&(t=!0,a.show=i[2],qe(()=>t=!1)),e.$set(a)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function f0(l,e,t){let{$$slots:n={},$$scope:o}=e;Wt("i18n");const s=ln();let{onClose:i=()=>{}}=e,{devices:r}=e,a=!1;const c=h=>{s("change",h.deviceId)};function u(h){a=h,t(2,a)}const f=h=>{h.detail===!1&&i()};return l.$$set=h=>{"onClose"in h&&t(0,i=h.onClose),"devices"in h&&t(1,r=h.devices),"$$scope"in h&&t(8,o=h.$$scope)},[i,r,a,s,n,c,u,f,o]}class d0 extends Le{constructor(e){super(),Re(this,e,f0,u0,Fe,{onClose:0,devices:1})}}function bi(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',g,v,k,E=l[4]&&vi(l);function I(D,Y){return D[4]?_0:p0}let T=I(l),S=T(l);const A=[y0,k0],O=[];function H(D,Y){return D[4]?0:1}r=H(l),a=O[r]=A[r](l);function F(D,Y){return D[1]?D0:D[2]?C0:S0}let K=F(l),U=K(l);return{c(){e=V("div"),E&&E.c(),t=$(),n=V("div"),S.c(),o=$(),s=V("div"),i=V("div"),a.c(),c=$(),u=V("div"),f=V("button"),h=V("div"),U.c(),d=$(),p=V("div"),b=V("button"),b.innerHTML=w,this.h()},l(D){e=z(D,"DIV",{class:!0});var Y=M(e);E&&E.l(Y),t=ee(Y),n=z(Y,"DIV",{class:!0});var P=M(n);S.l(P),P.forEach(_),o=ee(Y),s=z(Y,"DIV",{class:!0});var j=M(s);i=z(j,"DIV",{});var G=M(i);a.l(G),G.forEach(_),c=ee(j),u=z(j,"DIV",{});var X=M(u);f=z(X,"BUTTON",{type:!0});var Z=M(f);h=z(Z,"DIV",{class:!0});var J=M(h);U.l(J),J.forEach(_),Z.forEach(_),X.forEach(_),d=ee(j),p=z(j,"DIV",{});var L=M(p);b=z(L,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ut(b)!=="svelte-1k5eavb"&&(b.innerHTML=w),L.forEach(_),j.forEach(_),Y.forEach(_),this.h()},h(){m(n,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),m(h,"class","line-clamp-1 text-sm font-medium"),m(f,"type","button"),m(b,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(b,"type","button"),m(s,"class","flex justify-between items-center pb-2 w-full"),m(e,"class","max-w-lg w-full h-full max-h-[100dvh] flex flex-col justify-between p-3 md:p-6")},m(D,Y){B(D,e,Y),E&&E.m(e,null),y(e,t),y(e,n),S.m(n,null),y(e,o),y(e,s),y(s,i),O[r].m(i,null),y(s,c),y(s,u),y(u,f),y(f,h),U.m(h,null),y(s,d),y(s,p),y(p,b),g=!0,v||(k=[ke(f,"click",l[31]),ke(b,"click",l[32])],v=!0)},p(D,Y){D[4]?E?E.p(D,Y):(E=vi(D),E.c(),E.m(e,t)):E&&(E.d(1),E=null),T===(T=I(D))&&S?S.p(D,Y):(S.d(1),S=T(D),S&&(S.c(),S.m(n,null)));let P=r;r=H(D),r===P?O[r].p(D,Y):(He(),N(O[P],1,1,()=>{O[P]=null}),Be(),a=O[r],a?a.p(D,Y):(a=O[r]=A[r](D),a.c()),C(a,1),a.m(i,null)),K===(K=F(D))&&U?U.p(D,Y):(U.d(1),U=K(D),U&&(U.c(),U.m(h,null)))},i(D){g||(C(a),g=!0)},o(D){N(a),g=!1},d(D){D&&_(e),E&&E.d(),S.d(),O[r].d(),U.d(),v=!1,en(k)}}}function vi(l){let e,t,n;function o(r,a){return r[3]?g0:r[1]||r[2]?m0:h0}let s=o(l),i=s(l);return{c(){e=V("button"),i.c(),this.h()},l(r){e=z(r,"BUTTON",{type:!0,class:!0});var a=M(e);i.l(a),a.forEach(_),this.h()},h(){m(e,"type","button"),m(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(r,a){B(r,e,a),i.m(e,null),t||(n=ke(e,"click",l[26]),t=!0)},p(r,a){s===(s=o(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&_(e),i.d(),t=!1,n()}}}function h0(l){let e,t,n;return{c(){e=V("div"),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0}),M(e).forEach(_),this.h()},h(){var o,s,i,r,a,c,u,f,h;m(e,"class",t=(l[6]*100>4?" size-[4.5rem]":l[6]*100>2?" size-16":l[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((i=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),m(e,"style",n=(((c=(a=(r=l[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(h=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url}');`:"")},m(o,s){B(o,e,s)},p(o,s){var i,r,a,c,u,f,h,d,p;s[0]&65&&t!==(t=(o[6]*100>4?" size-[4.5rem]":o[6]*100>2?" size-16":o[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((a=(r=(i=o[0])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(p=(d=(h=o[0])==null?void 0:h.info)==null?void 0:d.meta)==null?void 0:p.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&_(e)}}}function m0(l){let e,t,n,o,s,i;return{c(){e=Ve("svg"),t=Ve("style"),n=Ie(`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),o=Ve("circle"),s=Ve("circle"),i=Ve("circle"),this.h()},l(r){e=ze(r,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=M(e);t=ze(a,"style",{});var c=M(t);n=Se(c,`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),c.forEach(_),o=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(o).forEach(_),s=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(s).forEach(_),i=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(i).forEach(_),a.forEach(_),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(i,"class","spinner_qM83 spinner_ZTLf"),m(i,"cx","20"),m(i,"cy","12"),m(i,"r","3"),m(e,"class","size-12 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){B(r,e,a),y(e,t),y(t,n),y(e,o),y(e,s),y(e,i)},p:ye,d(r){r&&_(e)}}}function g0(l){let e,t;return{c(){e=V("div"),t=Ie(l[3]),this.h()},l(n){e=z(n,"DIV",{class:!0,style:!0});var o=M(e);t=Se(o,l[3]),o.forEach(_),this.h()},h(){m(e,"class","transition-all rounded-full"),$e(e,"font-size",(l[6]*100>4?"4.5":l[6]*100>2?"4.25":l[6]*100>1?"3.75":"3.5")+"rem"),$e(e,"width","100%"),$e(e,"text-align","center")},m(n,o){B(n,e,o),y(e,t)},p(n,o){o[0]&8&&Te(t,n[3]),o[0]&64&&$e(e,"font-size",(n[6]*100>4?"4.5":n[6]*100>2?"4.25":n[6]*100>1?"3.75":"3.5")+"rem")},d(n){n&&_(e)}}}function _0(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',c,u;return{c(){e=V("div"),t=V("video"),n=$(),o=V("canvas"),s=$(),i=V("div"),r=V("button"),r.innerHTML=a,this.h()},l(f){e=z(f,"DIV",{class:!0});var h=M(e);t=z(h,"VIDEO",{id:!0,class:!0}),M(t).forEach(_),n=ee(h),o=z(h,"CANVAS",{id:!0,style:!0}),M(o).forEach(_),s=ee(h),i=z(h,"DIV",{class:!0});var d=M(i);r=z(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ut(r)!=="svelte-16ul42n"&&(r.innerHTML=a),d.forEach(_),h.forEach(_),this.h()},h(){m(t,"id","camera-feed"),t.autoplay=!0,m(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,m(o,"id","camera-canvas"),$e(o,"display","none"),m(r,"type","button"),m(r,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),m(i,"class","absolute top-4 md:top-8 left-4"),m(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(f,h){B(f,e,h),y(e,t),y(e,n),y(e,o),y(e,s),y(e,i),y(i,r),c||(u=ke(r,"click",l[28]),c=!0)},p:ye,d(f){f&&_(e),c=!1,u()}}}function p0(l){let e,t,n;function o(r,a){return r[3]?w0:r[1]||r[2]?v0:b0}let s=o(l),i=s(l);return{c(){e=V("button"),i.c(),this.h()},l(r){e=z(r,"BUTTON",{type:!0});var a=M(e);i.l(a),a.forEach(_),this.h()},h(){m(e,"type","button")},m(r,a){B(r,e,a),i.m(e,null),t||(n=ke(e,"click",l[27]),t=!0)},p(r,a){s===(s=o(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&_(e),i.d(),t=!1,n()}}}function b0(l){let e,t,n;return{c(){e=V("div"),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0}),M(e).forEach(_),this.h()},h(){var o,s,i,r,a,c,u,f,h;m(e,"class",t=(l[6]*100>4?" size-52":l[6]*100>2?"size-48":l[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((i=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),m(e,"style",n=(((c=(a=(r=l[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(h=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url}');`:"")},m(o,s){B(o,e,s)},p(o,s){var i,r,a,c,u,f,h,d,p;s[0]&65&&t!==(t=(o[6]*100>4?" size-52":o[6]*100>2?"size-48":o[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((a=(r=(i=o[0])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(p=(d=(h=o[0])==null?void 0:h.info)==null?void 0:d.meta)==null?void 0:p.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&_(e)}}}function v0(l){let e,t,n,o,s,i;return{c(){e=Ve("svg"),t=Ve("style"),n=Ie(`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),o=Ve("circle"),s=Ve("circle"),i=Ve("circle"),this.h()},l(r){e=ze(r,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=M(e);t=ze(a,"style",{});var c=M(t);n=Se(c,`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),c.forEach(_),o=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(o).forEach(_),s=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(s).forEach(_),i=ze(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(i).forEach(_),a.forEach(_),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(i,"class","spinner_qM83 spinner_ZTLf"),m(i,"cx","20"),m(i,"cy","12"),m(i,"r","3"),m(e,"class","size-44 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){B(r,e,a),y(e,t),y(t,n),y(e,o),y(e,s),y(e,i)},p:ye,d(r){r&&_(e)}}}function w0(l){let e,t;return{c(){e=V("div"),t=Ie(l[3]),this.h()},l(n){e=z(n,"DIV",{class:!0,style:!0});var o=M(e);t=Se(o,l[3]),o.forEach(_),this.h()},h(){m(e,"class","transition-all rounded-full"),$e(e,"font-size",(l[6]*100>4?"13":l[6]*100>2?"12":l[6]*100>1?"11.5":"11")+"rem"),$e(e,"width","100%"),$e(e,"text-align","center")},m(n,o){B(n,e,o),y(e,t)},p(n,o){o[0]&8&&Te(t,n[3]),o[0]&64&&$e(e,"font-size",(n[6]*100>4?"13":n[6]*100>2?"12":n[6]*100>1?"11.5":"11")+"rem")},d(n){n&&_(e)}}}function k0(l){let e,t;return e=new Ot({props:{content:l[11].t("Camera"),$$slots:{default:[E0]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&2048&&(s.content=n[11].t("Camera")),o[2]&8&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function y0(l){let e,t;return e=new d0({props:{devices:l[8],$$slots:{default:[I0]},$$scope:{ctx:l}}}),e.$on("change",l[29]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&256&&(s.devices=n[8]),o[2]&8&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function E0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',n,o;return{c(){e=V("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ut(e)!=="svelte-1n1gs9g"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(s,i){B(s,e,i),n||(o=ke(e,"click",l[30]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function I0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ut(e)!=="svelte-5e0pue"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(n,o){B(n,e,o)},p:ye,d(n){n&&_(e)}}}function S0(l){let e=l[11].t("Listening...")+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Listening...")+"")&&Te(t,e)},d(n){n&&_(t)}}}function C0(l){let e=l[11].t("Tap to interrupt")+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Tap to interrupt")+"")&&Te(t,e)},d(n){n&&_(t)}}}function D0(l){let e=l[11].t("Thinking...")+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Thinking...")+"")&&Te(t,e)},d(n){n&&_(t)}}}function M0(l){let e,t,n=l[10]&&bi(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[10]?n?(n.p(o,s),s[0]&1024&&C(n,1)):(n=bi(o),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function T0(l,e,t){let n,o,s,i,r;ce(l,dl,de=>t(45,n=de)),ce(l,Yl,de=>t(46,o=de)),ce(l,Zn,de=>t(47,s=de)),ce(l,kn,de=>t(10,i=de));const a=ln(),c=Wt("i18n");ce(l,c,de=>t(11,r=de));let{eventTarget:u}=e,{submitPrompt:f}=e,{stopResponse:h}=e,{files:d}=e,{chatId:p}=e,{modelId:b}=e,w=null,g=null,v=!1,k=!1,E=!1,I=null,T=!1,S=null,A=!1,O=0,H=!1,F,K=null,U=[],D=[],Y=null;const P=async()=>{const de=await navigator.mediaDevices.enumerateDevices();t(8,D=de.filter(Me=>Me.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(8,D=[...D,{deviceId:"screen",label:"Screen Share"}]),console.log(D),Y===null&&D.length>0&&t(9,Y=D[0].deviceId)},j=async()=>{if(await P(),S===null){t(4,T=!0),await xe();try{await G()}catch(de){console.error("Error accessing webcam: ",de)}}},G=async()=>{const de=document.getElementById("camera-feed");de&&(Y==="screen"?t(5,S=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1})):t(5,S=await navigator.mediaDevices.getUserMedia({video:{deviceId:Y?{exact:Y}:void 0}})),S&&(await P(),de.srcObject=S,await de.play()))},X=async()=>{S&&S.getTracks().forEach(Me=>Me.stop()),t(5,S=null)},Z=()=>{const de=document.getElementById("camera-feed"),Me=document.getElementById("camera-canvas");if(!Me)return;const we=Me.getContext("2d");Me.width=de.videoWidth,Me.height=de.videoHeight,we.drawImage(de,0,0,de.videoWidth,de.videoHeight);const Xe=Me.toDataURL("image/png");return console.log(Xe),Xe},J=async()=>{await X(),t(4,T=!1)},L=-55,re=async de=>{await xe();const Me=Xi(de,"recording.wav"),we=await Ki(localStorage.token,Me).catch(Xe=>(et.error(`${Xe}`),null));if(we&&(console.log(we.text),we.text!=="")){const Xe=await f(we.text,{_raw:!0});console.log(Xe)}},q=async(de=!0)=>{if(i){console.log("%c%s","color: red; font-size: 20px;","🚨 stopRecordingCallback 🚨");const Me=U.slice(0);if(U=[],F=!1,de&&ae(),k){if(t(1,v=!0),t(3,I=null),S){const Xe=Z();t(20,d=[{type:"image",url:Xe}])}const we=new Blob(Me,{type:"audio/wav"});await re(we),k=!1,t(1,v=!1)}}else U=[],F=!1,K&&K.getTracks().forEach(we=>we.stop()),t(7,K=null)},ae=async()=>{i&&(K||t(7,K=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})),F=new MediaRecorder(K),F.onstart=()=>{console.log("Recording started"),U=[],Oe(K)},F.ondataavailable=de=>{H&&U.push(de.data)},F.onstop=de=>{console.log("Recording stopped",K,de),q()},F.start())},ge=async()=>{try{F&&F.stop()}catch(de){console.log("Error stopping audio stream:",de)}K&&(K.getAudioTracks().forEach(function(de){de.stop()}),t(7,K=null))},se=de=>{let Me=0;for(let we=0;we<de.length;we++){const Xe=(de[we]-128)/128;Me+=Xe*Xe}return Math.sqrt(Me/de.length)},Oe=de=>{const Me=new AudioContext,we=Me.createMediaStreamSource(de),Xe=Me.createAnalyser();Xe.minDecibels=L,we.connect(Xe);const ht=Xe.frequencyBinCount,yt=new Uint8Array(ht),It=new Uint8Array(Xe.fftSize);let zt=Date.now();H=!1,console.log("🔊 Sound detection started",zt,H),(()=>{const Nt=()=>{if(!F||!i)return;if(E&&!((s==null?void 0:s.voiceInterruption)??!1)?(Xe.maxDecibels=0,Xe.minDecibels=-1):(Xe.minDecibels=L,Xe.maxDecibels=-30),Xe.getByteTimeDomainData(It),Xe.getByteFrequencyData(yt),t(6,O=se(It)),yt.some(At=>At>0)&&(console.log("%c%s","color: red; font-size: 20px;","🔊 Sound detected"),H||(H=!0,ue()),zt=Date.now()),H&&Date.now()-zt>2e3&&(k=!0,F)){console.log("%c%s","color: red; font-size: 20px;","🔇 Silence detected"),F.stop();return}window.requestAnimationFrame(Nt)};window.requestAnimationFrame(Nt)})()};let Q={},fe=null,Ce=null;const Ge=de=>i?new Promise(Me=>{let we=[];const Xe=setInterval(async()=>{var ht,yt,It;if(we=await speechSynthesis.getVoices(),we.length>0){clearInterval(Xe);const zt=((ht=we==null?void 0:we.filter(Bt=>{var Nt,Xt,At,on;return Bt.voiceURI===(((Xt=(Nt=s==null?void 0:s.audio)==null?void 0:Nt.tts)==null?void 0:Xt.voice)??((on=(At=o==null?void 0:o.audio)==null?void 0:At.tts)==null?void 0:on.voice))}))==null?void 0:ht.at(0))??void 0;Ce=new SpeechSynthesisUtterance(de),Ce.rate=((It=(yt=s.audio)==null?void 0:yt.tts)==null?void 0:It.playbackRate)??1,zt&&(Ce.voice=zt),speechSynthesis.speak(Ce),Ce.onend=async Bt=>{await new Promise(Nt=>setTimeout(Nt,200)),Me(Bt)}}},100)}):Promise.resolve(),Ke=de=>i?new Promise(Me=>{var Xe,ht;const we=document.getElementById("audioElement");we&&(we.src=de.src,we.muted=!0,we.playbackRate=((ht=(Xe=s.audio)==null?void 0:Xe.tts)==null?void 0:ht.playbackRate)??1,we.play().then(()=>{we.muted=!1}).catch(yt=>{console.error(yt)}),we.onended=async yt=>{await new Promise(It=>setTimeout(It,100)),Me(yt)})}):Promise.resolve(),ue=async()=>{t(2,E=!1),A&&h(),Ce&&(speechSynthesis.cancel(),Ce=null);const de=document.getElementById("audioElement");de&&(de.muted=!0,de.pause(),de.currentTime=0)};let it=new AbortController;const at=new Map,Yt=new Map,St=async de=>{var Me,we,Xe,ht,yt,It,zt,Bt;if(!at.has(de))try{if((s==null?void 0:s.showEmojiInCall)??!1){const Nt=await Mc(localStorage.token,b,de,p);Nt&&Yt.set(de,Nt)}if(o.audio.tts.engine!==""){const Nt=await Bc(localStorage.token,((we=(Me=s==null?void 0:s.audio)==null?void 0:Me.tts)==null?void 0:we.defaultVoice)===o.audio.tts.voice?((ht=(Xe=s==null?void 0:s.audio)==null?void 0:Xe.tts)==null?void 0:ht.voice)??((It=(yt=o==null?void 0:o.audio)==null?void 0:yt.tts)==null?void 0:It.voice):(Bt=(zt=o==null?void 0:o.audio)==null?void 0:zt.tts)==null?void 0:Bt.voice,de).catch(Xt=>(console.error(Xt),null));if(Nt){const Xt=await Nt.blob(),At=URL.createObjectURL(Xt);at.set(de,new Audio(At))}}else at.set(de,!0)}catch(Nt){console.error("Error synthesizing speech:",Nt)}return at.get(de)};let _t={};const Rt=async(de,Me)=>{for(;!Me.aborted;)if(_t[de]&&_t[de].length>0){const we=_t[de].shift();if(at.has(we))if(((s==null?void 0:s.showEmojiInCall)??!1)&&Yt.has(we)?t(3,I=Yt.get(we)):t(3,I=null),o.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${we}`);const Xe=at.get(we);await Ke(Xe),console.log(`Played audio for content: ${we}`),await new Promise(ht=>setTimeout(ht,200))}catch(Xe){console.error("Error playing audio:",Xe)}else await Ge(we);else _t[de].unshift(we),console.log(`Audio for "${we}" not yet available in the cache, re-queued...`),await new Promise(Xe=>setTimeout(Xe,200))}else if(Q[de]&&_t[de]&&_t[de].length===0){t(2,E=!1);break}else await new Promise(we=>setTimeout(we,200));console.log(`Audio monitoring and playing stopped for message ID ${de}`)},Tt=async de=>{const{id:Me}=de.detail;A=!0,fe!==Me&&(console.log(`Received chat start event for message ID ${Me}`),fe=Me,it&&it.abort(),it=new AbortController,t(2,E=!0),Rt(Me,it.signal))},pe=async de=>{const{id:Me,content:we}=de.detail;if(fe===Me){console.log(`Received chat event for message ID ${Me}: ${we}`);try{_t[Me]===void 0?_t[Me]=[we]:_t[Me].push(we),console.log(we),St(we)}catch(Xe){console.error("Failed to fetch or play audio:",Xe)}}},je=async de=>{const{id:Me,content:we}=de.detail;Q[Me]=!0,A=!1};pn(async()=>{const de=async()=>{try{w=await navigator.wakeLock.request("screen")}catch(Me){console.log(Me)}w&&w.addEventListener("release",()=>{console.log("Wake Lock released")})};return"wakeLock"in navigator&&(await de(),document.addEventListener("visibilitychange",async()=>{w!==null&&document.visibilityState==="visible"&&await de()})),t(0,g=n.find(Me=>Me.id===b)),ae(),u.addEventListener("chat:start",Tt),u.addEventListener("chat",pe),u.addEventListener("chat:finish",je),async()=>{await ue(),ge(),u.removeEventListener("chat:start",Tt),u.removeEventListener("chat",pe),u.removeEventListener("chat:finish",je),it.abort(),await xe(),await ue(),await q(!1),await J()}}),ll(async()=>{await ue(),await q(!1),await J(),await ge(),u.removeEventListener("chat:start",Tt),u.removeEventListener("chat",pe),u.removeEventListener("chat:finish",je),it.abort(),await xe(),await ue()});const rt=()=>{E&&ue()},he=()=>{E&&ue()},wt=()=>{J()},dt=async de=>{console.log(de.detail),t(9,Y=de.detail),await X(),await G()},pt=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),j()},De=()=>{E&&ue()},Vt=async()=>{await ge(),await X(),console.log(K),console.log(S),kn.set(!1),a("close")};return l.$$set=de=>{"eventTarget"in de&&t(21,u=de.eventTarget),"submitPrompt"in de&&t(22,f=de.submitPrompt),"stopResponse"in de&&t(23,h=de.stopResponse),"files"in de&&t(20,d=de.files),"chatId"in de&&t(24,p=de.chatId),"modelId"in de&&t(25,b=de.modelId)},[g,v,E,I,T,S,O,K,D,Y,i,r,a,c,j,G,X,J,ge,ue,d,u,f,h,p,b,rt,he,wt,dt,pt,De,Vt]}class Ha extends Le{constructor(e){super(),Re(this,e,T0,M0,Fe,{eventTarget:21,submitPrompt:22,stopResponse:23,files:20,chatId:24,modelId:25},null,[-1,-1,-1])}}function V0(l){var E,I,T,S,A,O,H,F,K,U;let e,t,n,o,s,i,r=(((I=(E=l[0])==null?void 0:E.model)==null?void 0:I.name)??((S=(T=l[0])==null?void 0:T.message)==null?void 0:S.model)??"Assistant")+"",a,c,u,f,h,d,p,b,w;t=new Ji({props:{src:((F=(H=(O=(A=l[0])==null?void 0:A.model)==null?void 0:O.info)==null?void 0:H.meta)==null?void 0:F.profile_image_url)??"",className:"size-5 -translate-y-[1px]"}}),f=new hu({props:{className:"size-3 "+((U=(K=l[0])==null?void 0:K.message)!=null&&U.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" ",strokeWidth:"2.5"}});function g(D,Y){var P,j;return(j=(P=D[0])==null?void 0:P.message)!=null&&j.error?P0:N0}let v=g(l),k=v(l);return{c(){e=V("div"),te(t.$$.fragment),n=$(),o=V("div"),s=V("div"),i=V("div"),a=Ie(r),c=$(),u=V("button"),te(f.$$.fragment),d=$(),k.c(),this.h()},l(D){e=z(D,"DIV",{class:!0});var Y=M(e);oe(t.$$.fragment,Y),n=ee(Y),o=z(Y,"DIV",{class:!0});var P=M(o);s=z(P,"DIV",{class:!0});var j=M(s);i=z(j,"DIV",{class:!0});var G=M(i);a=Se(G,r),G.forEach(_),c=ee(j),u=z(j,"BUTTON",{class:!0});var X=M(u);oe(f.$$.fragment,X),X.forEach(_),j.forEach(_),d=ee(P),k.l(P),P.forEach(_),Y.forEach(_),this.h()},h(){var D,Y;m(i,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(u,"class",h=(Y=(D=l[0])==null?void 0:D.message)!=null&&Y.favorite?"":"invisible group-hover:visible"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(D,Y){B(D,e,Y),ne(t,e,null),y(e,n),y(e,o),y(o,s),y(s,i),y(i,a),y(s,c),y(s,u),ne(f,u,null),y(o,d),k.m(o,null),p=!0,b||(w=ke(u,"click",l[1]),b=!0)},p(D,Y){var G,X,Z,J,L,re,q,ae,ge,se,Oe,Q;const P={};Y&1&&(P.src=((J=(Z=(X=(G=D[0])==null?void 0:G.model)==null?void 0:X.info)==null?void 0:Z.meta)==null?void 0:J.profile_image_url)??""),t.$set(P),(!p||Y&1)&&r!==(r=(((re=(L=D[0])==null?void 0:L.model)==null?void 0:re.name)??((ae=(q=D[0])==null?void 0:q.message)==null?void 0:ae.model)??"Assistant")+"")&&Te(a,r);const j={};Y&1&&(j.className="size-3 "+((se=(ge=D[0])==null?void 0:ge.message)!=null&&se.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" "),f.$set(j),(!p||Y&1&&h!==(h=(Q=(Oe=D[0])==null?void 0:Oe.message)!=null&&Q.favorite?"":"invisible group-hover:visible"))&&m(u,"class",h),v===(v=g(D))&&k?k.p(D,Y):(k.d(1),k=v(D),k&&(k.c(),k.m(o,null)))},i(D){p||(C(t.$$.fragment,D),C(f.$$.fragment,D),p=!0)},o(D){N(t.$$.fragment,D),N(f.$$.fragment,D),p=!1},d(D){D&&_(e),le(t),le(f),k.d(),b=!1,w()}}}function z0(l){var p,b,w;let e,t,n,o,s,i,r=(((b=(p=l[0])==null?void 0:p.user)==null?void 0:b.name)??"User")+"",a,c,u;t=new Ji({props:{src:((w=l[0].user)==null?void 0:w.profile_image_url)??"/user.png",className:"size-5 -translate-y-[1px]"}});function f(g,v){var k,E;return(E=(k=g[0])==null?void 0:k.message)!=null&&E.error?H0:O0}let h=f(l),d=h(l);return{c(){e=V("div"),te(t.$$.fragment),n=$(),o=V("div"),s=V("div"),i=V("div"),a=Ie(r),c=$(),d.c(),this.h()},l(g){e=z(g,"DIV",{class:!0});var v=M(e);oe(t.$$.fragment,v),n=ee(v),o=z(v,"DIV",{class:!0});var k=M(o);s=z(k,"DIV",{class:!0});var E=M(s);i=z(E,"DIV",{class:!0});var I=M(i);a=Se(I,r),I.forEach(_),E.forEach(_),c=ee(k),d.l(k),k.forEach(_),v.forEach(_),this.h()},h(){m(i,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(g,v){B(g,e,v),ne(t,e,null),y(e,n),y(e,o),y(o,s),y(s,i),y(i,a),y(o,c),d.m(o,null),u=!0},p(g,v){var E,I,T;const k={};v&1&&(k.src=((E=g[0].user)==null?void 0:E.profile_image_url)??"/user.png"),t.$set(k),(!u||v&1)&&r!==(r=(((T=(I=g[0])==null?void 0:I.user)==null?void 0:T.name)??"User")+"")&&Te(a,r),h===(h=f(g))&&d?d.p(g,v):(d.d(1),d=h(g),d&&(d.c(),d.m(o,null)))},i(g){u||(C(t.$$.fragment,g),u=!0)},o(g){N(t.$$.fragment,g),u=!1},d(g){g&&_(e),le(t),d.d()}}}function N0(l){let e,t=l[0].message.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Te(n,t)},d(o){o&&_(e)}}}function P0(l){let e,t=l[0].message.error.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Te(n,t)},d(o){o&&_(e)}}}function O0(l){let e,t=l[0].message.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Te(n,t)},d(o){o&&_(e)}}}function H0(l){let e,t=l[0].message.error.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Te(n,t)},d(o){o&&_(e)}}}function B0(l){let e,t,n,o;const s=[z0,V0],i=[];function r(a,c){return a[0].message.role==="user"?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function A0(l){var a,c;let e,t,n,o,s,i,r;return t=new Ot({props:{content:(c=(a=l[0])==null?void 0:a.message)!=null&&c.error?l[0].message.error.content:l[0].message.content,class:"w-full",allowHTML:!1,$$slots:{default:[B0]},$$scope:{ctx:l}}}),o=new Tl({props:{type:"target",position:ot.Top,class:"w-2 rounded-full dark:bg-gray-900"}}),i=new Tl({props:{type:"source",position:ot.Bottom,class:"w-2 rounded-full dark:bg-gray-900"}}),{c(){e=V("div"),te(t.$$.fragment),n=$(),te(o.$$.fragment),s=$(),te(i.$$.fragment),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=M(e);oe(t.$$.fragment,f),n=ee(f),oe(o.$$.fragment,f),s=ee(f),oe(i.$$.fragment,f),f.forEach(_),this.h()},h(){m(e,"class","px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group")},m(u,f){B(u,e,f),ne(t,e,null),y(e,n),ne(o,e,null),y(e,s),ne(i,e,null),r=!0},p(u,[f]){var d,p;const h={};f&1&&(h.content=(p=(d=u[0])==null?void 0:d.message)!=null&&p.error?u[0].message.error.content:u[0].message.content),f&5&&(h.$$scope={dirty:f,ctx:u}),t.$set(h)},i(u){r||(C(t.$$.fragment,u),C(o.$$.fragment,u),C(i.$$.fragment,u),r=!0)},o(u){N(t.$$.fragment,u),N(o.$$.fragment,u),N(i.$$.fragment,u),r=!1},d(u){u&&_(e),le(t),le(o),le(i)}}}function L0(l,e,t){let{data:n}=e;const o=()=>{var s;t(0,n.message.favorite=!(((s=n==null?void 0:n.message)==null?void 0:s.favorite)??!1),n)};return l.$$set=s=>{"data"in s&&t(0,n=s.data)},[n,o]}class R0 extends Le{constructor(e){super(),Re(this,e,L0,A0,Fe,{data:0})}}function U0(l){let e,t,n,o;return e=new M1({props:{showLock:!1}}),n=new U1({props:{variant:Jn.Dots}}),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=ee(s),oe(n.$$.fragment,s)},m(s,i){ne(e,s,i),B(s,t,i),ne(n,s,i),o=!0},p:ye,i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),le(e,s),le(n,s)}}}function W0(l){let e,t;return e=new e1({props:{nodes:l[0],nodeTypes:l[1],edges:l[2],fitView:!0,minZoom:.001,colorMode:l[3].includes("dark")||l[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",nodesConnectable:!1,nodesDraggable:!1,oninit:l[5],$$slots:{default:[U0]},$$scope:{ctx:l}}}),e.$on("nodeclick",l[6]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.nodes=n[0]),o&2&&(s.nodeTypes=n[1]),o&4&&(s.edges=n[2]),o&8&&(s.colorMode=n[3].includes("dark")||n[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function F0(l,e,t){let n;ce(l,Qa,u=>t(3,n=u));const o=ln();let{nodes:s}=e,{nodeTypes:i}=e,{edges:r}=e;const a=()=>{console.log("Flow initialized")},c=u=>o("nodeclick",u.detail);return l.$$set=u=>{"nodes"in u&&t(0,s=u.nodes),"nodeTypes"in u&&t(1,i=u.nodeTypes),"edges"in u&&t(2,r=u.edges)},[s,i,r,n,o,a,c]}class j0 extends Le{constructor(e){super(),Re(this,e,F0,W0,Fe,{nodes:0,nodeTypes:1,edges:2})}}function Y0(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function X0(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Ba extends Le{constructor(e){super(),Re(this,e,X0,Y0,Fe,{className:0,strokeWidth:1})}}function wi(l){let e,t;return e=new j0({props:{nodes:l[6],nodeTypes:l[8],edges:l[7]}}),e.$on("nodeclick",l[12]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p:ye,i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function K0(l){let e,t,n,o,s,i,r,a=l[1].t("Chat Overview")+"",c,u,f,h,d,p,b,w;s=new Ba({props:{className:"size-3.5"}}),h=new So({props:{className:"size-3.5"}});let g=l[2].length>0&&wi(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("button"),te(s.$$.fragment),i=$(),r=V("div"),c=Ie(a),u=$(),f=V("button"),te(h.$$.fragment),d=$(),g&&g.c(),this.h()},l(v){e=z(v,"DIV",{class:!0});var k=M(e);t=z(k,"DIV",{class:!0});var E=M(t);n=z(E,"DIV",{class:!0});var I=M(n);o=z(I,"BUTTON",{class:!0});var T=M(o);oe(s.$$.fragment,T),T.forEach(_),i=ee(I),r=z(I,"DIV",{class:!0});var S=M(r);c=Se(S,a),S.forEach(_),I.forEach(_),u=ee(E),f=z(E,"BUTTON",{class:!0});var A=M(f);oe(h.$$.fragment,A),A.forEach(_),E.forEach(_),d=ee(k),g&&g.l(k),k.forEach(_),this.h()},h(){m(o,"class","self-center p-0.5"),m(r,"class","text-lg font-medium self-center font-primary"),m(n,"class","flex items-center gap-2.5"),m(f,"class","self-center p-0.5"),m(t,"class","absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3.5"),m(e,"class","w-full h-full relative")},m(v,k){B(v,e,k),y(e,t),y(t,n),y(n,o),ne(s,o,null),y(n,i),y(n,r),y(r,c),y(t,u),y(t,f),ne(h,f,null),y(e,d),g&&g.m(e,null),p=!0,b||(w=[ke(o,"click",l[10]),ke(f,"click",l[11])],b=!0)},p(v,[k]){(!p||k&2)&&a!==(a=v[1].t("Chat Overview")+"")&&Te(c,a),v[2].length>0?g?(g.p(v,k),k&4&&C(g,1)):(g=wi(v),g.c(),C(g,1),g.m(e,null)):g&&(He(),N(g,1,1,()=>{g=null}),Be())},i(v){p||(C(s.$$.fragment,v),C(h.$$.fragment,v),C(g),p=!0)},o(v){N(s.$$.fragment,v),N(h.$$.fragment,v),N(g),p=!1},d(v){v&&_(e),le(s),le(h),g&&g.d(),b=!1,en(w)}}}function Z0(l,e,t){let n,o,s,i;ce(l,dl,O=>t(13,n=O)),ce(l,xn,O=>t(14,o=O));const r=ln(),a=Wt("i18n");ce(l,a,O=>t(1,s=O));const{width:c,height:u}=jt(),{fitView:f,getViewport:h}=W1(),d=F1();let{history:p}=e,b=null;const w=Qe([]);ce(l,w,O=>t(2,i=O));const g=Qe([]),v={custom:R0},k=async()=>{b===null?await f({nodes:[{id:p.currentId}]}):await f({nodes:[{id:b}]}),t(0,b=null)},E=async()=>{const O=[],H=[];let U=new Map,D={};Object.keys(p.messages).forEach(Y=>{var G;const P=p.messages[Y],j=P.parentId?(((G=U.get(P.parentId))==null?void 0:G.level)??-1)+1:0;D[j]||(D[j]=0),U.set(Y,{id:P.id,level:j,position:D[j]++})}),Object.keys(p.messages).forEach(Y=>{const P=U.get(Y),j=P.position*250,G=P.level*150,X=j;O.push({id:P.id,type:"custom",data:{user:o,message:p.messages[Y],model:n.find(J=>J.id===p.messages[Y].model)},position:{x:X,y:G}});const Z=p.messages[Y].parentId;Z&&H.push({id:Z+"-"+P.id,source:Z,target:P.id,selectable:!1,class:" dark:fill-gray-300 fill-gray-300",type:"smoothstep",animated:p.currentId===Y||I(Y,p.currentId)})}),await g.set([...H]),await w.set([...O])},I=(O,H)=>{const F=p.messages[O];return F.childrenIds&&F.childrenIds.some(K=>K===H||I(K,H))};pn(()=>{E(),d.subscribe(async O=>{O&&(await xe(),await f({nodes:[{id:p.currentId}]}))}),c.subscribe(O=>{O&&f({nodes:[{id:p.currentId}]})}),u.subscribe(O=>{O&&f({nodes:[{id:p.currentId}]})})}),ll(()=>{console.log("Overview destroyed"),w.set([]),g.set([])});const T=()=>{Gn.set(!1)},S=()=>{r("close"),Gn.set(!1)},A=O=>{console.log(O.detail.node.data),r("nodeclick",O.detail),t(0,b=O.detail.node.data.message.id),f({nodes:[{id:b}]})};return l.$$set=O=>{"history"in O&&t(9,p=O.history)},l.$$.update=()=>{l.$$.dirty&512&&p&&E(),l.$$.dirty&512&&p&&p.currentId&&k()},[b,s,i,r,a,f,w,g,v,p,T,S,A]}class Aa extends Le{constructor(e){super(),Re(this,e,Z0,K0,Fe,{history:9})}}function G0(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function q0(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class J0 extends Le{constructor(e){super(),Re(this,e,q0,G0,Fe,{className:0,strokeWidth:1})}}function ki(l){let e;return{c(){e=V("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),M(e).forEach(_),this.h()},h(){m(e,"class","absolute top-0 left-0 right-0 bottom-0 z-10")},m(t,n){B(t,e,n)},d(t){t&&_(e)}}}function Q0(l){let e,t=l[5].t("No HTML, CSS, or JavaScript content found.")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","m-auto font-medium text-xs text-gray-900 dark:text-white")},m(o,s){B(o,e,s),y(e,n)},p(o,s){s&32&&t!==(t=o[5].t("No HTML, CSS, or JavaScript content found.")+"")&&Te(n,t)},i:ye,o:ye,d(o){o&&_(e)}}}function x0(l){let e,t,n,o;const s=[e_,$0],i=[];function r(a,c){return a[1][a[2]].type==="iframe"?0:a[1][a[2]].type==="svg"?1:-1}return~(t=r(l))&&(n=i[t]=s[t](l)),{c(){e=V("div"),n&&n.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=M(e);n&&n.l(c),c.forEach(_),this.h()},h(){m(e,"class","max-w-full w-full h-full")},m(a,c){B(a,e,c),~t&&i[t].m(e,null),o=!0},p(a,c){let u=t;t=r(a),t===u?~t&&i[t].p(a,c):(n&&(He(),N(i[u],1,1,()=>{i[u]=null}),Be()),~t?(n=i[t],n?n.p(a,c):(n=i[t]=s[t](a),n.c()),C(n,1),n.m(e,null)):n=null)},i(a){o||(C(n),o=!0)},o(a){N(n),o=!1},d(a){a&&_(e),~t&&i[t].d()}}}function $0(l){let e,t;return e=new Jc({props:{className:" w-full h-full max-h-full overflow-hidden",svg:l[1][l[2]].content}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&6&&(s.svg=n[1][n[2]].content),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function e_(l){let e,t,n,o;return{c(){e=V("iframe"),this.h()},l(s){e=z(s,"IFRAME",{title:!0,srcdoc:!0,class:!0,sandbox:!0}),M(e).forEach(_),this.h()},h(){m(e,"title","Content"),m(e,"srcdoc",t=l[1][l[2]].content),m(e,"class","w-full border-0 h-full rounded-none"),m(e,"sandbox","allow-scripts allow-forms allow-same-origin")},m(s,i){B(s,e,i),l[14](e),n||(o=ke(e,"load",l[9]),n=!0)},p(s,i){i&6&&t!==(t=s[1][s[2]].content)&&m(e,"srcdoc",t)},i:ye,o:ye,d(s){s&&_(e),l[14](null),n=!1,o()}}}function yi(l){let e,t,n,o,s,i,r,a,c,u=l[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:l[2]+1,totalVersions:l[1].length})+"",f,h,d,p,b,w,g,v,k,E=(l[3]?l[5].t("Copied"):l[5].t("Copy"))+"",I,T,S,A,O,H=l[1][l[2]].type==="iframe"&&Ei(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("button"),s=Ve("svg"),i=Ve("path"),a=$(),c=V("div"),f=Ie(u),h=$(),d=V("button"),p=Ve("svg"),b=Ve("path"),g=$(),v=V("div"),k=V("button"),I=Ie(E),T=$(),H&&H.c(),this.h()},l(F){e=z(F,"DIV",{class:!0});var K=M(e);t=z(K,"DIV",{class:!0});var U=M(t);n=z(U,"DIV",{class:!0,dir:!0});var D=M(n);o=z(D,"BUTTON",{class:!0});var Y=M(o);s=ze(Y,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var P=M(s);i=ze(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(i).forEach(_),P.forEach(_),Y.forEach(_),a=ee(D),c=z(D,"DIV",{class:!0});var j=M(c);f=Se(j,u),j.forEach(_),h=ee(D),d=z(D,"BUTTON",{class:!0});var G=M(d);p=ze(G,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var X=M(p);b=ze(X,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(b).forEach(_),X.forEach(_),G.forEach(_),D.forEach(_),U.forEach(_),g=ee(K),v=z(K,"DIV",{class:!0});var Z=M(v);k=z(Z,"BUTTON",{class:!0});var J=M(k);I=Se(J,E),J.forEach(_),T=ee(Z),H&&H.l(Z),Z.forEach(_),K.forEach(_),this.h()},h(){m(i,"stroke-linecap","round"),m(i,"stroke-linejoin","round"),m(i,"d","M15.75 19.5 8.25 12l7.5-7.5"),m(s,"xmlns","http://www.w3.org/2000/svg"),m(s,"fill","none"),m(s,"viewBox","0 0 24 24"),m(s,"stroke","currentColor"),m(s,"stroke-width","2.5"),m(s,"class","size-3.5"),m(o,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),o.disabled=r=l[1].length<=1,m(c,"class","text-xs self-center dark:text-gray-100 min-w-fit"),m(b,"stroke-linecap","round"),m(b,"stroke-linejoin","round"),m(b,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),m(p,"xmlns","http://www.w3.org/2000/svg"),m(p,"fill","none"),m(p,"viewBox","0 0 24 24"),m(p,"stroke","currentColor"),m(p,"stroke-width","2.5"),m(p,"class","size-3.5"),m(d,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),d.disabled=w=l[1].length<=1,m(n,"class","flex items-center gap-0.5 self-center min-w-fit"),m(n,"dir","ltr"),m(t,"class","flex items-center space-x-2"),m(k,"class","copy-code-button bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md px-1.5 py-0.5"),m(v,"class","flex items-center gap-1"),m(e,"class","flex justify-between items-center p-2.5 font-primar text-gray-900 dark:text-white")},m(F,K){B(F,e,K),y(e,t),y(t,n),y(n,o),y(o,s),y(s,i),y(n,a),y(n,c),y(c,f),y(n,h),y(n,d),y(d,p),y(p,b),y(e,g),y(e,v),y(v,k),y(k,I),y(v,T),H&&H.m(v,null),S=!0,A||(O=[ke(o,"click",l[15]),ke(d,"click",l[16]),ke(k,"click",l[17])],A=!0)},p(F,K){(!S||K&2&&r!==(r=F[1].length<=1))&&(o.disabled=r),(!S||K&38)&&u!==(u=F[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:F[2]+1,totalVersions:F[1].length})+"")&&Te(f,u),(!S||K&2&&w!==(w=F[1].length<=1))&&(d.disabled=w),(!S||K&40)&&E!==(E=(F[3]?F[5].t("Copied"):F[5].t("Copy"))+"")&&Te(I,E),F[1][F[2]].type==="iframe"?H?(H.p(F,K),K&6&&C(H,1)):(H=Ei(F),H.c(),C(H,1),H.m(v,null)):H&&(He(),N(H,1,1,()=>{H=null}),Be())},i(F){S||(C(H),S=!0)},o(F){N(H),S=!1},d(F){F&&_(e),H&&H.d(),A=!1,en(O)}}}function Ei(l){let e,t;return e=new Ot({props:{content:l[5].t("Open in full screen"),$$slots:{default:[t_]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&32&&(s.content=n[5].t("Open in full screen")),o&1048576&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function t_(l){let e,t,n,o,s;return t=new J0({props:{className:"size-3.5"}}),{c(){e=V("button"),te(t.$$.fragment),this.h()},l(i){e=z(i,"BUTTON",{class:!0});var r=M(e);oe(t.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md p-0.5")},m(i,r){B(i,e,r),ne(t,e,null),n=!0,o||(s=ke(e,"click",l[10]),o=!0)},p:ye,i(i){n||(C(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){i&&_(e),le(t),o=!1,s()}}}function n_(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E=l[0]&&ki();i=new Ba({props:{className:"size-3.5  text-gray-900 dark:text-white"}}),u=new So({props:{className:"size-3.5 text-gray-900 dark:text-white"}});const I=[x0,Q0],T=[];function S(O,H){return O[1].length>0?0:1}p=S(l),b=T[p]=I[p](l);let A=l[1].length>0&&yi(l);return{c(){e=V("div"),t=V("div"),E&&E.c(),n=$(),o=V("div"),s=V("button"),te(i.$$.fragment),r=$(),a=V("div"),c=V("button"),te(u.$$.fragment),f=$(),h=V("div"),d=V("div"),b.c(),w=$(),A&&A.c(),this.h()},l(O){e=z(O,"DIV",{class:!0});var H=M(e);t=z(H,"DIV",{class:!0});var F=M(t);E&&E.l(F),n=ee(F),o=z(F,"DIV",{class:!0});var K=M(o);s=z(K,"BUTTON",{class:!0});var U=M(s);oe(i.$$.fragment,U),U.forEach(_),K.forEach(_),r=ee(F),a=z(F,"DIV",{class:!0});var D=M(a);c=z(D,"BUTTON",{class:!0});var Y=M(c);oe(u.$$.fragment,Y),Y.forEach(_),D.forEach(_),f=ee(F),h=z(F,"DIV",{class:!0});var P=M(h);d=z(P,"DIV",{class:!0});var j=M(d);b.l(j),j.forEach(_),P.forEach(_),F.forEach(_),w=ee(H),A&&A.l(H),H.forEach(_),this.h()},h(){m(s,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(o,"class","absolute pointer-events-none z-50 w-full flex items-center justify-start p-4"),m(c,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(a,"class","absolute pointer-events-none z-50 w-full flex items-center justify-end p-4"),m(d,"class","h-full flex flex-col"),m(h,"class","flex-1 w-full h-full"),m(t,"class","w-full h-full flex-1 relative"),m(e,"class","w-full h-full relative flex flex-col bg-gray-50 dark:bg-gray-850")},m(O,H){B(O,e,H),y(e,t),E&&E.m(t,null),y(t,n),y(t,o),y(o,s),ne(i,s,null),y(t,r),y(t,a),y(a,c),ne(u,c,null),y(t,f),y(t,h),y(h,d),T[p].m(d,null),y(e,w),A&&A.m(e,null),g=!0,v||(k=[ke(s,"click",l[12]),ke(c,"click",l[13])],v=!0)},p(O,[H]){O[0]?E||(E=ki(),E.c(),E.m(t,n)):E&&(E.d(1),E=null);let F=p;p=S(O),p===F?T[p].p(O,H):(He(),N(T[F],1,1,()=>{T[F]=null}),Be(),b=T[p],b?b.p(O,H):(b=T[p]=I[p](O),b.c()),C(b,1),b.m(d,null)),O[1].length>0?A?(A.p(O,H),H&2&&C(A,1)):(A=yi(O),A.c(),C(A,1),A.m(e,null)):A&&(He(),N(A,1,1,()=>{A=null}),Be())},i(O){g||(C(i.$$.fragment,O),C(u.$$.fragment,O),C(b),C(A),g=!0)},o(O){N(i.$$.fragment,O),N(u.$$.fragment,O),N(b),N(A),g=!1},d(O){O&&_(e),E&&E.d(),le(i),le(u),T[p].d(),A&&A.d(),v=!1,en(k)}}}function l_(l,e,t){let n;const o=Wt("i18n");ce(l,o,S=>t(5,n=S));const s=ln();let{overlay:i=!1}=e,{history:r}=e,a=[],c=[],u=0,f=!1,h;const d=()=>{t(1,c=[]),a.forEach(S=>{if((S==null?void 0:S.role)!=="user"&&(S!=null&&S.content)){const A=S.content.match(/```[\s\S]*?```/g);let O=[];A&&A.forEach(P=>{const j=P.split(`
`)[0].replace("```","").trim().toLowerCase(),G=P.replace(/```[\s\S]*?\n/,"").replace(/```$/,"");O.push({lang:j,code:G})});let H="",F="",K="";O.forEach(P=>{const{lang:j,code:G}=P;j==="html"?H+=G+`
`:j==="css"?F+=G+`
`:(j==="javascript"||j==="js")&&(K+=G+`
`)});const U=S.content.match(/<html>[\s\S]*?<\/html>/gi),D=S.content.match(/<style>[\s\S]*?<\/style>/gi),Y=S.content.match(/<script>[\s\S]*?<\/script>/gi);if(U&&U.forEach(P=>{const j=P.replace(/<\/?html>/gi,"");H+=j+`
`}),D&&D.forEach(P=>{const j=P.replace(/<\/?style>/gi,"");F+=j+`
`}),Y&&Y.forEach(P=>{const j=P.replace(/<\/?script>/gi,"");K+=j+`
`}),H||F||K){const P=`
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								${F}
							</style>
                        </head>
                        <body>
                            ${H}

							<script>
                            	${K}
							<\/script>
                        </body>
                        </html>
                    `;t(1,c=[...c,{type:"iframe",content:P}])}else for(const P of O)(P.lang==="svg"||P.lang==="xml"&&P.code.includes("<svg"))&&t(1,c=[...c,{type:"svg",content:P.code}])}}),c.length===0&&(Ut.set(!1),jn.set(!1)),t(2,u=c?c.length-1:0)};function p(S){console.log(u),t(2,u=S==="prev"?Math.max(u-1,0):Math.min(u+1,c.length-1)),console.log(u)}const b=()=>{h.contentWindow.addEventListener("click",function(S){const A=S.target.closest("a");if(A&&A.href){S.preventDefault();const O=new URL(A.href,h.baseURI);O.origin===window.location.origin?h.contentWindow.history.pushState(null,"",O.pathname+O.search+O.hash):console.log("External navigation blocked:",O.href)}},!0),h.contentWindow.addEventListener("mouseenter",function(S){S.preventDefault(),h.contentWindow.addEventListener("dragstart",A=>{A.preventDefault()})})},w=()=>{h.requestFullscreen?h.requestFullscreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen()};pn(()=>{});const g=()=>{jn.set(!1)},v=()=>{s("close"),Ut.set(!1),jn.set(!1)};function k(S){We[S?"unshift":"push"](()=>{h=S,t(4,h)})}const E=()=>p("prev"),I=()=>p("next"),T=()=>{xo(c[u].content),t(3,f=!0),setTimeout(()=>{t(3,f=!1)},2e3)};return l.$$set=S=>{"overlay"in S&&t(0,i=S.overlay),"history"in S&&t(11,r=S.history)},l.$$.update=()=>{l.$$.dirty&2048&&(r?(a=wn(r,r.currentId),d()):(a=[],d()))},[i,c,u,f,h,n,o,s,p,b,w,r,g,v,k,E,I,T]}class La extends Le{constructor(e){super(),Re(this,e,l_,n_,Fe,{overlay:0,history:11})}}function o_(l){let e,t,n,o,s=l[16]&&Ii(l);function i(a){l[37](a)}let r={defaultSize:0,onResize:l[35],onCollapse:l[36],collapsible:!0,class:"pt-8",$$slots:{default:[f_]},$$scope:{ctx:l}};return l[4]!==void 0&&(r.pane=l[4]),t=new Wi({props:r}),We.push(()=>Je(t,"pane",i)),{c(){s&&s.c(),e=$(),te(t.$$.fragment)},l(a){s&&s.l(a),e=ee(a),oe(t.$$.fragment,a)},m(a,c){s&&s.m(a,c),B(a,e,c),ne(t,a,c),o=!0},p(a,c){a[16]?s?c[0]&65536&&C(s,1):(s=Ii(a),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(He(),N(s,1,1,()=>{s=null}),Be());const u={};c[0]&81936&&(u.onResize=a[35]),c[0]&503791|c[1]&4096&&(u.$$scope={dirty:c,ctx:a}),!n&&c[0]&16&&(n=!0,u.pane=a[4],qe(()=>n=!1)),t.$set(u)},i(a){o||(C(s),C(t.$$.fragment,a),o=!0)},o(a){N(s),N(t.$$.fragment,a),o=!1},d(a){a&&_(e),s&&s.d(a),le(t,a)}}}function s_(l){let e,t,n=l[16]&&Ci(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&C(n,1)):(n=Ci(o),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Ii(l){let e,t;return e=new Ka({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[r_]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function r_(l){let e,t,n;return t=new gu({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-sm")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p:ye,i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function Si(l){let e,t,n,o,s,i;const r=[u_,c_,a_,i_],a=[];function c(u,f){return u[15]?0:u[18]?1:u[17]?2:3}return n=c(l),o=a[n]=r[n](l),{c(){e=V("div"),t=V("div"),o.c(),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=M(e);t=z(f,"DIV",{class:!0});var h=M(t);o.l(h),h.forEach(_),f.forEach(_),this.h()},h(){m(t,"class",s="w-full "+((l[17]||l[18])&&!l[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-50 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"),m(e,"class","pr-4 pb-8 flex max-h-full min-h-full")},m(u,f){B(u,e,f),y(e,t),a[n].m(t,null),i=!0},p(u,f){let h=n;n=c(u),n===h?a[n].p(u,f):(He(),N(a[h],1,1,()=>{a[h]=null}),Be(),o=a[n],o?o.p(u,f):(o=a[n]=r[n](u),o.c()),C(o,1),o.m(t,null)),(!i||f[0]&425984&&s!==(s="w-full "+((u[17]||u[18])&&!u[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-50 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"))&&m(t,"class",s)},i(u){i||(C(o),i=!0)},o(u){N(o),i=!1},d(u){u&&_(e),a[n].d()}}}function i_(l){let e,t,n,o;function s(a){l[32](a)}function i(a){l[33](a)}let r={models:l[5]};return l[1]!==void 0&&(r.chatFiles=l[1]),l[2]!==void 0&&(r.params=l[2]),e=new Oa({props:r}),We.push(()=>Je(e,"chatFiles",s)),We.push(()=>Je(e,"params",i)),e.$on("close",l[34]),{c(){te(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,c){ne(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],qe(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],qe(()=>n=!1)),e.$set(u)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){le(e,a)}}}function a_(l){let e,t;return e=new Aa({props:{history:l[0]}}),e.$on("nodeclick",l[30]),e.$on("close",l[31]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function c_(l){let e,t;return e=new La({props:{history:l[0],overlay:l[13]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),o[0]&8192&&(s.overlay=n[13]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function u_(l){let e,t,n,o;function s(r){l[28](r)}let i={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(i.files=l[3]),t=new Ha({props:i}),We.push(()=>Je(t,"files",s)),t.$on("close",l[29]),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);oe(t.$$.fragment,a),a.forEach(_),this.h()},h(){m(e,"class","w-full h-full flex justify-center")},m(r,a){B(r,e,a),ne(t,e,null),o=!0},p(r,a){const c={};a[0]&256&&(c.submitPrompt=r[8]),a[0]&512&&(c.stopResponse=r[9]),a[0]&2048&&(c.modelId=r[11]),a[0]&64&&(c.chatId=r[6]),a[0]&128&&(c.eventTarget=r[7]),!n&&a[0]&8&&(n=!0,c.files=r[3],qe(()=>n=!1)),t.$set(c)},i(r){o||(C(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&_(e),le(t)}}}function f_(l){let e,t,n=l[16]&&Si(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),B(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&C(n,1)):(n=Si(o),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(C(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Ci(l){let e,t;return e=new mu({props:{show:l[16],$$slots:{default:[__]},$$scope:{ctx:l}}}),e.$on("close",l[27]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&65536&&(s.show=n[16]),o[0]&430063|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function d_(l){let e,t,n,o;function s(a){l[24](a)}function i(a){l[25](a)}let r={models:l[5]};return l[1]!==void 0&&(r.chatFiles=l[1]),l[2]!==void 0&&(r.params=l[2]),e=new Oa({props:r}),We.push(()=>Je(e,"chatFiles",s)),We.push(()=>Je(e,"params",i)),e.$on("close",l[26]),{c(){te(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,c){ne(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],qe(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],qe(()=>n=!1)),e.$set(u)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){le(e,a)}}}function h_(l){let e,t;return e=new Aa({props:{history:l[0]}}),e.$on("nodeclick",l[22]),e.$on("close",l[23]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function m_(l){let e,t;return e=new La({props:{history:l[0]}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function g_(l){let e,t,n,o;function s(r){l[20](r)}let i={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(i.files=l[3]),t=new Ha({props:i}),We.push(()=>Je(t,"files",s)),t.$on("close",l[21]),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);oe(t.$$.fragment,a),a.forEach(_),this.h()},h(){m(e,"class","h-full max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center")},m(r,a){B(r,e,a),ne(t,e,null),o=!0},p(r,a){const c={};a[0]&256&&(c.submitPrompt=r[8]),a[0]&512&&(c.stopResponse=r[9]),a[0]&2048&&(c.modelId=r[11]),a[0]&64&&(c.chatId=r[6]),a[0]&128&&(c.eventTarget=r[7]),!n&&a[0]&8&&(n=!0,c.files=r[3],qe(()=>n=!1)),t.$set(c)},i(r){o||(C(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&_(e),le(t)}}}function __(l){let e,t,n,o,s;const i=[g_,m_,h_,d_],r=[];function a(c,u){return c[15]?0:c[18]?1:c[17]?2:3}return t=a(l),n=r[t]=i[t](l),{c(){e=V("div"),n.c(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=M(e);n.l(u),u.forEach(_),this.h()},h(){m(e,"class",o=(l[15]||l[17]||l[18]?" h-screen  w-full":"px-6 py-4")+" h-full")},m(c,u){B(c,e,u),r[t].m(e,null),s=!0},p(c,u){let f=t;t=a(c),t===f?r[t].p(c,u):(He(),N(r[f],1,1,()=>{r[f]=null}),Be(),n=r[t],n?n.p(c,u):(n=r[t]=i[t](c),n.c()),C(n,1),n.m(e,null)),(!s||u[0]&425984&&o!==(o=(c[15]||c[17]||c[18]?" h-screen  w-full":"px-6 py-4")+" h-full"))&&m(e,"class",o)},i(c){s||(C(n),s=!0)},o(c){N(n),s=!1},d(c){c&&_(e),r[t].d()}}}function p_(l){let e,t,n,o;const s=[s_,o_],i=[];function r(a,c){return a[12]?1:0}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),B(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),C(t,1),t.m(n.parentNode,n))},i(a){o||(C(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function b_(l){let e,t;return e=new l1({props:{$$slots:{default:[p_]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[0]&524287|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function v_(l,e,t){let n,o,s,i;ce(l,kn,fe=>t(15,n=fe)),ce(l,Ut,fe=>t(16,o=fe)),ce(l,Gn,fe=>t(17,s=fe)),ce(l,jn,fe=>t(18,i=fe));let{history:r}=e,{models:a=[]}=e,{chatId:c=null}=e,{chatFiles:u=[]}=e,{params:f={}}=e,{eventTarget:h}=e,{submitPrompt:d}=e,{stopResponse:p}=e,{showMessage:b}=e,{files:w}=e,{modelId:g}=e,{pane:v}=e,k,E=!1,I=!1,T=0;const S=()=>{parseInt(localStorage==null?void 0:localStorage.chatControlsSize)?v.resize(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)):v.resize(T)},A=async fe=>{fe.matches?(t(12,E=!0),n&&(kn.set(!1),await xe(),kn.set(!0))):(t(12,E=!1),n&&(kn.set(!1),await xe(),kn.set(!0)),t(4,v=null))},O=fe=>{t(13,I=!0)},H=fe=>{t(13,I=!1)};pn(()=>{k=window.matchMedia("(min-width: 1024px)"),k.addEventListener("change",A),A(k);const fe=document.getElementById("chat-container");t(14,T=Math.floor(350/fe.clientWidth*100)),new ResizeObserver(Ge=>{for(let Ke of Ge){const it=350/Ke.contentRect.width*100;t(14,T=Math.floor(it)),o&&v&&v.isExpanded()&&v.getSize()<T&&v.resize(T)}}).observe(fe),document.addEventListener("mousedown",O),document.addEventListener("mouseup",H)}),ll(()=>{Ut.set(!1),k.removeEventListener("change",A),document.removeEventListener("mousedown",O),document.removeEventListener("mouseup",H)});const F=()=>{Ut.set(!1),Gn.set(!1),jn.set(!1),n&&kn.set(!1)};function K(fe){w=fe,t(3,w)}const U=()=>{Ut.set(!1)},D=fe=>{b(fe.detail.node.data.message)},Y=()=>{Ut.set(!1)};function P(fe){u=fe,t(1,u)}function j(fe){f=fe,t(2,f)}const G=()=>{Ut.set(!1)},X=()=>{Ut.set(!1)};function Z(fe){w=fe,t(3,w)}const J=()=>{Ut.set(!1)},L=fe=>{fe.detail.node.data.message.favorite?t(0,r.messages[fe.detail.node.data.message.id].favorite=!0,r):t(0,r.messages[fe.detail.node.data.message.id].favorite=null,r),b(fe.detail.node.data.message)},re=()=>{Ut.set(!1)};function q(fe){u=fe,t(1,u)}function ae(fe){f=fe,t(2,f)}const ge=()=>{Ut.set(!1)},se=fe=>{console.log("size",fe,T),o&&v.isExpanded()&&(fe<T&&v.resize(T),fe<T?localStorage.chatControlsSize=0:localStorage.chatControlsSize=fe)},Oe=()=>{Ut.set(!1)};function Q(fe){v=fe,t(4,v)}return l.$$set=fe=>{"history"in fe&&t(0,r=fe.history),"models"in fe&&t(5,a=fe.models),"chatId"in fe&&t(6,c=fe.chatId),"chatFiles"in fe&&t(1,u=fe.chatFiles),"params"in fe&&t(2,f=fe.params),"eventTarget"in fe&&t(7,h=fe.eventTarget),"submitPrompt"in fe&&t(8,d=fe.submitPrompt),"stopResponse"in fe&&t(9,p=fe.stopResponse),"showMessage"in fe&&t(10,b=fe.showMessage),"files"in fe&&t(3,w=fe.files),"modelId"in fe&&t(11,g=fe.modelId),"pane"in fe&&t(4,v=fe.pane)},l.$$.update=()=>{l.$$.dirty[0]&64&&(c||F())},[r,u,f,w,v,a,c,h,d,p,b,g,E,I,T,n,o,s,i,S,K,U,D,Y,P,j,G,X,Z,J,L,re,q,ae,ge,se,Oe,Q]}class w_ extends Le{constructor(e){super(),Re(this,e,v_,b_,Fe,{history:0,models:5,chatId:6,chatFiles:1,params:2,eventTarget:7,submitPrompt:8,stopResponse:9,showMessage:10,files:3,modelId:11,pane:4,openPane:19},null,[-1,-1])}get openPane(){return this.$$.ctx[19]}}function Di(l,e,t){const n=l.slice();return n[35]=e[t],n[37]=t,n}function Mi(l){let e,t;return e=new Ot({props:{content:"This chat won't appear in history and your messages will not be saved.",className:"w-full flex justify-center mb-0.5",placement:"top",$$slots:{default:[k_]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function k_(l){let e,t,n,o;return t=new $c({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=V("div"),te(t.$$.fragment),n=Ie(" Temporary Chat"),this.h()},l(s){e=z(s,"DIV",{class:!0});var i=M(e);oe(t.$$.fragment,i),n=Se(i," Temporary Chat"),i.forEach(_),this.h()},h(){m(e,"class","flex items-center gap-2 text-gray-500 font-medium text-lg my-2 w-fit")},m(s,i){B(s,e,i),ne(t,e,null),y(e,n),o=!0},p:ye,i(s){o||(C(t.$$.fragment,s),o=!0)},o(s){N(t.$$.fragment,s),o=!1},d(s){s&&_(e),le(t)}}}function y_(l){let e,t,n,o,s,i;function r(){return l[23](l[37])}return{c(){e=V("button"),t=V("img"),o=$(),this.h()},l(a){e=z(a,"BUTTON",{});var c=M(e);t=z(c,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),c.forEach(_),o=ee(a),this.h()},h(){var a,c,u;m(t,"crossorigin","anonymous"),Qn(t.src,n=((u=(c=(a=l[35])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.profile_image_url)??(l[15].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`))||m(t,"src",n),m(t,"class","size-9 @sm:size-10 rounded-full border-[1px] border-gray-200 dark:border-none"),m(t,"alt","logo"),m(t,"draggable","false")},m(a,c){B(a,e,c),y(e,t),B(a,o,c),s||(i=ke(e,"click",r),s=!0)},p(a,c){var u,f,h;l=a,c[0]&40960&&!Qn(t.src,n=((h=(f=(u=l[35])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url)??(l[15].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`))&&m(t,"src",n)},d(a){a&&(_(e),_(o)),s=!1,i()}}}function Ti(l){var n,o,s;let e,t;return e=new Ot({props:{content:(((s=(o=(n=l[13][l[37]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.tags)??[]).map(Ni).join(", "),placement:"top",$$slots:{default:[y_]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){var c,u,f;const a={};r[0]&8192&&(a.content=(((f=(u=(c=i[13][i[37]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.tags)??[]).map(Ni).join(", ")),r[0]&57344|r[1]&128&&(a.$$scope={dirty:r,ctx:i}),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){le(e,i)}}}function E_(l){let e=l[15].t("Hello, {{name}}",{name:l[17].name})+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){B(n,t,o)},p(n,o){o[0]&163840&&e!==(e=n[15].t("Hello, {{name}}",{name:n[17].name})+"")&&Te(t,e)},d(n){n&&_(t)}}}function I_(l){var n;let e=((n=l[13][l[14]])==null?void 0:n.name)+"",t;return{c(){t=Ie(e)},l(o){t=Se(o,e)},m(o,s){B(o,t,s)},p(o,s){var i;s[0]&24576&&e!==(e=((i=o[13][o[14]])==null?void 0:i.name)+"")&&Te(t,e)},d(o){o&&_(t)}}}function Vi(l){var i,r,a,c,u,f;let e,t,n,o;e=new Ot({props:{className:" w-fit",content:Sl.parse(co(((a=(r=(i=l[13][l[14]])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.description)??"")),placement:"top",$$slots:{default:[S_]},$$scope:{ctx:l}}});let s=((f=(u=(c=l[13][l[14]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.user)&&zi(l);return{c(){te(e.$$.fragment),t=$(),s&&s.c(),n=Ae()},l(h){oe(e.$$.fragment,h),t=ee(h),s&&s.l(h),n=Ae()},m(h,d){ne(e,h,d),B(h,t,d),s&&s.m(h,d),B(h,n,d),o=!0},p(h,d){var b,w,g,v,k,E;const p={};d[0]&24576&&(p.content=Sl.parse(co(((g=(w=(b=h[13][h[14]])==null?void 0:b.info)==null?void 0:w.meta)==null?void 0:g.description)??""))),d[0]&24576|d[1]&128&&(p.$$scope={dirty:d,ctx:h}),e.$set(p),(E=(k=(v=h[13][h[14]])==null?void 0:v.info)==null?void 0:k.meta)!=null&&E.user?s?s.p(h,d):(s=zi(h),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(h){o||(C(e.$$.fragment,h),o=!0)},o(h){N(e.$$.fragment,h),o=!1},d(h){h&&(_(t),_(n)),le(e,h),s&&s.d(h)}}}function S_(l){var o,s,i;let e,t,n=Sl.parse(co((i=(s=(o=l[13][l[14]])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.description))+"";return{c(){e=V("div"),t=new Ai(!1),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);t=Li(a,!1),a.forEach(_),this.h()},h(){t.a=null,m(e,"class","mt-0.5 px-2 text-sm font-normal text-gray-500 dark:text-gray-400 line-clamp-2 max-w-xl markdown")},m(r,a){B(r,e,a),t.m(n,e)},p(r,a){var c,u,f;a[0]&24576&&n!==(n=Sl.parse(co((f=(u=(c=r[13][r[14]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.description))+"")&&t.p(n)},d(r){r&&_(e)}}}function zi(l){let e,t;function n(i,r){var a,c,u;return(u=(c=(a=i[13][i[14]])==null?void 0:a.info)==null?void 0:c.meta)!=null&&u.user.community?D_:C_}let o=n(l),s=o(l);return{c(){e=V("div"),t=Ie(`By
								`),s.c(),this.h()},l(i){e=z(i,"DIV",{class:!0});var r=M(e);t=Se(r,`By
								`),s.l(r),r.forEach(_),this.h()},h(){m(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(i,r){B(i,e,r),y(e,t),s.m(e,null)},p(i,r){o===(o=n(i))&&s?s.p(i,r):(s.d(1),s=o(i),s&&(s.c(),s.m(e,null)))},d(i){i&&_(e),s.d()}}}function C_(l){var n,o,s;let e=((s=(o=(n=l[13][l[14]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.user.name)+"",t;return{c(){t=Ie(e)},l(i){t=Se(i,e)},m(i,r){B(i,t,r)},p(i,r){var a,c,u;r[0]&24576&&e!==(e=((u=(c=(a=i[13][i[14]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name)+"")&&Te(t,e)},d(i){i&&_(t)}}}function D_(l){var s,i,r,a,c,u,f,h,d;let e,t=((r=(i=(s=l[13][l[14]])==null?void 0:s.info)==null?void 0:i.meta)!=null&&r.user.name?(u=(c=(a=l[13][l[14]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name:`@${(d=(h=(f=l[13][l[14]])==null?void 0:f.info)==null?void 0:h.meta)==null?void 0:d.user.username}`)+"",n,o;return{c(){e=V("a"),n=Ie(t),this.h()},l(p){e=z(p,"A",{href:!0});var b=M(e);n=Se(b,t),b.forEach(_),this.h()},h(){var p,b,w;m(e,"href",o="https://openwebui.com/m/"+((w=(b=(p=l[13][l[14]])==null?void 0:p.info)==null?void 0:b.meta)==null?void 0:w.user.username))},m(p,b){B(p,e,b),y(e,n)},p(p,b){var w,g,v,k,E,I,T,S,A,O,H,F;b[0]&24576&&t!==(t=((v=(g=(w=p[13][p[14]])==null?void 0:w.info)==null?void 0:g.meta)!=null&&v.user.name?(I=(E=(k=p[13][p[14]])==null?void 0:k.info)==null?void 0:E.meta)==null?void 0:I.user.name:`@${(A=(S=(T=p[13][p[14]])==null?void 0:T.info)==null?void 0:S.meta)==null?void 0:A.user.username}`)+"")&&Te(n,t),b[0]&24576&&o!==(o="https://openwebui.com/m/"+((F=(H=(O=p[13][p[14]])==null?void 0:O.info)==null?void 0:H.meta)==null?void 0:F.user.username))&&m(e,"href",o)},d(p){p&&_(e)}}}function M_(l){var it,at,Yt,St,_t,Rt,Tt;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E,I,T,S,A,O,H,F,K,U,D,Y,P,j,G=l[16]&&Mi(l),X=vt(l[13]),Z=[];for(let pe=0;pe<X.length;pe+=1)Z[pe]=Ti(Di(l,X,pe));const J=pe=>N(Z[pe],1,1,()=>{Z[pe]=null});function L(pe,je){var rt;return(rt=pe[13][pe[14]])!=null&&rt.name?I_:E_}let re=L(l),q=re(l),ae=(((Yt=(at=(it=l[13][l[14]])==null?void 0:it.info)==null?void 0:at.meta)==null?void 0:Yt.description)??null)&&Vi(l);function ge(pe){l[24](pe)}function se(pe){l[25](pe)}function Oe(pe){l[26](pe)}function Q(pe){l[27](pe)}function fe(pe){l[28](pe)}function Ce(pe){l[29](pe)}function Ge(pe){l[30](pe)}function Ke(pe){l[31](pe)}let ue={history:l[12],selectedModels:l[11],transparentBackground:l[8],stopResponse:l[10],createMessagePair:l[9],placeholder:l[15].t("How can I help you today?")};return l[3]!==void 0&&(ue.files=l[3]),l[2]!==void 0&&(ue.prompt=l[2]),l[0]!==void 0&&(ue.autoScroll=l[0]),l[4]!==void 0&&(ue.selectedToolIds=l[4]),l[5]!==void 0&&(ue.imageGenerationEnabled=l[5]),l[6]!==void 0&&(ue.codeInterpreterEnabled=l[6]),l[7]!==void 0&&(ue.webSearchEnabled=l[7]),l[1]!==void 0&&(ue.atSelectedModel=l[1]),v=new ea({props:ue}),We.push(()=>Je(v,"files",ge)),We.push(()=>Je(v,"prompt",se)),We.push(()=>Je(v,"autoScroll",Oe)),We.push(()=>Je(v,"selectedToolIds",Q)),We.push(()=>Je(v,"imageGenerationEnabled",fe)),We.push(()=>Je(v,"codeInterpreterEnabled",Ce)),We.push(()=>Je(v,"webSearchEnabled",Ge)),We.push(()=>Je(v,"atSelectedModel",Ke)),v.$on("upload",l[32]),v.$on("submit",l[33]),Y=new xc({props:{suggestionPrompts:((Rt=(_t=(St=l[13][l[14]])==null?void 0:St.info)==null?void 0:_t.meta)==null?void 0:Rt.suggestion_prompts)??((Tt=l[18])==null?void 0:Tt.default_prompt_suggestions)??[],inputValue:l[2]}}),Y.$on("select",l[34]),{c(){e=V("div"),G&&G.c(),t=$(),n=V("div"),o=V("div"),s=V("div"),i=V("div"),r=V("div");for(let pe=0;pe<Z.length;pe+=1)Z[pe].c();c=$(),u=V("div"),q.c(),h=$(),d=V("div"),p=V("div"),ae&&ae.c(),w=$(),g=V("div"),te(v.$$.fragment),K=$(),U=V("div"),D=V("div"),te(Y.$$.fragment),this.h()},l(pe){e=z(pe,"DIV",{class:!0});var je=M(e);G&&G.l(je),t=ee(je),n=z(je,"DIV",{class:!0});var rt=M(n);o=z(rt,"DIV",{class:!0});var he=M(o);s=z(he,"DIV",{class:!0});var wt=M(s);i=z(wt,"DIV",{class:!0});var dt=M(i);r=z(dt,"DIV",{class:!0});var pt=M(r);for(let ht=0;ht<Z.length;ht+=1)Z[ht].l(pt);pt.forEach(_),dt.forEach(_),c=ee(wt),u=z(wt,"DIV",{class:!0});var De=M(u);q.l(De),De.forEach(_),wt.forEach(_),h=ee(he),d=z(he,"DIV",{class:!0});var Vt=M(d);p=z(Vt,"DIV",{});var de=M(p);ae&&ae.l(de),de.forEach(_),Vt.forEach(_),w=ee(he),g=z(he,"DIV",{class:!0});var Me=M(g);oe(v.$$.fragment,Me),Me.forEach(_),he.forEach(_),rt.forEach(_),K=ee(je),U=z(je,"DIV",{class:!0});var we=M(U);D=z(we,"DIV",{class:!0});var Xe=M(D);oe(Y.$$.fragment,Xe),Xe.forEach(_),we.forEach(_),je.forEach(_),this.h()},h(){m(r,"class","flex -space-x-4 mb-0.5"),m(i,"class","flex flex-shrink-0 justify-center"),m(u,"class","text-3xl @sm:text-4xl line-clamp-1"),m(s,"class","flex flex-row justify-center gap-3 @sm:gap-3.5 w-fit px-5"),m(d,"class","flex mt-1 mb-2"),m(g,"class",F="text-base font-normal @md:max-w-3xl w-full py-3 "+(l[1]?"mt-2":"")),m(o,"class","w-full flex flex-col justify-center items-center"),m(n,"class","w-full text-3xl text-gray-800 dark:text-gray-100 font-medium text-center flex items-center gap-4 font-primary"),m(D,"class","mx-5"),m(U,"class","mx-auto max-w-2xl font-primary"),m(e,"class","m-auto w-full max-w-6xl px-2 @2xl:px-20 translate-y-6 py-24 text-center")},m(pe,je){B(pe,e,je),G&&G.m(e,null),y(e,t),y(e,n),y(n,o),y(o,s),y(s,i),y(i,r);for(let rt=0;rt<Z.length;rt+=1)Z[rt]&&Z[rt].m(r,null);y(s,c),y(s,u),q.m(u,null),y(o,h),y(o,d),y(d,p),ae&&ae.m(p,null),y(o,w),y(o,g),ne(v,g,null),y(e,K),y(e,U),y(U,D),ne(Y,D,null),j=!0},p(pe,je){var wt,dt,pt,De,Vt,de,Me;if(pe[16]?G?je[0]&65536&&C(G,1):(G=Mi(pe),G.c(),C(G,1),G.m(e,t)):G&&(He(),N(G,1,1,()=>{G=null}),Be()),je[0]&57344){X=vt(pe[13]);let we;for(we=0;we<X.length;we+=1){const Xe=Di(pe,X,we);Z[we]?(Z[we].p(Xe,je),C(Z[we],1)):(Z[we]=Ti(Xe),Z[we].c(),C(Z[we],1),Z[we].m(r,null))}for(He(),we=X.length;we<Z.length;we+=1)J(we);Be()}re===(re=L(pe))&&q?q.p(pe,je):(q.d(1),q=re(pe),q&&(q.c(),q.m(u,null))),((pt=(dt=(wt=pe[13][pe[14]])==null?void 0:wt.info)==null?void 0:dt.meta)==null?void 0:pt.description)??null?ae?(ae.p(pe,je),je[0]&24576&&C(ae,1)):(ae=Vi(pe),ae.c(),C(ae,1),ae.m(p,null)):ae&&(He(),N(ae,1,1,()=>{ae=null}),Be());const rt={};je[0]&4096&&(rt.history=pe[12]),je[0]&2048&&(rt.selectedModels=pe[11]),je[0]&256&&(rt.transparentBackground=pe[8]),je[0]&1024&&(rt.stopResponse=pe[10]),je[0]&512&&(rt.createMessagePair=pe[9]),je[0]&32768&&(rt.placeholder=pe[15].t("How can I help you today?")),!k&&je[0]&8&&(k=!0,rt.files=pe[3],qe(()=>k=!1)),!E&&je[0]&4&&(E=!0,rt.prompt=pe[2],qe(()=>E=!1)),!I&&je[0]&1&&(I=!0,rt.autoScroll=pe[0],qe(()=>I=!1)),!T&&je[0]&16&&(T=!0,rt.selectedToolIds=pe[4],qe(()=>T=!1)),!S&&je[0]&32&&(S=!0,rt.imageGenerationEnabled=pe[5],qe(()=>S=!1)),!A&&je[0]&64&&(A=!0,rt.codeInterpreterEnabled=pe[6],qe(()=>A=!1)),!O&&je[0]&128&&(O=!0,rt.webSearchEnabled=pe[7],qe(()=>O=!1)),!H&&je[0]&2&&(H=!0,rt.atSelectedModel=pe[1],qe(()=>H=!1)),v.$set(rt),(!j||je[0]&2&&F!==(F="text-base font-normal @md:max-w-3xl w-full py-3 "+(pe[1]?"mt-2":"")))&&m(g,"class",F);const he={};je[0]&286720&&(he.suggestionPrompts=((de=(Vt=(De=pe[13][pe[14]])==null?void 0:De.info)==null?void 0:Vt.meta)==null?void 0:de.suggestion_prompts)??((Me=pe[18])==null?void 0:Me.default_prompt_suggestions)??[]),je[0]&4&&(he.inputValue=pe[2]),Y.$set(he)},i(pe){if(!j){C(G);for(let je=0;je<X.length;je+=1)C(Z[je]);pe&&(a||tl(()=>{a=xl(r,vl,{duration:100}),a.start()})),pe&&(f||tl(()=>{f=xl(u,vl,{duration:100}),f.start()})),C(ae),pe&&(b||tl(()=>{b=xl(p,vl,{duration:100,delay:50}),b.start()})),C(v.$$.fragment,pe),C(Y.$$.fragment,pe),pe&&(P||tl(()=>{P=xl(U,vl,{duration:200,delay:200}),P.start()})),j=!0}},o(pe){N(G),Z=Z.filter(Boolean);for(let je=0;je<Z.length;je+=1)N(Z[je]);N(ae),N(v.$$.fragment,pe),N(Y.$$.fragment,pe),j=!1},d(pe){pe&&_(e),G&&G.d(),Dn(Z,pe),q.d(),ae&&ae.d(),le(v),le(Y)}}}const Ni=l=>l.name.toUpperCase();function T_(l,e,t){let n,o,s,i,r;ce(l,dl,L=>t(22,n=L)),ce(l,ko,L=>t(16,s=L)),ce(l,xn,L=>t(17,i=L)),ce(l,Yl,L=>t(18,r=L));const a=ln(),c=Wt("i18n");ce(l,c,L=>t(15,o=L));let{transparentBackground:u=!1}=e,{createMessagePair:f}=e,{stopResponse:h}=e,{autoScroll:d=!1}=e,{atSelectedModel:p}=e,{selectedModels:b}=e,{history:w}=e,{prompt:g=""}=e,{files:v=[]}=e,{selectedToolIds:k=[]}=e,{imageGenerationEnabled:E=!1}=e,{codeInterpreterEnabled:I=!1}=e,{webSearchEnabled:T=!1}=e,S=[];const A=async L=>{let re=L;if(L.includes("{{CLIPBOARD}}")){const ge=await navigator.clipboard.readText().catch(se=>(et.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));re=L.replaceAll("{{CLIPBOARD}}",ge),console.log("Clipboard text:",ge,re)}t(2,g=re),console.log(g),await xe();const q=document.getElementById("chat-input-container"),ae=document.getElementById("chat-input");q&&(q.style.height="",q.style.height=Math.min(q.scrollHeight,200)+"px"),await xe(),ae&&(ae.focus(),ae.dispatchEvent(new Event("input"))),await xe()};let O=0;pn(()=>{});const H=L=>{t(14,O=L)};function F(L){v=L,t(3,v)}function K(L){g=L,t(2,g)}function U(L){d=L,t(0,d)}function D(L){k=L,t(4,k)}function Y(L){E=L,t(5,E)}function P(L){I=L,t(6,I)}function j(L){T=L,t(7,T)}function G(L){p=L,t(1,p)}const X=L=>{a("upload",L.detail)},Z=L=>{a("submit",L.detail)},J=L=>{A(L.detail)};return l.$$set=L=>{"transparentBackground"in L&&t(8,u=L.transparentBackground),"createMessagePair"in L&&t(9,f=L.createMessagePair),"stopResponse"in L&&t(10,h=L.stopResponse),"autoScroll"in L&&t(0,d=L.autoScroll),"atSelectedModel"in L&&t(1,p=L.atSelectedModel),"selectedModels"in L&&t(11,b=L.selectedModels),"history"in L&&t(12,w=L.history),"prompt"in L&&t(2,g=L.prompt),"files"in L&&t(3,v=L.files),"selectedToolIds"in L&&t(4,k=L.selectedToolIds),"imageGenerationEnabled"in L&&t(5,E=L.imageGenerationEnabled),"codeInterpreterEnabled"in L&&t(6,I=L.codeInterpreterEnabled),"webSearchEnabled"in L&&t(7,T=L.webSearchEnabled)},l.$$.update=()=>{l.$$.dirty[0]&4196352&&t(13,S=b.map(L=>n.find(re=>re.id===L))),l.$$.dirty[0]&10240&&b.length>0&&t(14,O=S.length-1)},[d,p,g,v,k,E,I,T,u,f,h,b,w,S,O,o,s,i,r,a,c,A,n,H,F,K,U,D,Y,P,j,G,X,Z,J]}class V_ extends Le{constructor(e){super(),Re(this,e,T_,M_,Fe,{transparentBackground:8,createMessagePair:9,stopResponse:10,autoScroll:0,atSelectedModel:1,selectedModels:11,history:12,prompt:2,files:3,selectedToolIds:4,imageGenerationEnabled:5,codeInterpreterEnabled:6,webSearchEnabled:7},null,[-1,-1])}}const{document:Yo}=Ui;function Pi(l,e,t){const n=l.slice();return n[117]=e[t],n}function z_(l){let e,t,n,o;return n=new Io({}),{c(){e=V("div"),t=V("div"),te(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var i=M(e);t=z(i,"DIV",{class:!0});var r=M(t);oe(n.$$.fragment,r),r.forEach(_),i.forEach(_),this.h()},h(){m(t,"class","m-auto"),m(e,"class","flex items-center justify-center h-full w-full")},m(s,i){B(s,e,i),y(e,t),ne(n,t,null),o=!0},p:ye,i(s){o||(C(n.$$.fragment,s),o=!0)},o(s){N(n.$$.fragment,s),o=!1},d(s){s&&_(e),le(n)}}}function N_(l){var u;let e,t,n,o,s,i,r=(((u=l[27])==null?void 0:u.backgroundImageUrl)??null)&&Oi(l);function a(f){l[54](f)}let c={chat:{id:l[26],chat:{title:l[29],models:l[1],system:l[27].system??void 0,params:l[25],history:l[21],timestamp:Date.now()}},title:l[29],shareEnabled:!!l[21].currentId,initNewChat:l[39]};return l[1]!==void 0&&(c.selectedModels=l[1]),t=new lh({props:c}),l[53](t),We.push(()=>Je(t,"selectedModels",a)),s=new Za({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[B_]},$$scope:{ctx:l}}}),{c(){r&&r.c(),e=$(),te(t.$$.fragment),o=$(),te(s.$$.fragment)},l(f){r&&r.l(f),e=ee(f),oe(t.$$.fragment,f),o=ee(f),oe(s.$$.fragment,f)},m(f,h){r&&r.m(f,h),B(f,e,h),ne(t,f,h),B(f,o,h),ne(s,f,h),i=!0},p(f,h){var b;((b=f[27])==null?void 0:b.backgroundImageUrl)??null?r?r.p(f,h):(r=Oi(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);const d={};h[0]&773849090&&(d.chat={id:f[26],chat:{title:f[29],models:f[1],system:f[27].system??void 0,params:f[25],history:f[21],timestamp:Date.now()}}),h[0]&536870912&&(d.title=f[29]),h[0]&2097152&&(d.shareEnabled=!!f[21].currentId),!n&&h[0]&2&&(n=!0,d.selectedModels=f[1],qe(()=>n=!1)),t.$set(d);const p={};h[0]&536805622|h[1]&2|h[3]&134217728&&(p.$$scope={dirty:h,ctx:f}),s.$set(p)},i(f){i||(C(t.$$.fragment,f),C(s.$$.fragment,f),i=!0)},o(f){N(t.$$.fragment,f),N(s.$$.fragment,f),i=!1},d(f){f&&(_(e),_(o)),r&&r.d(f),l[53](null),le(t,f),le(s,f)}}}function Oi(l){let e,t,n,o;return{c(){e=V("div"),n=$(),o=V("div"),this.h()},l(s){e=z(s,"DIV",{class:!0,style:!0}),M(e).forEach(_),n=ee(s),o=z(s,"DIV",{class:!0}),M(o).forEach(_),this.h()},h(){m(e,"class",t="absolute "+(l[31]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),$e(e,"background-image","url("+l[27].backgroundImageUrl+")"),m(o,"class","absolute top-0 left-0 w-full h-full bg-gradient-to-t from-white to-white/85 dark:from-gray-900 dark:to-[#171717]/90 z-0")},m(s,i){B(s,e,i),B(s,n,i),B(s,o,i)},p(s,i){i[1]&1&&t!==(t="absolute "+(s[31]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&m(e,"class",t),i[0]&134217728&&$e(e,"background-image","url("+s[27].backgroundImageUrl+")")},d(s){s&&(_(e),_(n),_(o))}}}function Hi(l){let e,t,n,o=vt(l[32].filter(l[55])),s=[];for(let r=0;r<o.length;r+=1)s[r]=Bi(Pi(l,o,r));const i=r=>N(s[r],1,1,()=>{s[r]=null});return{c(){e=V("div"),t=V("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var a=M(e);t=z(a,"DIV",{class:!0});var c=M(t);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(_),a.forEach(_),this.h()},h(){m(t,"class","flex flex-col gap-1 w-full"),m(e,"class","absolute top-12 left-0 right-0 w-full z-30")},m(r,a){B(r,e,a),y(e,t);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(r,a){if(a[1]&2){o=vt(r[32].filter(r[55]));let c;for(c=0;c<o.length;c+=1){const u=Pi(r,o,c);s[c]?(s[c].p(u,a),C(s[c],1)):(s[c]=Bi(u),s[c].c(),C(s[c],1),s[c].m(t,null))}for(He(),c=o.length;c<s.length;c+=1)i(c);Be()}},i(r){if(!n){for(let a=0;a<o.length;a+=1)C(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)N(s[a]);n=!1},d(r){r&&_(e),Dn(s,r)}}}function Bi(l){let e,t;return e=new Yu({props:{banner:l[117]}}),e.$on("dismiss",l[56]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o[1]&2&&(s.banner=n[117]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function P_(l){var I;let e,t,n,o,s,i,r,a,c,u,f;function h(T){l[73](T)}function d(T){l[74](T)}function p(T){l[75](T)}function b(T){l[76](T)}function w(T){l[77](T)}function g(T){l[78](T)}function v(T){l[79](T)}function k(T){l[80](T)}let E={history:l[21],selectedModels:l[1],transparentBackground:((I=l[27])==null?void 0:I.backgroundImageUrl)??!1,stopResponse:l[45],createMessagePair:l[41]};return l[24]!==void 0&&(E.files=l[24]),l[22]!==void 0&&(E.prompt=l[22]),l[6]!==void 0&&(E.autoScroll=l[6]),l[17]!==void 0&&(E.selectedToolIds=l[17]),l[18]!==void 0&&(E.imageGenerationEnabled=l[18]),l[20]!==void 0&&(E.codeInterpreterEnabled=l[20]),l[19]!==void 0&&(E.webSearchEnabled=l[19]),l[2]!==void 0&&(E.atSelectedModel=l[2]),t=new V_({props:E}),We.push(()=>Je(t,"files",h)),We.push(()=>Je(t,"prompt",d)),We.push(()=>Je(t,"autoScroll",p)),We.push(()=>Je(t,"selectedToolIds",b)),We.push(()=>Je(t,"imageGenerationEnabled",w)),We.push(()=>Je(t,"codeInterpreterEnabled",g)),We.push(()=>Je(t,"webSearchEnabled",v)),We.push(()=>Je(t,"atSelectedModel",k)),t.$on("upload",l[81]),t.$on("submit",l[82]),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(T){e=z(T,"DIV",{class:!0});var S=M(e);oe(t.$$.fragment,S),S.forEach(_),this.h()},h(){m(e,"class","overflow-auto w-full h-full flex items-center")},m(T,S){B(T,e,S),ne(t,e,null),f=!0},p(T,S){var O;const A={};S[0]&2097152&&(A.history=T[21]),S[0]&2&&(A.selectedModels=T[1]),S[0]&134217728&&(A.transparentBackground=((O=T[27])==null?void 0:O.backgroundImageUrl)??!1),!n&&S[0]&16777216&&(n=!0,A.files=T[24],qe(()=>n=!1)),!o&&S[0]&4194304&&(o=!0,A.prompt=T[22],qe(()=>o=!1)),!s&&S[0]&64&&(s=!0,A.autoScroll=T[6],qe(()=>s=!1)),!i&&S[0]&131072&&(i=!0,A.selectedToolIds=T[17],qe(()=>i=!1)),!r&&S[0]&262144&&(r=!0,A.imageGenerationEnabled=T[18],qe(()=>r=!1)),!a&&S[0]&1048576&&(a=!0,A.codeInterpreterEnabled=T[20],qe(()=>a=!1)),!c&&S[0]&524288&&(c=!0,A.webSearchEnabled=T[19],qe(()=>c=!1)),!u&&S[0]&4&&(u=!0,A.atSelectedModel=T[2],qe(()=>u=!1)),t.$set(A)},i(T){f||(C(t.$$.fragment,T),f=!0)},o(T){N(t.$$.fragment,T),f=!1},d(T){T&&_(e),le(t)}}}function O_(l){var J;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,E="",I,T,S;function A(L){l[57](L)}function O(L){l[58](L)}function H(L){l[59](L)}let F={chatId:l[26],selectedModels:l[1],sendPrompt:l[44],showMessage:l[35],submitMessage:l[46],continueResponse:l[48],regenerateResponse:l[47],mergeResponses:l[49],chatActionHandler:l[40],addMessages:l[42],bottomPadding:l[24].length>0};l[21]!==void 0&&(F.history=l[21]),l[6]!==void 0&&(F.autoScroll=l[6]),l[22]!==void 0&&(F.prompt=l[22]),n=new eu({props:F}),We.push(()=>Je(n,"history",A)),We.push(()=>Je(n,"autoScroll",O)),We.push(()=>Je(n,"prompt",H));function K(L){l[63](L)}function U(L){l[64](L)}function D(L){l[65](L)}function Y(L){l[66](L)}function P(L){l[67](L)}function j(L){l[68](L)}function G(L){l[69](L)}function X(L){l[70](L)}let Z={history:l[21],selectedModels:l[1],transparentBackground:((J=l[27])==null?void 0:J.backgroundImageUrl)??!1,stopResponse:l[45],createMessagePair:l[41],onChange:l[62]};return l[24]!==void 0&&(Z.files=l[24]),l[22]!==void 0&&(Z.prompt=l[22]),l[6]!==void 0&&(Z.autoScroll=l[6]),l[17]!==void 0&&(Z.selectedToolIds=l[17]),l[18]!==void 0&&(Z.imageGenerationEnabled=l[18]),l[20]!==void 0&&(Z.codeInterpreterEnabled=l[20]),l[19]!==void 0&&(Z.webSearchEnabled=l[19]),l[2]!==void 0&&(Z.atSelectedModel=l[2]),c=new ea({props:Z}),We.push(()=>Je(c,"files",K)),We.push(()=>Je(c,"prompt",U)),We.push(()=>Je(c,"autoScroll",D)),We.push(()=>Je(c,"selectedToolIds",Y)),We.push(()=>Je(c,"imageGenerationEnabled",P)),We.push(()=>Je(c,"codeInterpreterEnabled",j)),We.push(()=>Je(c,"webSearchEnabled",G)),We.push(()=>Je(c,"atSelectedModel",X)),c.$on("upload",l[71]),c.$on("submit",l[72]),{c(){e=V("div"),t=V("div"),te(n.$$.fragment),r=$(),a=V("div"),te(c.$$.fragment),v=$(),k=V("div"),k.innerHTML=E,this.h()},l(L){e=z(L,"DIV",{class:!0,id:!0});var re=M(e);t=z(re,"DIV",{class:!0});var q=M(t);oe(n.$$.fragment,q),q.forEach(_),re.forEach(_),r=ee(L),a=z(L,"DIV",{class:!0});var ae=M(a);oe(c.$$.fragment,ae),v=ee(ae),k=z(ae,"DIV",{class:!0,"data-svelte-h":!0}),ut(k)!=="svelte-1t2gtm5"&&(k.innerHTML=E),ae.forEach(_),this.h()},h(){m(t,"class","h-full w-full flex flex-col"),m(e,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden"),m(e,"id","messages-container"),m(k,"class","absolute bottom-1 text-xs text-gray-500 text-center line-clamp-1 right-0 left-0"),m(a,"class","pb-[1rem]")},m(L,re){B(L,e,re),y(e,t),ne(n,t,null),l[60](e),B(L,r,re),B(L,a,re),ne(c,a,null),y(a,v),y(a,k),I=!0,T||(S=ke(e,"scroll",l[61]),T=!0)},p(L,re){var ge;const q={};re[0]&67108864&&(q.chatId=L[26]),re[0]&2&&(q.selectedModels=L[1]),re[0]&16777216&&(q.bottomPadding=L[24].length>0),!o&&re[0]&2097152&&(o=!0,q.history=L[21],qe(()=>o=!1)),!s&&re[0]&64&&(s=!0,q.autoScroll=L[6],qe(()=>s=!1)),!i&&re[0]&4194304&&(i=!0,q.prompt=L[22],qe(()=>i=!1)),n.$set(q);const ae={};re[0]&2097152&&(ae.history=L[21]),re[0]&2&&(ae.selectedModels=L[1]),re[0]&134217728&&(ae.transparentBackground=((ge=L[27])==null?void 0:ge.backgroundImageUrl)??!1),re[0]&67108864&&(ae.onChange=L[62]),!u&&re[0]&16777216&&(u=!0,ae.files=L[24],qe(()=>u=!1)),!f&&re[0]&4194304&&(f=!0,ae.prompt=L[22],qe(()=>f=!1)),!h&&re[0]&64&&(h=!0,ae.autoScroll=L[6],qe(()=>h=!1)),!d&&re[0]&131072&&(d=!0,ae.selectedToolIds=L[17],qe(()=>d=!1)),!p&&re[0]&262144&&(p=!0,ae.imageGenerationEnabled=L[18],qe(()=>p=!1)),!b&&re[0]&1048576&&(b=!0,ae.codeInterpreterEnabled=L[20],qe(()=>b=!1)),!w&&re[0]&524288&&(w=!0,ae.webSearchEnabled=L[19],qe(()=>w=!1)),!g&&re[0]&4&&(g=!0,ae.atSelectedModel=L[2],qe(()=>g=!1)),c.$set(ae)},i(L){I||(C(n.$$.fragment,L),C(c.$$.fragment,L),I=!0)},o(L){N(n.$$.fragment,L),N(c.$$.fragment,L),I=!1},d(L){L&&(_(e),_(r),_(a)),le(n),l[60](null),le(c),T=!1,S()}}}function H_(l){let e,t,n,o,s,i,r=l[32].length>0&&!l[21].currentId&&!l[26]&&l[1].length<=1&&Hi(l);const a=[O_,P_],c=[];function u(f,h){var d;return h[0]&136314880&&(n=null),n==null&&(n=((d=f[27])==null?void 0:d.landingPageMode)==="chat"||wn(f[21],f[21].currentId).length>0),n?0:1}return o=u(l,[-1,-1,-1,-1]),s=c[o]=a[o](l),{c(){r&&r.c(),e=$(),t=V("div"),s.c(),this.h()},l(f){r&&r.l(f),e=ee(f),t=z(f,"DIV",{class:!0});var h=M(t);s.l(h),h.forEach(_),this.h()},h(){m(t,"class","flex flex-col flex-auto z-10 w-full @container")},m(f,h){r&&r.m(f,h),B(f,e,h),B(f,t,h),c[o].m(t,null),i=!0},p(f,h){f[32].length>0&&!f[21].currentId&&!f[26]&&f[1].length<=1?r?(r.p(f,h),h[0]&69206018|h[1]&2&&C(r,1)):(r=Hi(f),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(He(),N(r,1,1,()=>{r=null}),Be());let d=o;o=u(f,h),o===d?c[o].p(f,h):(He(),N(c[d],1,1,()=>{c[d]=null}),Be(),s=c[o],s?s.p(f,h):(s=c[o]=a[o](f),s.c()),C(s,1),s.m(t,null))},i(f){i||(C(r),C(s),i=!0)},o(f){N(r),N(s),i=!1},d(f){f&&(_(e),_(t)),r&&r.d(f),c[o].d()}}}function B_(l){var w;let e,t,n,o,s,i,r,a,c;e=new Wi({props:{defaultSize:50,class:"h-full flex w-full relative",$$slots:{default:[H_]},$$scope:{ctx:l}}});function u(g){l[85](g)}function f(g){l[86](g)}function h(g){l[87](g)}function d(g){l[88](g)}function p(g){l[89](g)}let b={chatId:l[26],modelId:((w=l[16])==null?void 0:w.at(0))??null,models:l[16].reduce(l[83],[]),submitPrompt:l[43],stopResponse:l[45],showMessage:l[35],eventTarget:l[34]};return l[21]!==void 0&&(b.history=l[21]),l[23]!==void 0&&(b.chatFiles=l[23]),l[25]!==void 0&&(b.params=l[25]),l[24]!==void 0&&(b.files=l[24]),l[4]!==void 0&&(b.pane=l[4]),n=new w_({props:b}),l[84](n),We.push(()=>Je(n,"history",u)),We.push(()=>Je(n,"chatFiles",f)),We.push(()=>Je(n,"params",h)),We.push(()=>Je(n,"files",d)),We.push(()=>Je(n,"pane",p)),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment)},l(g){oe(e.$$.fragment,g),t=ee(g),oe(n.$$.fragment,g)},m(g,v){ne(e,g,v),B(g,t,v),ne(n,g,v),c=!0},p(g,v){var I;const k={};v[0]&226361542|v[1]&2|v[3]&134217728&&(k.$$scope={dirty:v,ctx:g}),e.$set(k);const E={};v[0]&67108864&&(E.chatId=g[26]),v[0]&65536&&(E.modelId=((I=g[16])==null?void 0:I.at(0))??null),v[0]&268500992&&(E.models=g[16].reduce(g[83],[])),!o&&v[0]&2097152&&(o=!0,E.history=g[21],qe(()=>o=!1)),!s&&v[0]&8388608&&(s=!0,E.chatFiles=g[23],qe(()=>s=!1)),!i&&v[0]&33554432&&(i=!0,E.params=g[25],qe(()=>i=!1)),!r&&v[0]&16777216&&(r=!0,E.files=g[24],qe(()=>r=!1)),!a&&v[0]&16&&(a=!0,E.pane=g[4],qe(()=>a=!1)),n.$set(E)},i(g){c||(C(e.$$.fragment,g),C(n.$$.fragment,g),c=!0)},o(g){N(e.$$.fragment,g),N(n.$$.fragment,g),c=!1},d(g){g&&_(t),le(e,g),l[84](null),le(n,g)}}}function A_(l){let e,t,n,o,s,i,r,a,c,u,f,h,d;Yo.title=e=`
		`+(l[29]?`${l[29].length>30?`${l[29].slice(0,30)}...`:l[29]} | ${l[30]}`:`${l[30]}`)+`
	`;function p(k){l[50](k)}let b={title:l[10],message:l[11],input:l[12],inputPlaceholder:l[13],inputValue:l[14]};l[9]!==void 0&&(b.show=l[9]),i=new _u({props:b}),We.push(()=>Je(i,"show",p)),i.$on("confirm",l[51]),i.$on("cancel",l[52]);const w=[N_,z_],g=[];function v(k,E){return k[0]===""||!k[3]&&k[0]?0:k[3]?1:-1}return~(u=v(l))&&(f=g[u]=w[u](l)),{c(){t=$(),n=V("audio"),s=$(),te(i.$$.fragment),a=$(),c=V("div"),f&&f.c(),this.h()},l(k){Fa("svelte-8uu834",Yo.head).forEach(_),t=ee(k),n=z(k,"AUDIO",{id:!0,src:!0,style:!0}),M(n).forEach(_),s=ee(k),oe(i.$$.fragment,k),a=ee(k),c=z(k,"DIV",{class:!0,id:!0});var I=M(c);f&&f.l(I),I.forEach(_),this.h()},h(){m(n,"id","audioElement"),Qn(n.src,o="")||m(n,"src",o),$e(n,"display","none"),m(c,"class",h="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(l[31]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"),m(c,"id","chat-container")},m(k,E){B(k,t,E),B(k,n,E),B(k,s,E),ne(i,k,E),B(k,a,E),B(k,c,E),~u&&g[u].m(c,null),d=!0},p(k,E){(!d||E[0]&1610612736)&&e!==(e=`
		`+(k[29]?`${k[29].length>30?`${k[29].slice(0,30)}...`:k[29]} | ${k[30]}`:`${k[30]}`)+`
	`)&&(Yo.title=e);const I={};E[0]&1024&&(I.title=k[10]),E[0]&2048&&(I.message=k[11]),E[0]&4096&&(I.input=k[12]),E[0]&8192&&(I.inputPlaceholder=k[13]),E[0]&16384&&(I.inputValue=k[14]),!r&&E[0]&512&&(r=!0,I.show=k[9],qe(()=>r=!1)),i.$set(I);let T=u;u=v(k),u===T?~u&&g[u].p(k,E):(f&&(He(),N(g[T],1,1,()=>{g[T]=null}),Be()),~u?(f=g[u],f?f.p(k,E):(f=g[u]=w[u](k),f.c()),C(f,1),f.m(c,null)):f=null),(!d||E[1]&1&&h!==(h="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(k[31]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"))&&m(c,"class",h)},i(k){d||(C(i.$$.fragment,k),C(f),d=!0)},o(k){N(i.$$.fragment,k),N(f),d=!1},d(k){k&&(_(t),_(n),_(s),_(a),_(c)),le(i,k),~u&&g[u].d()}}}function L_(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k;ce(l,il,R=>t(94,n=R)),ce(l,ko,R=>t(95,o=R)),ce(l,cl,R=>t(26,s=R)),ce(l,Zn,R=>t(27,i=R)),ce(l,dl,R=>t(28,a=R)),ce(l,xa,R=>t(97,c=R)),ce(l,xn,R=>t(98,u=R)),ce(l,Yl,R=>t(99,f=R)),ce(l,kn,R=>t(100,h=R)),ce(l,Ga,R=>t(101,d=R)),ce(l,wo,R=>t(102,p=R)),ce(l,ul,R=>t(103,b=R)),ce(l,$l,R=>t(29,w=R)),ce(l,Yi,R=>t(30,g=R)),ce(l,Xo,R=>t(31,v=R)),ce(l,$a,R=>t(32,k=R));const E=Wt("i18n");ce(l,E,R=>t(96,r=R));let{chatIdProp:I=""}=e,T=!1;const S=new EventTarget;let A,O,H=!0,F,K,U=!1,D="",Y="",P=!1,j="",G="",X=null,Z,J=[""],L,re=[],q=[],ae=!1,ge=!1,se=!1,Oe=null,Q={messages:{},currentId:null},fe=null,Ce="",Ge=[],Ke=[],ue={};const it=()=>{J.length===0||J.length===1&&J[0]===""||(sessionStorage.selectedModels=JSON.stringify(J),console.log("saveSessionSelectedModels",J,sessionStorage.selectedModels))},at=async()=>{var ie,ve;if(b||ul.set(await $o(localStorage.token)),J.length!==1)return;const R=a.find(Pe=>Pe.id===J[0]);R&&t(17,q=(((ve=(ie=R==null?void 0:R.info)==null?void 0:ie.meta)==null?void 0:ve.toolIds)??[]).filter(Pe=>b.find(_e=>_e.id===Pe)))},Yt=async R=>{const ie=JSON.parse(JSON.stringify(s));let ve=JSON.parse(JSON.stringify(R.id)),Pe=Q.messages[ve].childrenIds;for(;Pe.length!==0;)ve=Pe.at(-1),Pe=Q.messages[ve].childrenIds;t(21,Q.currentId=ve,Q),await xe(),await xe(),await xe();const _e=document.getElementById(`message-${R.id}`);_e&&_e.scrollIntoView({behavior:"smooth"}),await xe(),At(ie,Q)},St=async(R,ie)=>{var ve,Pe;if(console.log(R),R.chat_id===s){await xe();let _e=Q.messages[R.message_id];if(_e){const Ee=((ve=R==null?void 0:R.data)==null?void 0:ve.type)??null,be=((Pe=R==null?void 0:R.data)==null?void 0:Pe.data)??null;if(Ee==="status")_e!=null&&_e.statusHistory?_e.statusHistory.push(be):_e.statusHistory=[be];else if(Ee==="source"||Ee==="citation")if((be==null?void 0:be.type)==="code_execution"){_e!=null&&_e.code_executions||(_e.code_executions=[]);const Ue=_e.code_executions.findIndex(nt=>nt.id===be.id);Ue!==-1?_e.code_executions[Ue]=be:_e.code_executions.push(be),_e.code_executions=_e.code_executions}else _e!=null&&_e.sources?_e.sources.push(be):_e.sources=[be];else if(Ee==="chat:completion")de(be,_e,R.chat_id);else if(Ee==="chat:title")$l.set(be),il.set(1),await al.set(await bl(localStorage.token,n));else if(Ee==="chat:tags")Oe=await Ko(localStorage.token,s),ec.set(await mc(localStorage.token));else if(Ee==="message")_e.content+=be.content;else if(Ee==="replace")_e.content=be.content;else if(Ee==="action"){if(be.action==="continue"){const Ue=document.getElementById("continue-response-button");Ue&&Ue.click()}}else if(Ee==="confirmation")t(15,X=ie),t(12,P=!1),t(9,U=!0),t(10,D=be.title),t(11,Y=be.message);else if(Ee==="execute"){t(15,X=ie);try{const nt=await new Function(`return (async () => { ${be.code} })()`)();ie&&ie(nt)}catch(Ue){console.error("Error executing code:",Ue)}}else if(Ee==="input")t(15,X=ie),t(12,P=!0),t(9,U=!0),t(10,D=be.title),t(11,Y=be.message),t(13,j=be.placeholder),t(14,G=(be==null?void 0:be.value)??"");else if(Ee==="notification"){const Ue=(be==null?void 0:be.type)??"info",nt=(be==null?void 0:be.content)??"";Ue==="success"?et.success(nt):Ue==="error"?et.error(nt):Ue==="warning"?et.warning(nt):et.info(nt)}else console.log("Unknown message type",be);t(21,Q.messages[R.message_id]=_e,Q)}}},_t=async R=>{if(R.origin===window.origin){if(R.data.type==="input:prompt"){console.debug(R.data.text);const ie=document.getElementById("chat-input");ie&&(t(22,Ce=R.data.text),ie.focus())}R.data.type==="action:submit"&&(console.debug(R.data.text),Ce!==""&&(await xe(),Me(Ce))),R.data.type==="input:prompt:submit"&&(console.debug(R.data.text),Ce!==""&&(await xe(),Me(R.data.text)))}};pn(async()=>{if(console.log("mounted"),window.addEventListener("message",_t),c==null||c.on("chat-events",St),s?o&&await Po("/"):Z=cl.subscribe(async ie=>{ie||await je()}),localStorage.getItem(`chat-input-${I}`))try{const ie=JSON.parse(localStorage.getItem(`chat-input-${I}`));t(22,Ce=ie.prompt),t(24,Ke=ie.files),t(17,q=ie.selectedToolIds),t(19,ge=ie.webSearchEnabled),t(18,ae=ie.imageGenerationEnabled)}catch{t(22,Ce=""),t(24,Ke=[]),t(17,q=[]),t(19,ge=!1),t(18,ae=!1)}Ut.subscribe(async ie=>{if(A&&!p)try{ie?O.openPane():A.collapse()}catch{}ie||(kn.set(!1),Gn.set(!1),jn.set(!1))});const R=document.getElementById("chat-input");R==null||R.focus(),al.subscribe(()=>{})}),ll(()=>{Z==null||Z(),window.removeEventListener("message",_t),c==null||c.off("chat-events",St)});const Rt=async R=>{var Pe,_e;if(console.log("Starting uploadGoogleDriveFile with:",{id:R.id,name:R.name,url:R.url,headers:{Authorization:`Bearer ${token}`}}),!(R!=null&&R.id)||!(R!=null&&R.name)||!(R!=null&&R.url)||!((Pe=R==null?void 0:R.headers)!=null&&Pe.Authorization))throw new Error("Invalid file data provided");const ie=el(),ve={type:"file",file:"",id:null,url:R.url,name:R.name,collection_name:"",status:"uploading",error:"",itemId:ie,size:0};try{t(24,Ke=[...Ke,ve]),console.log("Processing web file with URL:",R.url);const Ee={headers:{Authorization:R.headers.Authorization,Accept:"*/*"},method:"GET"};console.log("Fetching file content from Google Drive...");const be=await fetch(R.url,Ee);if(!be.ok){const Mt=await be.text();throw new Error(`Failed to fetch file (${be.status}): ${Mt}`)}const Ue=be.headers.get("content-type")||"application/octet-stream";console.log("Response received with content-type:",Ue),console.log("Converting response to blob...");const nt=await be.blob();if(nt.size===0)throw new Error("Retrieved file is empty");console.log("Blob created:",{size:nt.size,type:nt.type||Ue});const ft=new File([nt],R.name,{type:nt.type||Ue});if(console.log("File object created:",{name:ft.name,size:ft.size,type:ft.type}),ft.size===0)throw new Error("Created file is empty");console.log("Uploading file to server...");const Et=await uploadFile(localStorage.token,ft);if(!Et)throw new Error("Server returned null response for file upload");console.log("File uploaded successfully:",Et),ve.status="uploaded",ve.file=Et,ve.id=Et.id,ve.size=ft.size,ve.collection_name=(_e=Et==null?void 0:Et.meta)==null?void 0:_e.collection_name,ve.url=`${WEBUI_API_BASE_URL}/files/${Et.id}`,t(24,Ke),t(0,I),et.success(r.t("File uploaded successfully"))}catch(Ee){console.error("Error uploading file:",Ee),t(24,Ke=Ke.filter(be=>be.itemId!==ie)),et.error(r.t("Error uploading file: {{error}}",{error:Ee.message||"Unknown error"}))}},Tt=async R=>{console.log(R);const ie={type:"doc",name:R,collection_name:"",status:"uploading",url:R,error:""};try{t(24,Ke=[...Ke,ie]);const ve=await pc(localStorage.token,"",R);ve&&(ie.status="uploaded",ie.collection_name=ve.collection_name,ie.file={...ve.file,...ie.file},t(24,Ke),t(0,I))}catch(ve){t(24,Ke=Ke.filter(Pe=>Pe.name!==R)),et.error(JSON.stringify(ve))}},pe=async R=>{console.log(R);const ie={type:"doc",name:R,collection_name:"",status:"uploading",context:"full",url:R,error:""};try{t(24,Ke=[...Ke,ie]);const ve=await bc(localStorage.token,R);ve&&(ie.status="uploaded",ie.collection_name=ve.collection_name,ie.file={...ve.file,...ie.file},t(24,Ke),t(0,I))}catch(ve){t(24,Ke=Ke.filter(Pe=>Pe.name!==R)),et.error(`${ve}`)}},je=async()=>{var ve,Pe,_e,Ee;if(d.url.searchParams.get("models"))t(1,J=(ve=d.url.searchParams.get("models"))==null?void 0:ve.split(","));else if(d.url.searchParams.get("model")){const be=(Pe=d.url.searchParams.get("model"))==null?void 0:Pe.split(",");if(be.length===1)if(a.find(nt=>nt.id===be[0]))t(1,J=be);else{const nt=document.getElementById("model-selector-0-button");if(nt){nt.click(),await xe();const ft=document.getElementById("model-search-input");ft&&(ft.focus(),ft.value=be[0],ft.dispatchEvent(new Event("input")))}}else t(1,J=be)}else sessionStorage.selectedModels?(t(1,J=JSON.parse(sessionStorage.selectedModels)),sessionStorage.removeItem("selectedModels")):i!=null&&i.models?t(1,J=i==null?void 0:i.models):f!=null&&f.default_models&&(console.log((f==null?void 0:f.default_models.split(","))??""),t(1,J=f==null?void 0:f.default_models.split(",")));t(1,J=J.filter(be=>a.map(Ue=>Ue.id).includes(be))),(J.length===0||J.length===1&&J[0]==="")&&(a.length>0?t(1,J=[a[0].id]):t(1,J=[""])),await Ut.set(!1),await kn.set(!1),await Gn.set(!1),await jn.set(!1),d.url.pathname.includes("/c/")&&window.history.replaceState(Q.state,"","/"),t(6,H=!0),await cl.set(""),await $l.set(""),t(21,Q={messages:{},currentId:null}),t(23,Ge=[]),t(25,ue={}),d.url.searchParams.get("youtube")&&pe(`https://www.youtube.com/watch?v=${d.url.searchParams.get("youtube")}`),d.url.searchParams.get("web-search")==="true"&&t(19,ge=!0),d.url.searchParams.get("image-generation")==="true"&&t(18,ae=!0),d.url.searchParams.get("tools")?t(17,q=(_e=d.url.searchParams.get("tools"))==null?void 0:_e.split(",").map(be=>be.trim()).filter(be=>be)):d.url.searchParams.get("tool-ids")&&t(17,q=(Ee=d.url.searchParams.get("tool-ids"))==null?void 0:Ee.split(",").map(be=>be.trim()).filter(be=>be)),d.url.searchParams.get("call")==="true"&&(kn.set(!0),Ut.set(!0)),d.url.searchParams.get("q")&&(t(22,Ce=d.url.searchParams.get("q")??""),Ce&&(await xe(),Me(Ce))),t(1,J=J.map(be=>a.map(Ue=>Ue.id).includes(be)?be:""));const R=await _s(localStorage.token);R?Zn.set(R.ui):Zn.set(JSON.parse(localStorage.getItem("settings")??"{}"));const ie=document.getElementById("chat-input");setTimeout(()=>ie==null?void 0:ie.focus(),0)},rt=async()=>{if(cl.set(I),Oe=await Ko(localStorage.token,s).catch(async R=>(await Po("/"),null)),Oe){await gc(localStorage.token,s).catch(async ie=>[]);const R=Oe.chat;if(R){console.log(R),t(1,J=((R==null?void 0:R.models)??void 0)!==void 0?R.models:[R.models??""]),t(21,Q=((R==null?void 0:R.history)??void 0)!==void 0?R.history:dc(R.messages)),$l.set(R.title);const ie=await _s(localStorage.token);return ie?await Zn.set(ie.ui):await Zn.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(25,ue=(R==null?void 0:R.params)??{}),t(23,Ge=(R==null?void 0:R.files)??[]),t(6,H=!0),await xe(),Q.currentId&&t(21,Q.messages[Q.currentId].done=!0,Q),await xe(),!0}else return null}},he=async()=>{await xe(),F&&t(7,F.scrollTop=F.scrollHeight,F)},wt=async(R,ie,ve,Pe)=>{const _e=await Nc(localStorage.token,{model:ie,messages:Pe.map(Ee=>({id:Ee.id,role:Ee.role,content:Ee.content,info:Ee.info?Ee.info:void 0,timestamp:Ee.timestamp,...Ee.sources?{sources:Ee.sources}:{}})),chat_id:R,session_id:c==null?void 0:c.id,id:ve}).catch(Ee=>(et.error(`${Ee}`),Pe.at(-1).error={content:Ee},null));if(_e!==null&&_e.messages)for(const Ee of _e.messages)Ee!=null&&Ee.id&&t(21,Q.messages[Ee.id]={...Q.messages[Ee.id],...Q.messages[Ee.id].content!==Ee.content?{originalContent:Q.messages[Ee.id].content}:{},...Ee},Q);await xe(),s==R&&(o||(Oe=await Ho(localStorage.token,R,{models:J,messages:Pe,history:Q,params:ue,files:Ge}),il.set(1),await al.set(await bl(localStorage.token,n))))},dt=async(R,ie,ve,Pe,_e=null)=>{const Ee=wn(Q,Pe),be=await Tc(localStorage.token,ie,{model:ve,messages:Ee.map(Ue=>({id:Ue.id,role:Ue.role,content:Ue.content,info:Ue.info?Ue.info:void 0,timestamp:Ue.timestamp,...Ue.sources?{sources:Ue.sources}:{}})),..._e?{event:_e}:{},chat_id:R,session_id:c==null?void 0:c.id,id:Pe}).catch(Ue=>(et.error(`${Ue}`),Ee.at(-1).error={content:Ue},null));if(be!==null&&be.messages)for(const Ue of be.messages)t(21,Q.messages[Ue.id]={...Q.messages[Ue.id],...Q.messages[Ue.id].content!==Ue.content?{originalContent:Q.messages[Ue.id].content}:{},...Ue},Q);s==R&&(o||(Oe=await Ho(localStorage.token,R,{models:J,messages:Ee,history:Q,params:ue,files:Ge}),il.set(1),await al.set(await bl(localStorage.token,n))))},pt=async(R,ie="")=>setInterval(()=>{c==null||c.emit("usage",{action:"chat",model:R,chat_id:ie})},1e3),De=async R=>{if(t(22,Ce=""),J.length===0)et.error(r.t("Model not selected"));else{const ie=J[0],ve=a.filter(ft=>ft.id===ie).at(0),Pe=wn(Q,Q.currentId),_e=Pe.length!==0?Pe.at(-1):null,Ee=el(),be=el(),Ue={id:Ee,parentId:_e?_e.id:null,childrenIds:[be],role:"user",content:R||`[PROMPT] ${Ee}`,timestamp:Math.floor(Date.now()/1e3)},nt={id:be,parentId:Ee,childrenIds:[],role:"assistant",content:`[RESPONSE] ${be}`,done:!0,model:ie,modelName:ve.name??ve.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3)};_e&&(_e.childrenIds.push(Ee),t(21,Q.messages[_e.id]=_e,Q)),t(21,Q.messages[Ee]=Ue,Q),t(21,Q.messages[be]=nt,Q),t(21,Q.currentId=be,Q),await xe(),H&&he(),Pe.length===0?await Xt(Q):await At(s,Q)}},Vt=async({modelId:R,parentId:ie,messages:ve})=>{const Pe=a.filter(be=>be.id===R).at(0);let _e=Q.messages[ie],Ee=_e?_e.id:null;for(const be of ve){let Ue=el();if(be.role==="user"){const nt={id:Ue,parentId:Ee,childrenIds:[],timestamp:Math.floor(Date.now()/1e3),...be};_e&&(_e.childrenIds.push(Ue),t(21,Q.messages[_e.id]=_e,Q)),t(21,Q.messages[Ue]=nt,Q),_e=nt,Ee=Ue}else{const nt={id:Ue,parentId:Ee,childrenIds:[],done:!0,model:Pe.id,modelName:Pe.name??Pe.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3),...be};_e&&(_e.childrenIds.push(Ue),t(21,Q.messages[_e.id]=_e,Q)),t(21,Q.messages[Ue]=nt,Q),_e=nt,Ee=Ue}}t(21,Q.currentId=Ee,Q),await xe(),H&&he(),ve.length===0?await Xt(Q):await At(s,Q)},de=async(R,ie,ve)=>{var Mt,gt,xt,an,bn,Kn,zn,Un,vn,cn,nn,un,mn,Nn;const{id:Pe,done:_e,choices:Ee,content:be,sources:Ue,selected_model_id:nt,error:ft,usage:Et}=R;if(ft&&await ht(ft,ie),Ue&&(ie.sources=Ue),Ee)if((gt=(Mt=Ee[0])==null?void 0:Mt.message)!=null&&gt.content)ie.content+=(an=(xt=Ee[0])==null?void 0:xt.message)==null?void 0:an.content;else{let Lt=((Kn=(bn=Ee[0])==null?void 0:bn.delta)==null?void 0:Kn.content)??"";if(ie.content==""&&Lt==`
`)console.log("Empty response");else{ie.content+=Lt,navigator.vibrate&&((i==null?void 0:i.hapticFeedback)??!1)&&navigator.vibrate(5);const sn=Oo(ie.content,((Un=(zn=f==null?void 0:f.audio)==null?void 0:zn.tts)==null?void 0:Un.split_on)??"punctuation");sn.pop(),sn.length>0&&sn[sn.length-1]!==ie.lastSentence&&(ie.lastSentence=sn[sn.length-1],S.dispatchEvent(new CustomEvent("chat",{detail:{id:ie.id,content:sn[sn.length-1]}})))}}if(be){ie.content=be,navigator.vibrate&&((i==null?void 0:i.hapticFeedback)??!1)&&navigator.vibrate(5);const Lt=Oo(ie.content,((cn=(vn=f==null?void 0:f.audio)==null?void 0:vn.tts)==null?void 0:cn.split_on)??"punctuation");Lt.pop(),Lt.length>0&&Lt[Lt.length-1]!==ie.lastSentence&&(ie.lastSentence=Lt[Lt.length-1],S.dispatchEvent(new CustomEvent("chat",{detail:{id:ie.id,content:Lt[Lt.length-1]}})))}if(nt&&(ie.selectedModelId=nt,ie.arena=!0),Et&&(ie.usage=Et),t(21,Q.messages[ie.id]=ie,Q),_e){ie.done=!0,i.responseAutoCopy&&xo(ie.content),i.responseAutoPlayback&&!h&&(await xe(),(nn=document.getElementById(`speak-button-${ie.id}`))==null||nn.click());let Lt=((Nn=Oo(ie.content,((mn=(un=f==null?void 0:f.audio)==null?void 0:un.tts)==null?void 0:mn.split_on)??"punctuation"))==null?void 0:Nn.at(-1))??"";Lt&&S.dispatchEvent(new CustomEvent("chat",{detail:{id:ie.id,content:Lt}})),S.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:ie.id,content:ie.content}})),t(21,Q.messages[ie.id]=ie,Q),await wt(ve,ie.model,ie.id,wn(Q,ie.id))}console.log(R),H&&he()},Me=async(R,{_raw:ie=!1}={})=>{var ft,Et,Mt;console.log("submitPrompt",R,s);const ve=wn(Q,Q.currentId),Pe=J.map(gt=>a.map(xt=>xt.id).includes(gt)?gt:"");if(JSON.stringify(J)!==JSON.stringify(Pe)&&t(1,J=Pe),R===""){et.error(r.t("Please enter a prompt"));return}if(J.includes("")){et.error(r.t("Model not selected"));return}if(ve.length!=0&&ve.at(-1).done!=!0)return;if(ve.length!=0&&ve.at(-1).error){et.error(r.t("Oops! There was an error in the previous response."));return}if(Ke.length>0&&Ke.filter(gt=>gt.type!=="image"&&gt.status==="uploading").length>0){et.error(r.t("Oops! There are files still uploading. Please wait for the upload to complete."));return}if((((ft=f==null?void 0:f.file)==null?void 0:ft.max_count)??null)!==null&&Ke.length+Ge.length>((Et=f==null?void 0:f.file)==null?void 0:Et.max_count)){et.error(r.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(Mt=f==null?void 0:f.file)==null?void 0:Mt.max_count}));return}t(22,Ce="");const _e=document.getElementById("chat-input");_e&&(_e.style.height="");const Ee=JSON.parse(JSON.stringify(Ke));Ge.push(...Ee.filter(gt=>["doc","file","collection"].includes(gt.type))),t(23,Ge=Ge.filter((gt,xt,an)=>an.findIndex(bn=>JSON.stringify(bn)===JSON.stringify(gt))===xt)),t(24,Ke=[]),t(22,Ce="");let be=el(),Ue={id:be,parentId:ve.length!==0?ve.at(-1).id:null,childrenIds:[],role:"user",content:R,files:Ee.length>0?Ee:void 0,timestamp:Math.floor(Date.now()/1e3),models:J};t(21,Q.messages[be]=Ue,Q),t(21,Q.currentId=be,Q),ve.length!==0&&Q.messages[ve.at(-1).id].childrenIds.push(be);const nt=document.getElementById("chat-input");nt==null||nt.focus(),it(),await we(Q,R,be,{newChat:!0})},we=async(R,ie,ve,{modelId:Pe=null,modelIdx:_e=null,newChat:Ee=!1}={})=>{let be=JSON.parse(JSON.stringify(s));R=JSON.parse(JSON.stringify(R));const Ue={};let nt=Pe?[Pe]:L!==void 0?[L.id]:J;for(const[ft,Et]of nt.entries()){const Mt=a.filter(gt=>gt.id===Et).at(0);if(Mt){let gt=el(),xt={parentId:ve,id:gt,childrenIds:[],role:"assistant",content:"",model:Mt.id,modelName:Mt.name??Mt.id,modelIdx:_e||ft,userContext:null,timestamp:Math.floor(Date.now()/1e3)};t(21,Q.messages[gt]=xt,Q),t(21,Q.currentId=gt,Q),ve!==null&&Q.messages[ve]&&t(21,Q.messages[ve].childrenIds=[...Q.messages[ve].childrenIds,gt],Q),Ue[`${Et}-${_e||ft}`]=gt}}t(21,Q),Ee&&R.messages[R.currentId].parentId===null&&(be=await Xt(R)),await xe(),R=JSON.parse(JSON.stringify(Q)),await At(be,R),await Promise.all(nt.map(async(ft,Et)=>{var gt,xt,an;console.log("modelId",ft);const Mt=a.filter(bn=>bn.id===ft).at(0);if(Mt){wn(R,ve).some(nn=>{var un;return(un=nn.files)==null?void 0:un.some(mn=>mn.type==="image")})&&!(((an=(xt=(gt=Mt.info)==null?void 0:gt.meta)==null?void 0:xt.capabilities)==null?void 0:an.vision)??!0)&&et.error(r.t("Model {{modelName}} is not vision capable",{modelName:Mt.name??Mt.id}));let zn=Ue[`${ft}-${_e||Et}`],Un=R.messages[zn],vn=null;if(((i==null?void 0:i.memory)??!1)&&vn===null){const nn=await Sc(localStorage.token,ie).catch(un=>(et.error(`${un}`),null));nn&&(nn.documents[0].length>0&&(vn=nn.documents[0].reduce((un,mn,Nn)=>{const Lt=nn.metadatas[0][Nn].created_at,sn=new Date(Lt*1e3).toISOString().split("T")[0];return`${un}${Nn+1}. [${sn}]. ${mn}
`},"")),console.log(vn))}Un.userContext=vn;const cn=await pt(Mt.id,be);he(),await Xe(R,Mt,zn),cn&&clearInterval(cn)}else et.error(r.t("Model {{modelId}} not found",{modelId:ft}))})),il.set(1),al.set(await bl(localStorage.token,n))},Xe=async(R,ie,ve,Pe)=>{var Et,Mt,gt,xt,an,bn,Kn,zn,Un,vn,cn,nn,un,mn,Nn,Lt,sn,ss;const _e=R.messages[ve],Ee=R.messages[_e.parentId];let be=JSON.parse(JSON.stringify(Ge));be.push(...((Ee==null?void 0:Ee.files)??[]).filter(bt=>["doc","file","collection"].includes(bt.type)),...((_e==null?void 0:_e.files)??[]).filter(bt=>["web_search_results"].includes(bt.type))),be=be.filter((bt,zl,rs)=>rs.findIndex(Jl=>JSON.stringify(Jl)===JSON.stringify(bt))===zl),he(),S.dispatchEvent(new CustomEvent("chat:start",{detail:{id:ve}})),await xe();const Ue=((Mt=(Et=ie==null?void 0:ie.info)==null?void 0:Et.params)==null?void 0:Mt.stream_response)??((gt=i==null?void 0:i.params)==null?void 0:gt.stream_response)??(ue==null?void 0:ue.stream_response)??!0,nt=[ue!=null&&ue.system||i.system||((_e==null?void 0:_e.userContext)??null)?{role:"system",content:`${cc((ue==null?void 0:ue.system)??(i==null?void 0:i.system)??"",u.name,i!=null&&i.userLocation?await ps(localStorage.token):void 0)}${(_e==null?void 0:_e.userContext)??null?`

User Context:
${(_e==null?void 0:_e.userContext)??""}`:""}`}:void 0,...wn(R,ve).map(bt=>({...bt,content:uc(bt.content,["reasoning","code_interpreter"])}))].filter(bt=>{var zl;return(zl=bt==null?void 0:bt.content)==null?void 0:zl.trim()}).map((bt,zl,rs)=>{var Jl,is,as;return{role:bt.role,...((Jl=bt.files)==null?void 0:Jl.filter(Nl=>Nl.type==="image").length)>0&&bt.role==="user"?{content:[{type:"text",text:((is=bt==null?void 0:bt.merged)==null?void 0:is.content)??bt.content},...bt.files.filter(Nl=>Nl.type==="image").map(Nl=>({type:"image_url",image_url:{url:Nl.url}}))]}:{content:((as=bt==null?void 0:bt.merged)==null?void 0:as.content)??bt.content}}}),ft=await _c(localStorage.token,{stream:Ue,model:ie.id,messages:nt,params:{...i==null?void 0:i.params,...ue,format:i.requestFormat??void 0,keep_alive:i.keepAlive??void 0,stop:(ue==null?void 0:ue.stop)??((xt=i==null?void 0:i.params)==null?void 0:xt.stop)??void 0?((ue==null?void 0:ue.stop.split(",").map(bt=>bt.trim()))??i.params.stop).map(bt=>decodeURIComponent(JSON.parse('"'+bt.replace(/\"/g,'\\"')+'"'))):void 0},files:((be==null?void 0:be.length)??0)>0?be:void 0,tool_ids:q.length>0?q:void 0,features:{image_generation:(an=f==null?void 0:f.features)!=null&&an.enable_image_generation&&(u.role==="admin"||(Kn=(bn=u==null?void 0:u.permissions)==null?void 0:bn.features)!=null&&Kn.image_generation)?ae:!1,code_interpreter:u.role==="admin"||(Un=(zn=u==null?void 0:u.permissions)==null?void 0:zn.features)!=null&&Un.code_interpreter?se:!1,web_search:(vn=f==null?void 0:f.features)!=null&&vn.enable_web_search&&(u.role==="admin"||(nn=(cn=u==null?void 0:u.permissions)==null?void 0:cn.features)!=null&&nn.web_search)?ge||((i==null?void 0:i.webSearch)??!1)==="always":!1},variables:{...fc(u.name,i!=null&&i.userLocation?await ps(localStorage.token):void 0)},session_id:c==null?void 0:c.id,chat_id:s,id:ve,...!o&&(nt.length==1||nt.length==2&&((un=nt.at(0))==null?void 0:un.role)==="system"&&((mn=nt.at(1))==null?void 0:mn.role)==="user")&&J[0]===ie.id?{background_tasks:{title_generation:((Nn=i==null?void 0:i.title)==null?void 0:Nn.auto)??!0,tags_generation:(i==null?void 0:i.autoTags)??!0}}:{},...Ue&&(((ss=(sn=(Lt=ie.info)==null?void 0:Lt.meta)==null?void 0:sn.capabilities)==null?void 0:ss.usage)??!1)?{stream_options:{include_usage:!0}}:{}},`${Hl}/api`).catch(bt=>(et.error(`${bt}`),_e.error={content:bt},_e.done=!0,t(21,Q.messages[ve]=_e,Q),t(21,Q.currentId=ve,Q),null));console.log(ft),ft&&(fe=ft.task_id),await xe(),he()},ht=async(R,ie)=>{let ve="",Pe;R&&(Pe=R),console.error(Pe),"detail"in Pe?(et.error(Pe.detail),ve=Pe.detail):"error"in Pe?"message"in Pe.error?(et.error(Pe.error.message),ve=Pe.error.message):(et.error(Pe.error),ve=Pe.error):"message"in Pe&&(et.error(Pe.message),ve=Pe.message),ie.error={content:r.t("Uh-oh! There was an issue with the response.")+`
`+ve},ie.done=!0,ie.statusHistory&&(ie.statusHistory=ie.statusHistory.filter(_e=>_e.action!=="knowledge_search")),t(21,Q.messages[ie.id]=ie,Q)},yt=()=>{if(fe&&Vc(localStorage.token,fe).catch(ie=>null)){fe=null;const ie=Q.messages[Q.currentId];ie.done=!0,t(21,Q.messages[Q.currentId]=ie,Q),H&&he()}},It=async(R,ie)=>{let ve=ie,Pe=el(),_e={id:Pe,parentId:R,childrenIds:[],role:"user",content:ve,models:J};R!==null&&t(21,Q.messages[R].childrenIds=[...Q.messages[R].childrenIds,Pe],Q),t(21,Q.messages[Pe]=_e,Q),t(21,Q.currentId=Pe,Q),await xe(),await we(Q,ve,Pe)},zt=async R=>{if(console.log("regenerateResponse"),Q.currentId){let ie=Q.messages[R.parentId],ve=ie.content;((ie==null?void 0:ie.models)??[...J]).length==1?await we(Q,ve,ie.id):await we(Q,ve,ie.id,{modelId:R.model,modelIdx:R.modelIdx})}},Bt=async()=>{if(console.log("continueResponse"),JSON.parse(JSON.stringify(s)),Q.currentId&&Q.messages[Q.currentId].done==!0){const R=Q.messages[Q.currentId];R.done=!1,await xe();const ie=a.filter(ve=>ve.id===((R==null?void 0:R.selectedModelId)??R.model)).at(0);ie&&await Xe(Q,ie,R.id)}},Nt=async(R,ie,ve)=>{console.log("mergeResponses",R,ie);const Pe=Q.messages[R],_e={status:!0,content:""};Pe.merged=_e,t(21,Q.messages[R]=Pe,Q);try{const[Ee,be]=await zc(localStorage.token,Pe.model,Q.messages[Pe.parentId].content,ie);if(Ee&&Ee.ok&&Ee.body){const Ue=await Lu(Ee.body,i.splitLargeChunks);for await(const nt of Ue){const{value:ft,done:Et,sources:Mt,error:gt,usage:xt}=nt;if(gt||Et)break;_e.content==""&&ft==`
`||(_e.content+=ft,t(21,Q.messages[R]=Pe,Q),H&&he())}await At(ve,Q)}else console.error(Ee)}catch(Ee){console.error(Ee)}},Xt=async R=>{let ie=s;return o?(ie="local",await cl.set("local")):(Oe=await hc(localStorage.token,{id:ie,title:r.t("New Chat"),models:J,system:i.system??void 0,params:ue,history:R,messages:wn(R,R.currentId),tags:[],timestamp:Date.now()}),ie=Oe.id,await cl.set(ie),await al.set(await bl(localStorage.token,n)),il.set(1),window.history.replaceState(R.state,"",`/c/${ie}`)),await xe(),ie},At=async(R,ie)=>{s==R&&(o||(Oe=await Ho(localStorage.token,R,{models:J,history:ie,messages:wn(ie,ie.currentId),params:ue,files:Ge}),il.set(1),await al.set(await bl(localStorage.token,n))))};function on(R){U=R,t(9,U)}const fn=R=>{R.detail?X(R.detail):X(!0)},rn=()=>{X(!1)};function dn(R){We[R?"unshift":"push"](()=>{K=R,t(8,K)})}function yn(R){J=R,t(1,J)}const Ct=R=>R.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(R.id):!0,tn=R=>{const ie=R.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([ie,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(ve=>k.find(Pe=>Pe.id===ve))))};function W(R){Q=R,t(21,Q)}function Ne(R){H=R,t(6,H)}function Ze(R){Ce=R,t(22,Ce),t(0,I)}function tt(R){We[R?"unshift":"push"](()=>{F=R,t(7,F)})}const Ye=R=>{t(6,H=F.scrollHeight-F.scrollTop<=F.clientHeight+5)},st=R=>{R.prompt?localStorage.setItem(`chat-input-${s}`,JSON.stringify(R)):localStorage.removeItem(`chat-input-${s}`)};function hn(R){Ke=R,t(24,Ke),t(0,I)}function En(R){Ce=R,t(22,Ce),t(0,I)}function ct(R){H=R,t(6,H)}function Pt(R){q=R,t(17,q),t(0,I)}function In(R){ae=R,t(18,ae),t(0,I)}function Mn(R){se=R,t(20,se)}function An(R){ge=R,t(19,ge),t(0,I)}function Tn(R){L=R,t(2,L)}const hl=async R=>{const{type:ie,data:ve}=R.detail;ie==="web"?await Tt(ve):ie==="youtube"?await pe(ve):ie==="google-drive"&&await Rt(ve)},ol=async R=>{R.detail&&(await xe(),Me((i==null?void 0:i.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))};function Sn(R){Ke=R,t(24,Ke),t(0,I)}function Ln(R){Ce=R,t(22,Ce),t(0,I)}function Xn(R){H=R,t(6,H)}function $n(R){q=R,t(17,q),t(0,I)}function sl(R){ae=R,t(18,ae),t(0,I)}function Vn(R){se=R,t(20,se)}function ml(R){ge=R,t(19,ge),t(0,I)}function rl(R){L=R,t(2,L)}const x=async R=>{const{type:ie,data:ve}=R.detail;ie==="web"?await Tt(ve):ie==="youtube"&&await pe(ve)},Kt=async R=>{R.detail&&(await xe(),Me((i==null?void 0:i.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))},Dt=(R,ie,ve,Pe)=>{const _e=a.find(Ee=>Ee.id===ie);return _e?[...R,_e]:R};function gl(R){We[R?"unshift":"push"](()=>{O=R,t(5,O)})}function Gl(R){Q=R,t(21,Q)}function ql(R){Ge=R,t(23,Ge)}function _l(R){ue=R,t(25,ue)}function Rn(R){Ke=R,t(24,Ke),t(0,I)}function pl(R){A=R,t(4,A)}return l.$$set=R=>{"chatIdProp"in R&&t(0,I=R.chatIdProp)},l.$$.update=()=>{l.$$.dirty[0]&6&&t(16,re=L!==void 0?[L.id]:J),l.$$.dirty[0]&1&&I&&(async()=>{if(t(3,T=!0),console.log(I),t(22,Ce=""),t(24,Ke=[]),t(17,q=[]),t(19,ge=!1),t(18,ae=!1),I&&await rt()){if(await xe(),t(3,T=!1),localStorage.getItem(`chat-input-${I}`))try{const ie=JSON.parse(localStorage.getItem(`chat-input-${I}`));t(22,Ce=ie.prompt),t(24,Ke=ie.files),t(17,q=ie.selectedToolIds),t(19,ge=ie.webSearchEnabled),t(18,ae=ie.imageGenerationEnabled)}catch{}window.setTimeout(()=>he(),0);const R=document.getElementById("chat-input");R==null||R.focus()}else await Po("/")})(),l.$$.dirty[0]&3&&J&&I!==""&&it(),l.$$.dirty[0]&2&&J&&at()},[I,J,L,T,A,O,H,F,K,U,D,Y,P,j,G,X,re,q,ae,ge,se,Q,Ce,Ge,Ke,ue,s,i,a,w,g,v,k,E,S,Yt,Rt,Tt,pe,je,dt,De,Vt,Me,we,yt,It,zt,Bt,Nt,on,fn,rn,dn,yn,Ct,tn,W,Ne,Ze,tt,Ye,st,hn,En,ct,Pt,In,Mn,An,Tn,hl,ol,Sn,Ln,Xn,$n,sl,Vn,ml,rl,x,Kt,Dt,gl,Gl,ql,_l,Rn,pl]}class c2 extends Le{constructor(e){super(),Re(this,e,L_,A_,Fe,{chatIdProp:0},null,[-1,-1,-1,-1])}}function R_(l){let e,t,n,o=l[1].t("Keyboard shortcuts")+"",s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,h,d,p,b=l[1].t("Open new chat")+"",w,g,v,k='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',E,I,T,S=l[1].t("Focus chat input")+"",A,O,H,F='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',K,U,D,Y=l[1].t("Copy last code block")+"",P,j,G,X='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',Z,J,L,re=l[1].t("Copy last response")+"",q,ae,ge,se='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',Oe,Q,fe,Ce,Ge=l[1].t("Toggle settings")+"",Ke,ue,it,at='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',Yt,St,_t,Rt=l[1].t("Toggle sidebar")+"",Tt,pe,je,rt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',he,wt,dt,pt=l[1].t("Delete chat")+"",De,Vt,de,Me='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">⌫/Delete</div>',we,Xe,ht,yt=l[1].t("Show shortcuts")+"",It,zt,Bt,Nt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/⌘</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',Xt,At,on,fn=l[1].t("Input commands")+"",rn,dn,yn,Ct,tn,W,Ne,Ze=l[1].t("Attach file")+"",tt,Ye,st,hn='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',En,ct,Pt,In=l[1].t("Add custom prompt")+"",Mn,An,Tn,hl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',ol,Sn,Ln,Xn=l[1].t("Select model")+"",$n,sl,Vn,ml='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',rl,x;return{c(){e=V("div"),t=V("div"),n=V("div"),s=Ie(o),i=$(),r=V("button"),r.innerHTML=a,c=$(),u=V("div"),f=V("div"),h=V("div"),d=V("div"),p=V("div"),w=Ie(b),g=$(),v=V("div"),v.innerHTML=k,E=$(),I=V("div"),T=V("div"),A=Ie(S),O=$(),H=V("div"),H.innerHTML=F,K=$(),U=V("div"),D=V("div"),P=Ie(Y),j=$(),G=V("div"),G.innerHTML=X,Z=$(),J=V("div"),L=V("div"),q=Ie(re),ae=$(),ge=V("div"),ge.innerHTML=se,Oe=$(),Q=V("div"),fe=V("div"),Ce=V("div"),Ke=Ie(Ge),ue=$(),it=V("div"),it.innerHTML=at,Yt=$(),St=V("div"),_t=V("div"),Tt=Ie(Rt),pe=$(),je=V("div"),je.innerHTML=rt,he=$(),wt=V("div"),dt=V("div"),De=Ie(pt),Vt=$(),de=V("div"),de.innerHTML=Me,we=$(),Xe=V("div"),ht=V("div"),It=Ie(yt),zt=$(),Bt=V("div"),Bt.innerHTML=Nt,Xt=$(),At=V("div"),on=V("div"),rn=Ie(fn),dn=$(),yn=V("div"),Ct=V("div"),tn=V("div"),W=V("div"),Ne=V("div"),tt=Ie(Ze),Ye=$(),st=V("div"),st.innerHTML=hn,En=$(),ct=V("div"),Pt=V("div"),Mn=Ie(In),An=$(),Tn=V("div"),Tn.innerHTML=hl,ol=$(),Sn=V("div"),Ln=V("div"),$n=Ie(Xn),sl=$(),Vn=V("div"),Vn.innerHTML=ml,this.h()},l(Kt){e=z(Kt,"DIV",{class:!0});var Dt=M(e);t=z(Dt,"DIV",{class:!0});var gl=M(t);n=z(gl,"DIV",{class:!0});var Gl=M(n);s=Se(Gl,o),Gl.forEach(_),i=ee(gl),r=z(gl,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(r)!=="svelte-745w2y"&&(r.innerHTML=a),gl.forEach(_),c=ee(Dt),u=z(Dt,"DIV",{class:!0});var ql=M(u);f=z(ql,"DIV",{class:!0});var _l=M(f);h=z(_l,"DIV",{class:!0});var Rn=M(h);d=z(Rn,"DIV",{class:!0});var pl=M(d);p=z(pl,"DIV",{class:!0});var R=M(p);w=Se(R,b),R.forEach(_),g=ee(pl),v=z(pl,"DIV",{class:!0,"data-svelte-h":!0}),ut(v)!=="svelte-lcmjz9"&&(v.innerHTML=k),pl.forEach(_),E=ee(Rn),I=z(Rn,"DIV",{class:!0});var ie=M(I);T=z(ie,"DIV",{class:!0});var ve=M(T);A=Se(ve,S),ve.forEach(_),O=ee(ie),H=z(ie,"DIV",{class:!0,"data-svelte-h":!0}),ut(H)!=="svelte-1c7wvdz"&&(H.innerHTML=F),ie.forEach(_),K=ee(Rn),U=z(Rn,"DIV",{class:!0});var Pe=M(U);D=z(Pe,"DIV",{class:!0});var _e=M(D);P=Se(_e,Y),_e.forEach(_),j=ee(Pe),G=z(Pe,"DIV",{class:!0,"data-svelte-h":!0}),ut(G)!=="svelte-1vgtrzt"&&(G.innerHTML=X),Pe.forEach(_),Z=ee(Rn),J=z(Rn,"DIV",{class:!0});var Ee=M(J);L=z(Ee,"DIV",{class:!0});var be=M(L);q=Se(be,re),be.forEach(_),ae=ee(Ee),ge=z(Ee,"DIV",{class:!0,"data-svelte-h":!0}),ut(ge)!=="svelte-m149u9"&&(ge.innerHTML=se),Ee.forEach(_),Rn.forEach(_),Oe=ee(_l),Q=z(_l,"DIV",{class:!0});var Ue=M(Q);fe=z(Ue,"DIV",{class:!0});var nt=M(fe);Ce=z(nt,"DIV",{class:!0});var ft=M(Ce);Ke=Se(ft,Ge),ft.forEach(_),ue=ee(nt),it=z(nt,"DIV",{class:!0,"data-svelte-h":!0}),ut(it)!=="svelte-1lfzi34"&&(it.innerHTML=at),nt.forEach(_),Yt=ee(Ue),St=z(Ue,"DIV",{class:!0});var Et=M(St);_t=z(Et,"DIV",{class:!0});var Mt=M(_t);Tt=Se(Mt,Rt),Mt.forEach(_),pe=ee(Et),je=z(Et,"DIV",{class:!0,"data-svelte-h":!0}),ut(je)!=="svelte-1egz3pd"&&(je.innerHTML=rt),Et.forEach(_),he=ee(Ue),wt=z(Ue,"DIV",{class:!0});var gt=M(wt);dt=z(gt,"DIV",{class:!0});var xt=M(dt);De=Se(xt,pt),xt.forEach(_),Vt=ee(gt),de=z(gt,"DIV",{class:!0,"data-svelte-h":!0}),ut(de)!=="svelte-tx0rkx"&&(de.innerHTML=Me),gt.forEach(_),we=ee(Ue),Xe=z(Ue,"DIV",{class:!0});var an=M(Xe);ht=z(an,"DIV",{class:!0});var bn=M(ht);It=Se(bn,yt),bn.forEach(_),zt=ee(an),Bt=z(an,"DIV",{class:!0,"data-svelte-h":!0}),ut(Bt)!=="svelte-714lzr"&&(Bt.innerHTML=Nt),an.forEach(_),Ue.forEach(_),_l.forEach(_),ql.forEach(_),Xt=ee(Dt),At=z(Dt,"DIV",{class:!0});var Kn=M(At);on=z(Kn,"DIV",{class:!0});var zn=M(on);rn=Se(zn,fn),zn.forEach(_),Kn.forEach(_),dn=ee(Dt),yn=z(Dt,"DIV",{class:!0});var Un=M(yn);Ct=z(Un,"DIV",{class:!0});var vn=M(Ct);tn=z(vn,"DIV",{class:!0});var cn=M(tn);W=z(cn,"DIV",{class:!0});var nn=M(W);Ne=z(nn,"DIV",{class:!0});var un=M(Ne);tt=Se(un,Ze),un.forEach(_),Ye=ee(nn),st=z(nn,"DIV",{class:!0,"data-svelte-h":!0}),ut(st)!=="svelte-11t0lmd"&&(st.innerHTML=hn),nn.forEach(_),En=ee(cn),ct=z(cn,"DIV",{class:!0});var mn=M(ct);Pt=z(mn,"DIV",{class:!0});var Nn=M(Pt);Mn=Se(Nn,In),Nn.forEach(_),An=ee(mn),Tn=z(mn,"DIV",{class:!0,"data-svelte-h":!0}),ut(Tn)!=="svelte-1s9pky1"&&(Tn.innerHTML=hl),mn.forEach(_),ol=ee(cn),Sn=z(cn,"DIV",{class:!0});var Lt=M(Sn);Ln=z(Lt,"DIV",{class:!0});var sn=M(Ln);$n=Se(sn,Xn),sn.forEach(_),sl=ee(Lt),Vn=z(Lt,"DIV",{class:!0,"data-svelte-h":!0}),ut(Vn)!=="svelte-oivy56"&&(Vn.innerHTML=ml),Lt.forEach(_),cn.forEach(_),vn.forEach(_),Un.forEach(_),Dt.forEach(_),this.h()},h(){m(n,"class","text-lg font-medium self-center"),m(r,"class","self-center"),m(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),m(p,"class","text-sm"),m(v,"class","flex space-x-1 text-xs"),m(d,"class","w-full flex justify-between items-center"),m(T,"class","text-sm"),m(H,"class","flex space-x-1 text-xs"),m(I,"class","w-full flex justify-between items-center"),m(D,"class","text-sm"),m(G,"class","flex space-x-1 text-xs"),m(U,"class","w-full flex justify-between items-center"),m(L,"class","text-sm"),m(ge,"class","flex space-x-1 text-xs"),m(J,"class","w-full flex justify-between items-center"),m(h,"class","flex flex-col space-y-3 w-full self-start"),m(Ce,"class","text-sm"),m(it,"class","flex space-x-1 text-xs"),m(fe,"class","w-full flex justify-between items-center"),m(_t,"class","text-sm"),m(je,"class","flex space-x-1 text-xs"),m(St,"class","w-full flex justify-between items-center"),m(dt,"class","text-sm"),m(de,"class","flex space-x-1 text-xs"),m(wt,"class","w-full flex justify-between items-center"),m(ht,"class","text-sm"),m(Bt,"class","flex space-x-1 text-xs"),m(Xe,"class","w-full flex justify-between items-center"),m(Q,"class","flex flex-col space-y-3 w-full self-start"),m(f,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(u,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(on,"class","text-lg font-medium self-center"),m(At,"class","flex justify-between dark:text-gray-300 px-5"),m(Ne,"class","text-sm"),m(st,"class","flex space-x-1 text-xs"),m(W,"class","w-full flex justify-between items-center"),m(Pt,"class","text-sm"),m(Tn,"class","flex space-x-1 text-xs"),m(ct,"class","w-full flex justify-between items-center"),m(Ln,"class","text-sm"),m(Vn,"class","flex space-x-1 text-xs"),m(Sn,"class","w-full flex justify-between items-center"),m(tn,"class","flex flex-col space-y-3 w-full self-start"),m(Ct,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(yn,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(e,"class","text-gray-700 dark:text-gray-100")},m(Kt,Dt){B(Kt,e,Dt),y(e,t),y(t,n),y(n,s),y(t,i),y(t,r),y(e,c),y(e,u),y(u,f),y(f,h),y(h,d),y(d,p),y(p,w),y(d,g),y(d,v),y(h,E),y(h,I),y(I,T),y(T,A),y(I,O),y(I,H),y(h,K),y(h,U),y(U,D),y(D,P),y(U,j),y(U,G),y(h,Z),y(h,J),y(J,L),y(L,q),y(J,ae),y(J,ge),y(f,Oe),y(f,Q),y(Q,fe),y(fe,Ce),y(Ce,Ke),y(fe,ue),y(fe,it),y(Q,Yt),y(Q,St),y(St,_t),y(_t,Tt),y(St,pe),y(St,je),y(Q,he),y(Q,wt),y(wt,dt),y(dt,De),y(wt,Vt),y(wt,de),y(Q,we),y(Q,Xe),y(Xe,ht),y(ht,It),y(Xe,zt),y(Xe,Bt),y(e,Xt),y(e,At),y(At,on),y(on,rn),y(e,dn),y(e,yn),y(yn,Ct),y(Ct,tn),y(tn,W),y(W,Ne),y(Ne,tt),y(W,Ye),y(W,st),y(tn,En),y(tn,ct),y(ct,Pt),y(Pt,Mn),y(ct,An),y(ct,Tn),y(tn,ol),y(tn,Sn),y(Sn,Ln),y(Ln,$n),y(Sn,sl),y(Sn,Vn),rl||(x=ke(r,"click",l[3]),rl=!0)},p(Kt,Dt){Dt&2&&o!==(o=Kt[1].t("Keyboard shortcuts")+"")&&Te(s,o),Dt&2&&b!==(b=Kt[1].t("Open new chat")+"")&&Te(w,b),Dt&2&&S!==(S=Kt[1].t("Focus chat input")+"")&&Te(A,S),Dt&2&&Y!==(Y=Kt[1].t("Copy last code block")+"")&&Te(P,Y),Dt&2&&re!==(re=Kt[1].t("Copy last response")+"")&&Te(q,re),Dt&2&&Ge!==(Ge=Kt[1].t("Toggle settings")+"")&&Te(Ke,Ge),Dt&2&&Rt!==(Rt=Kt[1].t("Toggle sidebar")+"")&&Te(Tt,Rt),Dt&2&&pt!==(pt=Kt[1].t("Delete chat")+"")&&Te(De,pt),Dt&2&&yt!==(yt=Kt[1].t("Show shortcuts")+"")&&Te(It,yt),Dt&2&&fn!==(fn=Kt[1].t("Input commands")+"")&&Te(rn,fn),Dt&2&&Ze!==(Ze=Kt[1].t("Attach file")+"")&&Te(tt,Ze),Dt&2&&In!==(In=Kt[1].t("Add custom prompt")+"")&&Te(Mn,In),Dt&2&&Xn!==(Xn=Kt[1].t("Select model")+"")&&Te($n,Xn)},d(Kt){Kt&&_(e),rl=!1,x()}}}function U_(l){let e,t,n;function o(i){l[4](i)}let s={$$slots:{default:[R_]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.show=l[0]),e=new ru({props:s}),We.push(()=>Je(e,"show",o)),{c(){te(e.$$.fragment)},l(i){oe(e.$$.fragment,i)},m(i,r){ne(e,i,r),n=!0},p(i,[r]){const a={};r&35&&(a.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,a.show=i[0],qe(()=>t=!1)),e.$set(a)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function W_(l,e,t){let n;const o=Wt("i18n");ce(l,o,a=>t(1,n=a));let{show:s=!1}=e;const i=()=>{t(0,s=!1)};function r(a){s=a,t(0,s)}return l.$$set=a=>{"show"in a&&t(0,s=a.show)},[s,n,o,i,r]}class F_ extends Le{constructor(e){super(),Re(this,e,W_,U_,Fe,{show:0})}}function j_(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=M(e);t=ze(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Y_(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class X_ extends Le{constructor(e){super(),Re(this,e,Y_,j_,Fe,{className:0,strokeWidth:1})}}function K_(l){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=ze(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var o=M(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"class",l[0])},m(n,o){B(n,e,o),y(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Z_(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class G_ extends Le{constructor(e){super(),Re(this,e,Z_,K_,Fe,{className:0,strokeWidth:1})}}function q_(l){let e;const t=l[5].default,n=Gt(t,l,l[9],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&512)&&qt(n,t,o,o[9],e?Qt(t,o[9],s,null):Jt(o[9]),null)},i(o){e||(C(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function J_(l){let e,t,n,o=l[2].t("Documentation")+"",s,i;return e=new X_({props:{className:"size-5"}}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&4)&&o!==(o=r[2].t("Documentation")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function Q_(l){let e,t,n,o=l[2].t("Keyboard shortcuts")+"",s,i;return e=new G_({props:{className:"size-5"}}),{c(){te(e.$$.fragment),t=$(),n=V("div"),s=Ie(o),this.h()},l(r){oe(e.$$.fragment,r),t=ee(r),n=z(r,"DIV",{class:!0});var a=M(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){ne(e,r,a),B(r,t,a),B(r,n,a),y(n,s),i=!0},p(r,a){(!i||a&4)&&o!==(o=r[2].t("Keyboard shortcuts")+"")&&Te(s,o)},i(r){i||(C(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),le(e,r)}}}function x_(l){let e,t,n,o;return e=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[J_]},$$scope:{ctx:l}}}),e.$on("click",l[6]),n=new _n({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Q_]},$$scope:{ctx:l}}}),n.$on("click",l[7]),{c(){te(e.$$.fragment),t=$(),te(n.$$.fragment)},l(s){oe(e.$$.fragment,s),t=ee(s),oe(n.$$.fragment,s)},m(s,i){ne(e,s,i),B(s,t,i),ne(n,s,i),o=!0},p(s,i){const r={};i&516&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const a={};i&516&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),le(e,s),le(n,s)}}}function $_(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:Xl,$$slots:{default:[x_]},$$scope:{ctx:l}}}),{c(){e=V("div"),te(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=M(e);oe(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){B(o,e,s),ne(t,e,null),n=!0},p(o,s){const i={};s&517&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),le(t)}}}function ep(l){let e,t;return e=new yo({props:{$$slots:{content:[$_],default:[q_]},$$scope:{ctx:l}}}),e.$on("change",l[8]),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,[o]){const s={};o&517&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function tp(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const i=Wt("i18n");ce(l,i,d=>t(2,n=d));let{showDocsHandler:r}=e,{showShortcutsHandler:a}=e,{onClose:c=()=>{}}=e;const u=()=>{window.open("https://docs.openwebui.com","_blank")},f=()=>{a()},h=d=>{d.detail===!1&&c()};return l.$$set=d=>{"showDocsHandler"in d&&t(4,r=d.showDocsHandler),"showShortcutsHandler"in d&&t(0,a=d.showShortcutsHandler),"onClose"in d&&t(1,c=d.onClose),"$$scope"in d&&t(9,s=d.$$scope)},[a,c,n,i,r,o,u,f,h,s]}class np extends Le{constructor(e){super(),Re(this,e,tp,ep,Fe,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function lp(l){let e,t="?";return{c(){e=V("button"),e.textContent=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(e)!=="svelte-141cz2e"&&(e.textContent=t),this.h()},h(){m(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-4 flex items-center justify-center text-[0.7rem] rounded-full")},m(n,o){B(n,e,o)},p:ye,d(n){n&&_(e)}}}function op(l){let e,t;return e=new Ot({props:{content:l[1].t("Help"),placement:"left",$$slots:{default:[lp]},$$scope:{ctx:l}}}),{c(){te(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ne(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.content=n[1].t("Help")),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function sp(l){let e,t,n,o,s,i,r,a,c,u;o=new np({props:{showDocsHandler:l[4],showShortcutsHandler:l[5],$$slots:{default:[op]},$$scope:{ctx:l}}});function f(d){l[6](d)}let h={};return l[0]!==void 0&&(h.show=l[0]),i=new F_({props:h}),We.push(()=>Je(i,"show",f)),{c(){e=V("div"),t=V("button"),n=$(),te(o.$$.fragment),s=$(),te(i.$$.fragment),this.h()},l(d){e=z(d,"DIV",{class:!0});var p=M(e);t=z(p,"BUTTON",{id:!0,class:!0}),M(t).forEach(_),n=ee(p),oe(o.$$.fragment,p),p.forEach(_),s=ee(d),oe(i.$$.fragment,d),this.h()},h(){m(t,"id","show-shortcuts-button"),m(t,"class","hidden"),m(e,"class","hidden lg:flex fixed bottom-0 right-0 px-1 py-1 z-20")},m(d,p){B(d,e,p),y(e,t),y(e,n),ne(o,e,null),B(d,s,p),ne(i,d,p),a=!0,c||(u=ke(t,"click",l[3]),c=!0)},p(d,[p]){const b={};p&1&&(b.showDocsHandler=d[4]),p&1&&(b.showShortcutsHandler=d[5]),p&130&&(b.$$scope={dirty:p,ctx:d}),o.$set(b);const w={};!r&&p&1&&(r=!0,w.show=d[0],qe(()=>r=!1)),i.$set(w)},i(d){a||(C(o.$$.fragment,d),C(i.$$.fragment,d),a=!0)},o(d){N(o.$$.fragment,d),N(i.$$.fragment,d),a=!1},d(d){d&&(_(e),_(s)),le(o),le(i,d),c=!1,u()}}}function rp(l,e,t){let n;const o=Wt("i18n");ce(l,o,u=>t(1,n=u));let s=!1;const i=()=>{t(0,s=!s)},r=()=>{t(0,s=!s)},a=()=>{t(0,s=!s)};function c(u){s=u,t(0,s)}return[s,n,o,i,r,a,c]}class u2 extends Le{constructor(e){super(),Re(this,e,rp,sp,Fe,{})}}export{c2 as C,u2 as H};
//# sourceMappingURL=Help.GlNplyr6.js.map
